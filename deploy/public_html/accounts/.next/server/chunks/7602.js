exports.id=7602,exports.ids=[7602],exports.modules={28303:a=>{function b(a){var b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}b.keys=()=>[],b.resolve=b,b.id=28303,a.exports=b},35552:(a,b,c)=>{"use strict";c.d(b,{P:()=>f,g7:()=>g});let d=c(29382).createPool({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME,waitForConnections:!0,connectionLimit:10,queueLimit:0,enableKeepAlive:!0,keepAliveInitialDelay:1e4,idleTimeout:6e4,maxIdle:10});async function e(a,b=3){let c;for(let d=0;d<b;d++)try{return await a()}catch(a){if(c=a,("PROTOCOL_CONNECTION_LOST"===a.code||"EPIPE"===a.code||"ECONNRESET"===a.code||!0===a.fatal)&&d<b-1){let a=500*Math.pow(2,d);await new Promise(b=>setTimeout(b,a));continue}throw a}throw c}async function f(a,b=[]){let c=b.map(a=>void 0===a?null:a);return e(async()=>{let[b]=await d.execute(a,c);return b})}async function g(a,b=[]){let c=b.map(a=>void 0===a?null:a);return e(async()=>{let[b]=await d.execute(a,c);return b})}d.on("error",a=>{console.error("Unexpected error on idle database connection",a)})},41557:(a,b,c)=>{"use strict";c.d(b,{DashboardLayout:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call DashboardLayout() from the server but DashboardLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/abdalltifmohammed/orchids-projects/orchids-logistics-react-app/src/components/layout/dashboard-layout.tsx","DashboardLayout")},44943:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},45272:(a,b,c)=>{Promise.resolve().then(c.bind(c,41557))},45944:(a,b,c)=>{Promise.resolve().then(c.bind(c,50436))},50436:(a,b,c)=>{"use strict";c.d(b,{DashboardLayout:()=>aU});var d=c(21124),e=c(38301),f=c.n(e),g=c(42378),h=c(28308),i=c(47331),j=c(78733),k=c(45334),l=c(27250),m=c(43718),n=c(88285),o=c(44688),p=c(47268),q=c(70045),r=c(1651),s=c(65893),t=c(88005),u=c(15527),v=c(3663),w=c(14343),x=c(30087),y=c(80944),z=c(82823),A=c(15952),B=c(89793),C=c(7550),D=c(74097),E=c(67161),F=c(89027),G=c(99821),H=c(8294),I=c(59405),J=c(7922),K=c(75234),L=c(46422),M=c(44943),N=c(11289);let O=[{titleKey:"home",href:"/dashboard",icon:j.A,gradient:"from-blue-500 to-cyan-500"},{titleKey:"companyRequests",href:"/admin/companies",icon:k.A,adminOnly:!0,gradient:"from-violet-500 to-purple-500"},{titleKey:"addNewCompany",href:"/admin/companies/new",icon:l.A,adminOnly:!0,gradient:"from-emerald-500 to-green-500"},{titleKey:"generateToken",href:"/admin/generate-token",icon:m.A,adminOnly:!0,gradient:"from-amber-500 to-yellow-500"},{titleKey:"searchToken",href:"/admin/search-token",icon:n.A,adminOnly:!0,gradient:"from-sky-500 to-blue-500"},{titleKey:"technicalSupport",href:"/admin/chat",icon:o.A,adminOnly:!0,gradient:"from-indigo-500 to-violet-500"},{titleKey:"adminNotifications",href:"/admin/notifications",icon:p.A,adminOnly:!0,gradient:"from-rose-500 to-pink-500"},{titleKey:"subscriptionPlans",href:"/admin/subscriptions",icon:q.A,adminOnly:!0,gradient:"from-violet-500 to-purple-500"},{titleKey:"specialSalaries",href:"/admin/special-salaries",icon:r.A,adminOnly:!0,dividerAfter:!0,gradient:"from-yellow-500 to-orange-500"},{titleKey:"hrManagement",href:"/hr",icon:s.A,permission:"employees_module",gradient:"from-blue-500 to-indigo-500"},{titleKey:"customersList",href:"/customers",icon:s.A,permission:"clients_module",gradient:"from-cyan-500 to-teal-500"},{titleKey:"financialVouchers",href:"/financial-vouchers",icon:t.A,permission:"receipts_module",gradient:"from-indigo-500 to-purple-500"},{titleKey:"salaryPayrolls",href:"/salary-payrolls",icon:u.A,permission:"salary_payrolls_module",gradient:"from-teal-500 to-emerald-500"},{titleKey:"taxInvoices",href:"/sales-invoices",icon:v.A,permission:"sales_module",gradient:"from-blue-500 to-sky-500"},{titleKey:"creditNotes",href:"/credit-notes",icon:w.A,permission:"credit_notes_module",gradient:"from-red-500 to-rose-500"},{titleKey:"fleetManagement",href:"/fleet",icon:x.A,permission:"sales_module",gradient:"from-yellow-500 to-amber-500"},{titleKey:"ecommerce",href:"/ecommerce",icon:y.A,permission:"ecommerce_orders_module",gradient:"from-emerald-500 to-teal-500"},{titleKey:"monthlyCommissions",href:"/hr/commissions",icon:z.A,permission:"monthly_commissions_module",gradient:"from-amber-500 to-orange-500"},{titleKey:"expensesCenter",href:"/expenses",icon:A.A,permission:"expenses_module",gradient:"from-red-500 to-orange-500"},{titleKey:"journalEntries",href:"/journal-entries",icon:B.A,permission:"journal_entries_module",gradient:"from-violet-500 to-indigo-500"},{titleKey:"profitLossSummary",href:"/profit-loss",icon:C.A,permission:"income_report_module",gradient:"from-sky-500 to-blue-500"},{titleKey:"accountsCenter",href:"/accounts",icon:D.A,permission:"accounts_module",gradient:"from-orange-500 to-amber-500"},{titleKey:"costCenters",href:"/cost-centers",icon:E.A,permission:"cost_centers_module",gradient:"from-slate-500 to-gray-500"},{titleKey:"generalLedger",href:"/general-ledger",icon:D.A,permission:"ledger_module",gradient:"from-zinc-500 to-neutral-500"},{titleKey:"trialBalance",href:"/trial-balance",icon:F.A,permission:"trial_balance_module",gradient:"from-gray-500 to-slate-500"},{titleKey:"incomeStatement",href:"/income-statement",icon:A.A,permission:"income_statement_module",gradient:"from-emerald-500 to-teal-500"},{titleKey:"balanceSheet",href:"/balance-sheet",icon:v.A,permission:"balance_sheet_module",gradient:"from-blue-500 to-cyan-500"},{titleKey:"subUsersManagement",href:"/sub-users",icon:s.A,permission:"sub_users_module",gradient:"from-violet-500 to-purple-500"},{titleKey:"taxSettings",href:"/tax-settings",icon:G.A,permission:"balance_sheet_module",gradient:"from-rose-500 to-pink-500"}];function P({userRole:a,permissions:b={},userType:c}){let[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(null),n=(0,g.usePathname)(),o=(0,g.useRouter)(),p="admin"===a,{isRTL:q}=(0,N.Y)(),r=(0,N.c)("sidebar"),s=O.filter(a=>(!a.adminOnly||!!p)&&(!a.permission||!!p||1===b[a.permission])),t={hidden:{opacity:0,x:q?20:-20},visible:{opacity:1,x:0}},u=q?H.A:I.A;return(0,d.jsxs)("div",{className:"w-64 h-screen overflow-hidden flex flex-col relative",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-transparent"}),(0,d.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4wMiI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMiIvPjwvZz48L2c+PC9zdmc+')] opacity-50"}),(0,d.jsx)("div",{className:(0,M.cn)("absolute top-0 w-64 h-64 bg-gradient-to-br from-blue-600/10 to-transparent rounded-full blur-3xl",q?"right-0":"left-0")}),(0,d.jsx)("div",{className:(0,M.cn)("absolute bottom-0 w-64 h-64 bg-gradient-to-tr from-purple-600/10 to-transparent rounded-full blur-3xl",q?"left-0":"right-0")}),(0,d.jsx)("div",{className:(0,M.cn)("absolute top-0 bottom-0 w-[1px] bg-gradient-to-b from-white/5 via-white/10 to-white/5",q?"left-0":"right-0")}),(0,d.jsx)("div",{className:"relative z-10 p-5 border-b border-white/5",children:j&&(0,d.jsxs)(h.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col items-center gap-4",children:[(0,d.jsxs)(h.P.div,{whileHover:{scale:1.05,rotate:[0,-5,5,0]},transition:{duration:.5},className:"relative",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl blur-xl opacity-50 animate-pulse"}),(0,d.jsx)("div",{className:"relative bg-gradient-to-br from-blue-500 via-blue-600 to-purple-600 p-4 rounded-2xl shadow-2xl shadow-blue-500/30 border border-white/10",children:(0,d.jsx)(J.A,{size:28,className:"text-white drop-shadow-lg"})}),(0,d.jsx)(h.P.div,{className:(0,M.cn)("absolute -top-1",q?"-left-1":"-right-1"),animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:(0,d.jsx)(K.A,{size:14,className:"text-amber-400"})})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-sm font-black tracking-wider bg-gradient-to-r from-white via-blue-200 to-white bg-clip-text text-transparent",children:"LOGISTICS PRO"}),(0,d.jsx)("p",{className:"text-[9px] text-white/30 font-medium tracking-[0.2em] mt-1",children:"ENTERPRISE EDITION"})]})]})}),(0,d.jsx)("nav",{className:"relative z-10 flex-1 p-3 overflow-y-auto custom-scrollbar",children:(0,d.jsx)(h.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.02}}},initial:"hidden",animate:"visible",className:"space-y-1",children:s.map(a=>{let b=n===a.href||n.startsWith(a.href+"/"),c=l===a.href;return(0,d.jsxs)(f().Fragment,{children:[(0,d.jsx)(h.P.div,{variants:t,children:(0,d.jsx)("div",{onClick:()=>{o.push(a.href)},className:"cursor-pointer",children:(0,d.jsxs)(h.P.div,{onHoverStart:()=>m(a.href),onHoverEnd:()=>m(null),whileTap:{scale:.98},className:(0,M.cn)("relative flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-300 group overflow-hidden",b?"bg-white/10 backdrop-blur-xl border border-white/20 shadow-lg shadow-blue-500/10":"hover:bg-white/5 border border-transparent"),children:[b&&(0,d.jsx)(h.P.div,{layoutId:"active-sidebar-bg",className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10",transition:{type:"spring",bounce:.2,duration:.6}}),(0,d.jsx)(i.N,{children:(b||c)&&(0,d.jsx)(h.P.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:3},exit:{opacity:0,width:0},className:(0,M.cn)("absolute top-2 bottom-2 rounded-full",q?"right-0":"left-0",b?`bg-gradient-to-b ${a.gradient}`:"bg-white/30")})}),(0,d.jsx)("div",{className:(0,M.cn)("relative p-2 rounded-lg transition-all duration-300",b?`bg-gradient-to-br ${a.gradient} shadow-lg`:"bg-white/5 group-hover:bg-white/10"),children:(0,d.jsx)(a.icon,{size:16,className:(0,M.cn)("transition-all duration-300",b?"text-white":"text-white/50 group-hover:text-white/80")})}),(0,d.jsx)("span",{className:(0,M.cn)("relative font-bold text-[12px] tracking-wide transition-all duration-300",b?"text-white":"text-white/50 group-hover:text-white/90"),children:r(a.titleKey)}),b&&(0,d.jsx)(h.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},className:(0,M.cn)("absolute",q?"right-3":"left-3"),children:(0,d.jsx)(u,{size:14,className:"text-white/50"})})]})})}),a.dividerAfter&&(0,d.jsxs)("div",{className:"relative my-4 mx-4",children:[(0,d.jsx)("div",{className:"h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"}),(0,d.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 -top-1.5 bg-[#0d1525] px-2",children:(0,d.jsx)(L.A,{size:10,className:"text-white/20"})})]})]},a.href)})})})]})}var Q=c(75535),R=c(79944),S=c(6130),T=c(65888),U=c(15303),V=c(69957),W=c(10578),X=c(85351),Y=c(47089),Z=c(91876),$=c(53519),_=c(30887),aa=c(92902),ab=c(80878),ac=c(14257),ad=c(17792),ae=c(50593),af=c(58610),ag=c(71117),ah=c(25345),ai=c(94684),aj=c(19710),ak=c(68324),al=c(30733),am=c(59268),an=c(43700),ao=c(18310),ap=c(15982),aq=c(88386),ar=c(78660),as=c(76304),at=c(8849),au=c(1949),av=c(71563),aw=c(40284),ax=c(16945),ay=c(14263),az=c(3368),aA=c(78583),aB=c(71613),aC=c(10708),aD=c(88582),aE=c(42830);function aF(){let{locale:a,setLocale:b,isRTL:c}=(0,N.Y)();return(0,d.jsxs)(h.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{b("ar"===a?"en":"ar")},className:"relative flex items-center gap-2 h-10 px-1 bg-slate-800/80 hover:bg-slate-700/80 rounded-full transition-all border border-white/10 overflow-hidden",children:[(0,d.jsx)(h.P.div,{className:"absolute inset-y-1 w-[calc(50%-2px)] bg-gradient-to-r from-violet-500 to-purple-500 rounded-full shadow-lg",animate:{x:c?2:"calc(100% + 2px)"},transition:{type:"spring",stiffness:500,damping:30}}),(0,d.jsx)("div",{className:"relative z-10 flex items-center gap-1 px-3 py-1.5",children:(0,d.jsx)("span",{className:`text-xs font-bold transition-colors ${c?"text-white":"text-white/50"}`,children:"عربي"})}),(0,d.jsx)("div",{className:"relative z-10 flex items-center gap-1 px-3 py-1.5",children:(0,d.jsx)("span",{className:`text-xs font-bold transition-colors ${!c?"text-white":"text-white/50"}`,children:"EN"})})]})}let aG=[{number:1,name:"الفاتحة",englishName:"Al-Fatiha"},{number:2,name:"البقرة",englishName:"Al-Baqarah"},{number:3,name:"آل عمران",englishName:"Aal-Imran"},{number:4,name:"النساء",englishName:"An-Nisa"},{number:5,name:"المائدة",englishName:"Al-Ma'idah"},{number:6,name:"الأنعام",englishName:"Al-An'am"},{number:7,name:"الأعراف",englishName:"Al-A'raf"},{number:8,name:"الأنفال",englishName:"Al-Anfal"},{number:9,name:"التوبة",englishName:"At-Tawbah"},{number:10,name:"يونس",englishName:"Yunus"},{number:11,name:"هود",englishName:"Hud"},{number:12,name:"يوسف",englishName:"Yusuf"},{number:13,name:"الرعد",englishName:"Ar-Ra'd"},{number:14,name:"إبراهيم",englishName:"Ibrahim"},{number:15,name:"الحجر",englishName:"Al-Hijr"},{number:16,name:"النحل",englishName:"An-Nahl"},{number:17,name:"الإسراء",englishName:"Al-Isra"},{number:18,name:"الكهف",englishName:"Al-Kahf"},{number:19,name:"مريم",englishName:"Maryam"},{number:20,name:"طه",englishName:"Ta-Ha"},{number:21,name:"الأنبياء",englishName:"Al-Anbiya"},{number:22,name:"الحج",englishName:"Al-Hajj"},{number:23,name:"المؤمنون",englishName:"Al-Mu'minun"},{number:24,name:"النور",englishName:"An-Nur"},{number:25,name:"الفرقان",englishName:"Al-Furqan"},{number:26,name:"الشعراء",englishName:"Ash-Shu'ara"},{number:27,name:"النمل",englishName:"An-Naml"},{number:28,name:"القصص",englishName:"Al-Qasas"},{number:29,name:"العنكبوت",englishName:"Al-Ankabut"},{number:30,name:"الروم",englishName:"Ar-Rum"},{number:31,name:"لقمان",englishName:"Luqman"},{number:32,name:"السجدة",englishName:"As-Sajdah"},{number:33,name:"الأحزاب",englishName:"Al-Ahzab"},{number:34,name:"سبأ",englishName:"Saba"},{number:35,name:"فاطر",englishName:"Fatir"},{number:36,name:"يس",englishName:"Ya-Sin"},{number:37,name:"الصافات",englishName:"As-Saffat"},{number:38,name:"ص",englishName:"Sad"},{number:39,name:"الزمر",englishName:"Az-Zumar"},{number:40,name:"غافر",englishName:"Ghafir"},{number:41,name:"فصلت",englishName:"Fussilat"},{number:42,name:"الشورى",englishName:"Ash-Shura"},{number:43,name:"الزخرف",englishName:"Az-Zukhruf"},{number:44,name:"الدخان",englishName:"Ad-Dukhan"},{number:45,name:"الجاثية",englishName:"Al-Jathiyah"},{number:46,name:"الأحقاف",englishName:"Al-Ahqaf"},{number:47,name:"محمد",englishName:"Muhammad"},{number:48,name:"الفتح",englishName:"Al-Fath"},{number:49,name:"الحجرات",englishName:"Al-Hujurat"},{number:50,name:"ق",englishName:"Qaf"},{number:51,name:"الذاريات",englishName:"Adh-Dhariyat"},{number:52,name:"الطور",englishName:"At-Tur"},{number:53,name:"النجم",englishName:"An-Najm"},{number:54,name:"القمر",englishName:"Al-Qamar"},{number:55,name:"الرحمن",englishName:"Ar-Rahman"},{number:56,name:"الواقعة",englishName:"Al-Waqi'ah"},{number:57,name:"الحديد",englishName:"Al-Hadid"},{number:58,name:"المجادلة",englishName:"Al-Mujadilah"},{number:59,name:"الحشر",englishName:"Al-Hashr"},{number:60,name:"الممتحنة",englishName:"Al-Mumtahanah"},{number:61,name:"الصف",englishName:"As-Saff"},{number:62,name:"الجمعة",englishName:"Al-Jumu'ah"},{number:63,name:"المنافقون",englishName:"Al-Munafiqun"},{number:64,name:"التغابن",englishName:"At-Taghabun"},{number:65,name:"الطلاق",englishName:"At-Talaq"},{number:66,name:"التحريم",englishName:"At-Tahrim"},{number:67,name:"الملك",englishName:"Al-Mulk"},{number:68,name:"القلم",englishName:"Al-Qalam"},{number:69,name:"الحاقة",englishName:"Al-Haqqah"},{number:70,name:"المعارج",englishName:"Al-Ma'arij"},{number:71,name:"نوح",englishName:"Nuh"},{number:72,name:"الجن",englishName:"Al-Jinn"},{number:73,name:"المزمل",englishName:"Al-Muzzammil"},{number:74,name:"المدثر",englishName:"Al-Muddaththir"},{number:75,name:"القيامة",englishName:"Al-Qiyamah"},{number:76,name:"الإنسان",englishName:"Al-Insan"},{number:77,name:"المرسلات",englishName:"Al-Mursalat"},{number:78,name:"النبأ",englishName:"An-Naba"},{number:79,name:"النازعات",englishName:"An-Nazi'at"},{number:80,name:"عبس",englishName:"Abasa"},{number:81,name:"التكوير",englishName:"At-Takwir"},{number:82,name:"الانفطار",englishName:"Al-Infitar"},{number:83,name:"المطففين",englishName:"Al-Mutaffifin"},{number:84,name:"الانشقاق",englishName:"Al-Inshiqaq"},{number:85,name:"البروج",englishName:"Al-Buruj"},{number:86,name:"الطارق",englishName:"At-Tariq"},{number:87,name:"الأعلى",englishName:"Al-A'la"},{number:88,name:"الغاشية",englishName:"Al-Ghashiyah"},{number:89,name:"الفجر",englishName:"Al-Fajr"},{number:90,name:"البلد",englishName:"Al-Balad"},{number:91,name:"الشمس",englishName:"Ash-Shams"},{number:92,name:"الليل",englishName:"Al-Layl"},{number:93,name:"الضحى",englishName:"Ad-Duha"},{number:94,name:"الشرح",englishName:"Ash-Sharh"},{number:95,name:"التين",englishName:"At-Tin"},{number:96,name:"العلق",englishName:"Al-Alaq"},{number:97,name:"القدر",englishName:"Al-Qadr"},{number:98,name:"البينة",englishName:"Al-Bayyinah"},{number:99,name:"الزلزلة",englishName:"Az-Zalzalah"},{number:100,name:"العاديات",englishName:"Al-Adiyat"},{number:101,name:"القارعة",englishName:"Al-Qari'ah"},{number:102,name:"التكاثر",englishName:"At-Takathur"},{number:103,name:"العصر",englishName:"Al-Asr"},{number:104,name:"الهمزة",englishName:"Al-Humazah"},{number:105,name:"الفيل",englishName:"Al-Fil"},{number:106,name:"قريش",englishName:"Quraysh"},{number:107,name:"الماعون",englishName:"Al-Ma'un"},{number:108,name:"الكوثر",englishName:"Al-Kawthar"},{number:109,name:"الكافرون",englishName:"Al-Kafirun"},{number:110,name:"النصر",englishName:"An-Nasr"},{number:111,name:"المسد",englishName:"Al-Masad"},{number:112,name:"الإخلاص",englishName:"Al-Ikhlas"},{number:113,name:"الفلق",englishName:"Al-Falaq"},{number:114,name:"الناس",englishName:"An-Nas"}];function aH({user:a,onToggleSidebar:b,unreadChatCount:c=0,subscriptionData:f}){let m=(0,N.c)("header"),r=(0,N.c)("common"),{locale:s,isRTL:t}=(0,N.Y)(),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(new Date),[y,z]=(0,e.useState)(t?"الرياض، السعودية":"Riyadh, Saudi Arabia"),[A,B]=(0,e.useState)("Riyadh"),[C,F]=(0,e.useState)("Saudi Arabia"),[G,H]=(0,e.useState)(!1),[I,K]=(0,e.useState)(!1),[O,P]=(0,e.useState)(!1),[aH,aI]=(0,e.useState)(!1),[aJ,aK]=(0,e.useState)(""),[aL,aM]=(0,e.useState)(!1),[aN,aO]=(0,e.useState)(!1),[aP,aQ]=(0,e.useState)([]),[aR,aS]=(0,e.useState)(0),[aT,aU]=(0,e.useState)(null),[aV,aW]=(0,e.useState)(!1),[aX,aY]=(0,e.useState)(null),[aZ,a$]=(0,e.useState)(!1),[a_,a0]=(0,e.useState)(!1),[a1,a2]=(0,e.useState)(0),[a3,a4]=(0,e.useState)(null),[a5,a6]=(0,e.useState)(!1),[a7,a8]=(0,e.useState)(!1),[a9,ba]=(0,e.useState)(null),[bb,bc]=(0,e.useState)([]),[bd,be]=(0,e.useState)([]),[bf,bg]=(0,e.useState)(null),[bh,bi]=(0,e.useState)(null),[bj,bk]=(0,e.useState)(1),[bl,bm]=(0,e.useState)(1),[bn,bo]=(0,e.useState)(!1),[bp,bq]=(0,e.useState)(!1),[br,bs]=(0,e.useState)(!1),[bt,bu]=(0,e.useState)("INBOX"),[bv,bw]=(0,e.useState)(!1),[bx,by]=(0,e.useState)([]),[bz,bA]=(0,e.useState)(null),[bB,bC]=(0,e.useState)([]),[bD,bE]=(0,e.useState)(!1),[bF,bG]=(0,e.useState)(0),[bH,bI]=(0,e.useState)(!1),[bJ,bK]=(0,e.useState)(!1),bL=(0,e.useRef)(null),bM=(0,g.usePathname)(),bN=(0,g.useRouter)();(0,e.useCallback)(()=>{if(!aT)return;let a=[{name:t?"الفجر":"Fajr",time:aT.Fajr},{name:t?"الشروق":"Sunrise",time:aT.Sunrise},{name:t?"الظهر":"Dhuhr",time:aT.Dhuhr},{name:t?"العصر":"Asr",time:aT.Asr},{name:t?"المغرب":"Maghrib",time:aT.Maghrib},{name:t?"العشاء":"Isha",time:aT.Isha}],b=new Date,c=60*b.getHours()+b.getMinutes();for(let b of a){let[a,d]=b.time.split(":").map(Number),e=60*a+d;if(e>c){let a=e-c,d=Math.floor(a/60),f=a%60;aY({name:b.name,time:b.time,remaining:d>0?`${d}س ${f}د`:`${f}د`});return}}aY({name:a[0].name,time:a[0].time,remaining:t?"غداً":"Tomorrow"})},[aT,t]);let bO=a=>{let b=aG[a].number.toString().padStart(3,"0"),c=`https://server8.mp3quran.net/afs/${b}.mp3`;bL.current&&(bL.current.src=c,bL.current.play(),a0(!0),a2(a))},bP=async(b,c="INBOX")=>{if(a?.company_id){bE(!0),bu(c);try{let d=await fetch(`/api/email/fetch?accountId=${b}&company_id=${a.company_id}&folder=${c}&limit=30`),e=await d.json();e.emails?bC(e.emails):e.error&&(aE.oR.error(e.error),bC([]))}catch(a){console.error("Error fetching emails:",a),aE.oR.error(t?"خطأ في جلب الرسائل":"Error fetching emails"),bC([])}finally{bE(!1)}}},bQ=async b=>{if(b.preventDefault(),!a?.company_id)return;bK(!0);let c=new FormData(b.currentTarget),d={company_id:a.company_id,email:c.get("email"),password:c.get("password"),provider:c.get("provider"),imap_host:c.get("imap_host"),imap_port:parseInt(c.get("imap_port")||"993"),smtp_host:c.get("smtp_host"),smtp_port:parseInt(c.get("smtp_port")||"465")};try{let a=await fetch("/api/email/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),b=await a.json();b.success?(aE.oR.success(t?"تم إضافة الحساب بنجاح":"Account added successfully"),by([...bx,b.account]),bw(!1)):aE.oR.error(b.error||(t?"حدث خطأ":"An error occurred"))}catch(a){aE.oR.error(t?"خطأ في الاتصال":"Connection error")}finally{bK(!1)}},bR=async b=>{if(a?.company_id&&confirm(t?"هل أنت متأكد من حذف هذا الحساب؟":"Are you sure you want to delete this account?"))try{let c=await fetch(`/api/email/accounts?id=${b}&company_id=${a.company_id}`,{method:"DELETE"}),d=await c.json();d.success?(aE.oR.success(t?"تم حذف الحساب":"Account deleted"),by(bx.filter(a=>a.id!==b)),bz?.id===b&&(bA(bx.find(a=>a.id!==b)||null),bC([]))):aE.oR.error(d.error)}catch(a){aE.oR.error(t?"خطأ في الحذف":"Error deleting account")}},bS=async()=>{try{let a=await fetch("/api/subscriptions"),b=await a.json();b.success&&(bc(b.plans),be(b.bankAccounts),bg(b.currentSubscription))}catch(a){console.error("Error fetching subscription data:",a)}},bT=async a=>{if(a.preventDefault(),!a9)return;bo(!0);let b=new FormData(a.currentTarget);try{let a=await fetch("/api/subscriptions/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan_id:a9.plan.id,bank_account_id:b.get("bank_account_id"),receipt_image:bh,request_type:a9.type,notes:b.get("notes")})}),c=await a.json();c.success?(aE.oR.success(t?"تم إرسال طلب الدفع بنجاح":"Payment request sent successfully"),ba(null),bi(null),a8(!1),a6(!1)):aE.oR.error(c.error||(t?"حدث خطأ":"Error occurred"))}catch(a){aE.oR.error(t?"حدث خطأ في الاتصال":"Connection error")}bo(!1)},bU=()=>{bS(),a6(!0),aM(!1)},bV=()=>{bS(),a8(!0),a6(!1)},bW=t?Q.A:R.A;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("header",{className:"sticky top-0 z-[100] w-full no-print",children:(0,d.jsxs)("div",{className:"relative overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-transparent"}),(0,d.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"}),(0,d.jsx)("div",{className:"relative z-10 w-full mx-auto px-4 md:px-6 py-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(h.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:b,className:"lg:hidden p-2.5 bg-white/5 hover:bg-white/10 rounded-xl transition-all text-white/70 border border-white/10",children:(0,d.jsx)(S.A,{size:20})}),"/dashboard"!==bM&&(0,d.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02,x:t?3:-3},whileTap:{scale:.98},onClick:()=>bN.back(),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10 group",children:[(0,d.jsx)(bW,{size:16,className:(0,M.cn)("text-white/60 transition-transform",t?"group-hover:translate-x-1":"group-hover:-translate-x-1")}),(0,d.jsx)("span",{className:"text-[11px] font-bold text-white/60",children:r("back")})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>bN.push("/dashboard"),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10 group",children:[(0,d.jsx)(j.A,{size:16,className:"text-white/60 group-hover:scale-110 transition-transform"}),(0,d.jsx)("span",{className:"text-[11px] font-bold text-white/60",children:t?"الرئيسية":"Home"})]})]})]}),(0,d.jsx)("div",{className:"flex-1 max-w-xl hidden md:block",children:(0,d.jsxs)(h.P.div,{animate:{boxShadow:aH?"0 0 0 2px rgba(59, 130, 246, 0.3), 0 4px 20px rgba(0, 0, 0, 0.3)":"0 0 0 1px rgba(255, 255, 255, 0.05)"},className:(0,M.cn)("relative flex items-center gap-3 px-4 py-2.5 rounded-2xl transition-all duration-300","bg-white/5 border border-white/10",aH&&"bg-white/10 border-blue-500/30"),children:[(0,d.jsx)(n.A,{size:16,className:(0,M.cn)("transition-colors",aH?"text-blue-400":"text-white/30")}),(0,d.jsx)("input",{type:"text",placeholder:m("searchPlaceholder"),value:aJ,onChange:a=>aK(a.target.value),onFocus:()=>aI(!0),onBlur:()=>aI(!1),className:"flex-1 !bg-transparent border-none text-white/90 text-[12px] font-medium placeholder:text-white/30 outline-none"}),(0,d.jsxs)("div",{className:"hidden lg:flex items-center gap-1 px-2 py-1 bg-white/5 rounded-lg border border-white/10",children:[(0,d.jsx)(T.A,{size:10,className:"text-white/30"}),(0,d.jsx)("span",{className:"text-[9px] font-bold text-white/30",children:"K"})]})]})}),(0,d.jsx)("div",{className:"hidden xl:flex items-center gap-4 px-4 py-2 bg-white/5 rounded-2xl border border-white/10",children:u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-blue-500/30 to-indigo-500/30",children:(0,d.jsx)(U.A,{size:12,className:"text-blue-400"})}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"text-[10px] font-bold text-white/70",children:(a=>{if(t){let b=["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"][a.getDay()],c=a.getDate(),d=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"][a.getMonth()],e=a.getHours().toString().padStart(2,"0"),f=a.getMinutes().toString().padStart(2,"0"),g=a.getSeconds().toString().padStart(2,"0");return`${b}، ${c} ${d} - ${e}:${f}:${g}`}{let b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()],c=a.getDate(),d=["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()],e=a.getHours().toString().padStart(2,"0"),f=a.getMinutes().toString().padStart(2,"0"),g=a.getSeconds().toString().padStart(2,"0");return`${b}, ${d} ${c} - ${e}:${f}:${g}`}})(w)}),(0,d.jsx)("span",{className:"text-[9px] text-white/40",children:(()=>{try{let a=new Date;return new Intl.DateTimeFormat("ar-SA-u-ca-islamic-nu-latn-nu-latn",{day:"numeric",month:"long",year:"numeric"}).format(a)}catch{return""}})()})]})]}),(0,d.jsx)("div",{className:"w-px h-6 bg-white/10"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-rose-500/30 to-pink-500/30",children:(0,d.jsx)(V.A,{size:12,className:"text-rose-400"})}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-white/50 max-w-[120px] truncate",children:y})]})]})}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(aF,{}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>aO(!aN),className:"relative hidden sm:flex items-center gap-2 px-3 py-2.5 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10",children:[(0,d.jsx)(p.A,{size:18,className:"text-white/60"}),(0,d.jsx)("span",{className:"text-[11px] font-bold text-white/60",children:t?"الإشعارات":"Notifications"}),aR>0&&(0,d.jsx)(h.P.span,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"min-w-[18px] h-[18px] bg-gradient-to-r from-rose-500 to-red-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center shadow-lg shadow-rose-500/50",children:aR>9?"9+":aR})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>aW(!aV),className:"relative hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 hover:from-emerald-500/30 hover:to-teal-500/30 rounded-xl transition-all border border-emerald-500/20",children:[(0,d.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"text-emerald-400",children:(0,d.jsx)("path",{d:"M12 3C7.03 3 3 7.03 3 12s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 16c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7zm.5-11H11v5l4.28 2.54.72-1.21-3.5-2.08V8z",fill:"currentColor"})}),(0,d.jsx)("span",{className:"text-[11px] font-bold text-emerald-400",children:t?"أوقات الصلاة":"Prayer Times"}),aX&&(0,d.jsx)("span",{className:"min-w-[20px] h-[20px] bg-emerald-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center",children:aX.remaining.replace(/[سد]/g,"").trim().split(" ")[0]})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a$(!aZ),className:(0,M.cn)("relative hidden sm:flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all border",a_?"bg-gradient-to-br from-amber-500/30 to-orange-500/30 border-amber-500/30":"bg-gradient-to-br from-amber-500/20 to-orange-500/20 hover:from-amber-500/30 hover:to-orange-500/30 border-amber-500/20"),children:[(0,d.jsx)(D.A,{size:18,className:"text-amber-400"}),(0,d.jsx)("span",{className:"text-[11px] font-bold text-amber-400",children:t?"المصحف الشريف":"Holy Quran"}),a_&&(0,d.jsx)(h.P.span,{animate:{scale:[1,1.3,1]},transition:{duration:1,repeat:1/0},className:"w-3 h-3 bg-amber-500 rounded-full"})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>bq(!0),className:"relative hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-br from-blue-500/20 to-indigo-500/20 hover:from-blue-500/30 hover:to-indigo-500/30 rounded-xl transition-all border border-blue-500/20",children:[(0,d.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"text-blue-400",children:(0,d.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z",fill:"currentColor"})}),(0,d.jsx)("span",{className:"text-[11px] font-bold text-blue-400",children:t?"البريد":"Email"}),bF>0&&(0,d.jsx)(h.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1.5 -right-1.5 min-w-[18px] h-[18px] bg-red-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center shadow-lg border border-white/20",children:bF>9?"9+":bF})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>H(!0),className:"hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 rounded-xl transition-all shadow-lg shadow-amber-500/20 border border-amber-400/20",children:[(0,d.jsx)(J.A,{size:16,className:"text-white"}),(0,d.jsx)("span",{className:"text-[11px] font-bold text-white",children:m("driverApp")})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>bN.push("/chat"),className:"hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 rounded-xl transition-all shadow-lg shadow-emerald-500/20 border border-emerald-400/20 relative",children:[(0,d.jsx)(o.A,{size:16,className:"text-white"}),(0,d.jsx)("span",{className:"text-[11px] font-bold text-white",children:m("support")}),c>0&&(0,d.jsx)(h.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 min-w-[22px] h-[22px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center shadow-lg animate-pulse border-2 border-white",children:c>9?"9+":c})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>aM(!aL),className:"flex items-center gap-3 px-3 py-2 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:(0,d.jsx)(W.A,{size:16,className:"text-white"})}),(0,d.jsx)("span",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-emerald-500 rounded-full border-2 border-slate-950"})]}),(0,d.jsxs)("div",{className:"hidden md:block text-right",children:[(0,d.jsx)("p",{className:"text-[11px] font-bold text-white/90",children:a?.name||(t?"المستخدم":"User")}),(0,d.jsx)("p",{className:"text-[9px] text-white/40",children:a?.role==="admin"?t?"مدير النظام":"System Admin":t?"مدير منشأة":"Manager"})]}),(0,d.jsx)(X.A,{size:14,className:(0,M.cn)("text-white/40 transition-transform",aL&&"rotate-180")})]}),(0,d.jsx)("audio",{ref:bL,onEnded:()=>{let a=(a1+1)%aG.length;a2(a),bO(a)}})]})]})})]})}),(0,d.jsx)(i.N,{children:aV&&aT&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>aW(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-sm bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-emerald-500/20",children:[(0,d.jsx)("button",{onClick:()=>aW(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,d.jsx)(Y.A,{size:20})}),(0,d.jsx)("div",{className:"p-6 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 border-b border-emerald-500/20",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"p-3 rounded-2xl bg-emerald-500/30",children:(0,d.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",className:"text-emerald-400",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"currentColor"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-white text-xl",children:t?"أوقات الصلاة":"Prayer Times"}),(0,d.jsx)("p",{className:"text-sm text-emerald-400",children:y})]})]})}),(0,d.jsx)("div",{className:"p-4 space-y-3",children:[{name:t?"الفجر":"Fajr",time:aT.Fajr,icon:"\uD83C\uDF19"},{name:t?"الشروق":"Sunrise",time:aT.Sunrise,icon:"\uD83C\uDF05"},{name:t?"الظهر":"Dhuhr",time:aT.Dhuhr,icon:"☀️"},{name:t?"العصر":"Asr",time:aT.Asr,icon:"\uD83C\uDF24️"},{name:t?"المغرب":"Maghrib",time:aT.Maghrib,icon:"\uD83C\uDF07"},{name:t?"العشاء":"Isha",time:aT.Isha,icon:"\uD83C\uDF03"}].map((a,b)=>(0,d.jsxs)("div",{className:(0,M.cn)("flex items-center justify-between p-4 rounded-2xl transition-all",aX?.name===a.name?"bg-emerald-500/20 border-2 border-emerald-500/40 shadow-lg shadow-emerald-500/20":"bg-white/5 hover:bg-white/10 border border-white/10"),children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("span",{className:"text-2xl",children:a.icon}),(0,d.jsx)("span",{className:"text-sm font-bold text-white",children:a.name})]}),(0,d.jsx)("span",{className:(0,M.cn)("text-lg font-bold",aX?.name===a.name?"text-emerald-400":"text-white/60"),children:a.time})]},b))}),aX&&(0,d.jsx)("div",{className:"p-4 border-t border-white/10 bg-emerald-500/10",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-white/60",children:t?"الصلاة القادمة":"Next Prayer"}),(0,d.jsxs)("span",{className:"text-sm font-bold text-emerald-400",children:[aX.name," - ",t?`بعد ${aX.remaining}`:`in ${aX.remaining}`]})]})})]})]})}),(0,d.jsx)(i.N,{children:aZ&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a$(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-amber-500/20",children:[(0,d.jsx)("button",{onClick:()=>a$(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,d.jsx)(Y.A,{size:20})}),(0,d.jsx)("div",{className:"p-6 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border-b border-amber-500/20",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"p-3 rounded-2xl bg-amber-500/30",children:(0,d.jsx)(D.A,{size:28,className:"text-amber-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-white text-xl",children:t?"القرآن الكريم":"Holy Quran"}),(0,d.jsx)("p",{className:"text-sm text-amber-400",children:t?"مشاري العفاسي":"Mishary Alafasy"})]})]})}),(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("div",{className:"text-center mb-6",children:[(0,d.jsx)("p",{className:"text-2xl font-bold text-white mb-1",children:aG[a1].name}),(0,d.jsx)("p",{className:"text-sm text-white/50",children:aG[a1].englishName})]}),(0,d.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,d.jsx)(h.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{let a=0===a1?aG.length-1:a1-1;a2(a),bO(a)},className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl transition-all",children:(0,d.jsx)(Z.A,{size:24,className:"text-white/70"})}),(0,d.jsx)(h.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{bL.current&&(a_?(bL.current.pause(),a0(!1)):bL.current.src?(bL.current.play(),a0(!0)):bO(a1))},className:"p-5 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full shadow-xl shadow-amber-500/40",children:a_?(0,d.jsx)($.A,{size:32,className:"text-white"}):(0,d.jsx)(_.A,{size:32,className:"text-white"})}),(0,d.jsx)(h.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{let a=(a1+1)%aG.length;a2(a),bO(a)},className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl transition-all",children:(0,d.jsx)(aa.A,{size:24,className:"text-white/70"})})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-6 px-2",children:[(0,d.jsx)(h.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{bj>0?(bm(bj),bk(0)):bk(bl||.5)},className:"text-amber-400 p-1 hover:bg-white/5 rounded-lg transition-colors",children:0===bj?(0,d.jsx)(ab.A,{size:18}):bj<.5?(0,d.jsx)(ac.A,{size:18}):(0,d.jsx)(ad.A,{size:18})}),(0,d.jsxs)("div",{className:"flex-1 h-1.5 bg-white/10 rounded-full relative group cursor-pointer",children:[(0,d.jsx)(h.P.div,{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full shadow-[0_0_10px_rgba(245,158,11,0.5)]",style:{width:`${100*bj}%`}}),(0,d.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:bj,onChange:a=>bk(parseFloat(a.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),(0,d.jsx)(h.P.div,{className:"absolute top-1/2 -translate-y-1/2 w-3.5 h-3.5 bg-white rounded-full shadow-[0_0_8px_rgba(255,255,255,0.8)] border-2 border-amber-500",style:{left:`${100*bj}%`,x:"-50%"}})]}),(0,d.jsxs)("span",{className:"text-[10px] font-bold text-white/40 w-8",children:[Math.round(100*bj),"%"]})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{bL.current&&(bL.current.pause(),bL.current.currentTime=0,a0(!1),a2(0),localStorage.setItem("quran_last_surah","0"))},className:"w-full flex items-center justify-center gap-2 py-3 bg-red-500/10 hover:bg-red-500/20 rounded-2xl transition-all text-red-400 hover:text-red-300 border border-red-500/20",children:[(0,d.jsx)(ae.A,{size:18}),(0,d.jsx)("span",{className:"text-sm font-bold",children:t?"إيقاف والبدء من جديد":"Stop & Reset"})]})]}),(0,d.jsxs)("div",{className:"p-4 border-t border-white/10 max-h-60 overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsx)("p",{className:"text-xs text-white/40",children:t?"سور القرآن الكريم (114 سورة)":"Quran Surahs (114)"}),(0,d.jsxs)("p",{className:"text-xs text-amber-400",children:[a1+1,"/114"]})]}),(0,d.jsx)("div",{className:"grid grid-cols-3 gap-2",children:aG.map((a,b)=>(0,d.jsxs)("button",{onClick:()=>{a2(b),bO(b)},className:(0,M.cn)("text-right p-2 rounded-xl transition-all text-xs",a1===b?"bg-amber-500/20 text-amber-400 font-bold border border-amber-500/30":"bg-white/5 hover:bg-white/10 text-white/60 border border-white/5"),children:[(0,d.jsxs)("span",{className:"text-white/30 text-[10px]",children:[a.number,"."]})," ",a.name]},a.number))})]})]})]})}),(0,d.jsx)(i.N,{children:aN&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>aO(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-white/10",children:[(0,d.jsx)("button",{onClick:()=>aO(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,d.jsx)(Y.A,{size:20})}),(0,d.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"p-3 rounded-2xl bg-blue-500/30",children:(0,d.jsx)(p.A,{size:28,className:"text-blue-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-white text-xl",children:t?"تنبيهات النظام":"System Alerts"}),(0,d.jsx)("p",{className:"text-sm text-white/40",children:t?`لديك ${aR} تنبيهات جديدة`:`You have ${aR} new alerts`})]})]})}),(0,d.jsx)("div",{className:"max-h-80 overflow-y-auto",children:aP.length>0?aP.map(a=>(0,d.jsx)(h.P.div,{whileHover:{backgroundColor:"rgba(255,255,255,0.05)"},className:"p-4 border-b border-white/5 cursor-pointer",onClick:()=>{let b=parseInt(localStorage.getItem("last_admin_notification_id")||"0");a.id>b&&(localStorage.setItem("last_admin_notification_id",a.id.toString()),aS(a=>Math.max(0,a-1))),aO(!1)},children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("div",{className:"p-2 rounded-xl bg-blue-500/20",children:(0,d.jsx)(p.A,{size:16,className:"text-blue-400"})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-bold text-white/90",children:a.title}),(0,d.jsx)("p",{className:"text-xs text-white/40",children:new Date(a.created_at).toLocaleDateString("en-US")})]})]})},a.id)):(0,d.jsxs)("div",{className:"p-16 text-center",children:[(0,d.jsx)(p.A,{size:48,className:"mx-auto mb-3 text-white/20"}),(0,d.jsx)("p",{className:"text-sm font-bold text-white/30",children:t?"لا توجد تنبيهات":"No alerts"})]})}),(0,d.jsx)("div",{className:"p-4 border-t border-white/10",children:(0,d.jsx)("button",{onClick:()=>{a?.role==="admin"&&bN.push("/admin/notifications"),aO(!1)},className:"w-full py-3 text-center text-sm font-bold text-blue-400 hover:text-blue-300 transition-colors bg-blue-500/10 rounded-xl hover:bg-blue-500/20",children:t?"عرض جميع التنبيهات":"View All Alerts"})})]})]})}),(0,d.jsx)(i.N,{children:aL&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>aM(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-white/10 max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)("button",{onClick:()=>aM(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,d.jsx)(Y.A,{size:20})}),(0,d.jsx)("div",{className:"p-6 border-b border-white/10 bg-gradient-to-r from-blue-500/10 to-purple-500/10",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-xl",children:(0,d.jsx)(W.A,{size:32,className:"text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-bold text-white text-lg",children:a?.name}),(0,d.jsx)("p",{className:"text-sm text-white/40",children:a?.email}),(0,d.jsx)("p",{className:"text-xs text-white/30 mt-1",children:a?.role==="admin"?t?"مدير النظام":"System Admin":t?"مدير منشأة":"Facility Manager"})]})]})}),a?.role!=="admin"&&f&&(0,d.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,d.jsxs)("div",{className:(0,M.cn)("p-4 rounded-2xl",f.isActive&&f.daysRemaining>7?"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/20":f.isActive&&f.daysRemaining>0?"bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/20":"bg-gradient-to-r from-red-500/10 to-rose-500/10 border border-red-500/20"),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(q.A,{size:18,className:"text-amber-400"}),(0,d.jsx)("span",{className:"text-sm font-bold text-white",children:t?"باقتك الحالية":"Your Plan"})]}),(0,d.jsx)(af.A,{size:20,className:(0,M.cn)(f.isActive?"text-amber-400":"text-red-400")})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:(0,M.cn)("text-lg font-bold",f.isActive?"text-emerald-400":"text-red-400"),children:f.isActive?`${f.daysRemaining} ${t?"يوم متبقي":"days left"}`:t?"غير مشترك":"Not Subscribed"}),f.endDate&&(0,d.jsxs)("p",{className:"text-xs text-white/40 mt-1",children:[t?"تنتهي في: ":"Expires: ",new Date(f.endDate).toLocaleDateString("en-US")]})]}),(0,d.jsx)(h.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:bU,className:"p-2 bg-white/10 hover:bg-white/20 rounded-xl transition-all",children:(0,d.jsx)(ag.A,{size:16,className:"text-white/60"})})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:bV,className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 rounded-xl text-purple-400 text-sm font-bold border border-purple-500/20 transition-all",children:[(0,d.jsx)(L.A,{size:16}),t?"ترقية الباقة":"Upgrade"]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:bU,className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 hover:from-emerald-500/30 hover:to-teal-500/30 rounded-xl text-emerald-400 text-sm font-bold border border-emerald-500/20 transition-all",children:[(0,d.jsx)(ah.A,{size:16}),t?"تجديد":"Renew"]})]})]}),(0,d.jsxs)("div",{className:"p-3 space-y-1",children:[(0,d.jsxs)(h.P.button,{whileHover:{backgroundColor:"rgba(255,255,255,0.05)"},onClick:()=>{bN.push("/user_profile"),aM(!1)},className:"w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-white/70 hover:text-white transition-colors",children:[(0,d.jsx)("div",{className:"p-2 rounded-xl bg-blue-500/20",children:(0,d.jsx)(k.A,{size:18,className:"text-blue-400"})}),(0,d.jsx)("span",{className:"text-sm font-bold",children:m("userProfile")})]}),a?.role!=="admin"&&(0,d.jsxs)(h.P.button,{whileHover:{backgroundColor:"rgba(255,255,255,0.05)"},onClick:()=>{bN.push("/subscriptions"),aM(!1)},className:"w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-white/70 hover:text-white transition-colors",children:[(0,d.jsx)("div",{className:"p-2 rounded-xl bg-amber-500/20",children:(0,d.jsx)(q.A,{size:18,className:"text-amber-400"})}),(0,d.jsx)("span",{className:"text-sm font-bold",children:m("mySubscription")})]}),(0,d.jsxs)(h.P.button,{whileHover:{backgroundColor:"rgba(255,255,255,0.05)"},onClick:()=>{bN.push("/settings"),aM(!1)},className:"w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-white/70 hover:text-white transition-colors",children:[(0,d.jsx)("div",{className:"p-2 rounded-xl bg-slate-500/20",children:(0,d.jsx)(ai.A,{size:18,className:"text-slate-400"})}),(0,d.jsx)("span",{className:"text-sm font-bold",children:t?"إعدادات النظام":"System Settings"})]})]}),(0,d.jsx)("div",{className:"p-3 border-t border-white/10",children:(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02,backgroundColor:"rgba(239, 68, 68, 0.1)"},whileTap:{scale:.98},onClick:()=>{document.cookie="auth_session=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",bN.push("/login")},className:"w-full flex items-center justify-center gap-3 px-4 py-4 rounded-xl bg-red-500/10 text-rose-400 hover:text-rose-300 transition-all border border-red-500/20",children:[(0,d.jsx)(aj.A,{size:20}),(0,d.jsx)("span",{className:"text-sm font-bold",children:t?"تسجيل الخروج":"Logout"})]})})]})]})}),(0,d.jsx)(i.N,{children:a5&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a6(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-lg bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-amber-500/20 max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)("button",{onClick:()=>a6(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,d.jsx)(Y.A,{size:20})}),(0,d.jsx)("div",{className:"p-6 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border-b border-amber-500/20",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-amber-500/30 to-orange-500/30",children:(0,d.jsx)(af.A,{size:32,className:"text-amber-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-white text-xl",children:t?"تفاصيل الاشتراك":"Subscription Details"}),(0,d.jsx)("p",{className:"text-sm text-amber-400",children:t?"إدارة باقتك وتجديدها":"Manage and renew your plan"})]})]})}),(0,d.jsxs)("div",{className:"p-6 space-y-4",children:[f&&(0,d.jsxs)("div",{className:(0,M.cn)("p-5 rounded-2xl",f.isActive?"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/20":"bg-gradient-to-r from-red-500/10 to-rose-500/10 border border-red-500/20"),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:(0,M.cn)("p-3 rounded-xl",f.isActive?"bg-emerald-500/20":"bg-red-500/20"),children:(0,d.jsx)(ak.A,{size:24,className:f.isActive?"text-emerald-400":"text-red-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-bold text-white",children:t?"حالة الاشتراك":"Status"}),(0,d.jsx)("p",{className:(0,M.cn)("text-sm font-bold",f.isActive?"text-emerald-400":"text-red-400"),children:f.isActive?t?"نشط":"Active":t?"غير نشط":"Inactive"})]})]}),f.isActive&&(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsx)("p",{className:"text-3xl font-black text-white",children:f.daysRemaining}),(0,d.jsx)("p",{className:"text-xs text-white/40",children:t?"يوم متبقي":"days left"})]})]}),bf&&(0,d.jsxs)("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-white/50",children:t?"اسم الباقة":"Plan Name"}),(0,d.jsx)("span",{className:"text-sm font-bold text-white",children:bf.plan_name})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-white/50",children:t?"السعر":"Price"}),(0,d.jsxs)("span",{className:"text-sm font-bold text-amber-400",children:[bf.plan_price," ",t?"ر.س":"SAR"]})]}),f.endDate&&(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-white/50",children:t?"تاريخ الانتهاء":"End Date"}),(0,d.jsx)("span",{className:"text-sm font-bold text-white",children:new Date(f.endDate).toLocaleDateString("en-US")})]})]})]}),bf?.features&&(0,d.jsxs)("div",{className:"p-5 rounded-2xl bg-white/5 border border-white/10",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,d.jsx)(al.A,{size:20,className:"text-amber-400"}),(0,d.jsx)("p",{className:"font-bold text-white",children:t?"مميزات الباقة":"Plan Features"})]}),(0,d.jsx)("div",{className:"space-y-2",children:(bf.features||"").split(",").map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(am.A,{size:16,className:"text-emerald-400"}),(0,d.jsx)("span",{className:"text-sm text-white/70",children:a.trim()})]},b))})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{bf&&ba({plan:{id:bf.plan_id,name:bf.plan_name,price:bf.plan_price,duration_value:bf.duration_value||30,duration_unit:bf.duration_unit||"day"},type:"renewal"})},className:"flex items-center justify-center gap-2 py-4 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 rounded-xl text-white text-sm font-bold shadow-lg shadow-emerald-500/30 transition-all",children:[(0,d.jsx)(ah.A,{size:18}),t?"تجديد الباقة":"Renew Plan"]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:bV,className:"flex items-center justify-center gap-2 py-4 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 rounded-xl text-white text-sm font-bold shadow-lg shadow-purple-500/30 transition-all",children:[(0,d.jsx)(L.A,{size:18}),t?"ترقية الباقة":"Upgrade Plan"]})]})]})]})]})}),(0,d.jsx)(i.N,{children:a7&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a8(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-2xl bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-purple-500/20 max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)("button",{onClick:()=>a8(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,d.jsx)(Y.A,{size:20})}),(0,d.jsx)("div",{className:"p-6 bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-b border-purple-500/20",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-purple-500/30 to-pink-500/30",children:(0,d.jsx)(L.A,{size:32,className:"text-purple-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-white text-xl",children:t?"ترقية الباقة":"Upgrade Plan"}),(0,d.jsx)("p",{className:"text-sm text-purple-400",children:t?"اختر الباقة المناسبة لاحتياجاتك":"Choose the plan that fits your needs"})]})]})}),(0,d.jsx)("div",{className:"p-6",children:(0,d.jsx)("div",{className:"grid gap-4",children:bb.map((a,b)=>(0,d.jsxs)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*b},className:(0,M.cn)("p-5 rounded-2xl border transition-all cursor-pointer",1===b?"bg-gradient-to-r from-amber-500/10 to-orange-500/10 border-amber-500/30 ring-2 ring-amber-500/20":"bg-white/5 border-white/10 hover:border-white/20"),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:(0,M.cn)("p-3 rounded-xl",1===b?"bg-amber-500/20":"bg-white/10"),children:(0,d.jsx)(q.A,{size:24,className:1===b?"text-amber-400":"text-white/60"})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("p",{className:"font-bold text-white text-lg",children:a.name}),1===b&&(0,d.jsx)("span",{className:"px-2 py-0.5 bg-amber-500 text-white text-[10px] font-bold rounded-full",children:t?"الأكثر طلباً":"Popular"})]}),(0,d.jsxs)("p",{className:"text-sm text-white/40",children:[a.duration_value," ","day"===a.duration_unit?t?"يوم":"days":"month"===a.duration_unit?t?"شهر":"months":t?"سنة":"years"]})]})]}),(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsx)("p",{className:"text-2xl font-black text-white",children:a.price}),(0,d.jsx)("p",{className:"text-xs text-white/40",children:t?"ر.س":"SAR"})]})]}),a.description&&(0,d.jsx)("p",{className:"text-sm text-white/50 mb-4",children:a.description}),(0,d.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>ba({plan:a,type:"upgrade"}),className:(0,M.cn)("w-full py-3 rounded-xl font-bold text-sm transition-all",1===b?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg shadow-amber-500/30":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"),children:t?"اختيار هذه الباقة":"Choose This Plan"})]},a.id))})})]})]})}),(0,d.jsx)(i.N,{children:a9&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{ba(null),bi(null)},className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-lg bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-emerald-500/20 max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)("button",{onClick:()=>{ba(null),bi(null)},className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,d.jsx)(Y.A,{size:20})}),(0,d.jsx)("div",{className:"p-6 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 border-b border-emerald-500/20",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-emerald-500/30 to-teal-500/30",children:(0,d.jsx)(E.A,{size:32,className:"text-emerald-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-white text-xl",children:t?"إتمام الدفع":"Complete Payment"}),(0,d.jsx)("p",{className:"text-sm text-emerald-400",children:"renewal"===a9.type?t?"تجديد الباقة":"Plan Renewal":"upgrade"===a9.type?t?"ترقية الباقة":"Plan Upgrade":t?"اشتراك جديد":"New Subscription"})]})]})}),(0,d.jsxs)("form",{onSubmit:bT,className:"p-6 space-y-5",children:[(0,d.jsx)("div",{className:"p-4 rounded-2xl bg-amber-500/10 border border-amber-500/20",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(q.A,{size:20,className:"text-amber-400"}),(0,d.jsx)("span",{className:"font-bold text-white",children:a9.plan.name})]}),(0,d.jsxs)("span",{className:"text-lg font-black text-amber-400",children:[a9.plan.price," ",t?"ر.س":"SAR"]})]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-bold text-white/70 mb-3",children:t?"اختر الحساب البنكي للتحويل":"Select Bank Account"}),(0,d.jsx)("div",{className:"space-y-2",children:bd.map(a=>(0,d.jsxs)("label",{className:"flex items-center gap-4 p-4 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 cursor-pointer transition-all",children:[(0,d.jsx)("input",{type:"radio",name:"bank_account_id",value:a.id,required:!0,className:"w-4 h-4 accent-emerald-500"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"font-bold text-white text-sm",children:a.bank_name}),(0,d.jsx)("p",{className:"text-xs text-white/40",children:a.account_holder}),(0,d.jsx)("p",{className:"text-xs text-emerald-400 font-mono mt-1",children:a.iban})]})]},a.id))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-bold text-white/70 mb-3",children:t?"إرفاق إيصال الدفع":"Upload Receipt"}),(0,d.jsxs)("div",{className:(0,M.cn)("relative p-6 rounded-2xl border-2 border-dashed transition-all text-center",bh?"border-emerald-500/50 bg-emerald-500/10":"border-white/20 bg-white/5 hover:border-white/30"),children:[(0,d.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){let a=new FileReader;a.onloadend=()=>{bi(a.result)},a.readAsDataURL(b)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",required:!0}),bh?(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("img",{src:bh,alt:"Receipt",className:"max-h-32 mx-auto rounded-lg"}),(0,d.jsx)("p",{className:"text-sm text-emerald-400 font-bold",children:t?"تم رفع الإيصال بنجاح":"Receipt uploaded"})]}):(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(an.A,{size:32,className:"mx-auto text-white/30"}),(0,d.jsx)("p",{className:"text-sm text-white/50",children:t?"اضغط لرفع صورة الإيصال":"Click to upload receipt"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-bold text-white/70 mb-2",children:t?"ملاحظات (اختياري)":"Notes (Optional)"}),(0,d.jsx)("textarea",{name:"notes",rows:2,className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 text-white text-sm placeholder:text-white/30 focus:border-emerald-500/50 focus:ring-0 outline-none resize-none",placeholder:t?"أي ملاحظات إضافية...":"Any additional notes..."})]}),(0,d.jsx)("div",{className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)(ao.A,{size:18,className:"text-blue-400 mt-0.5"}),(0,d.jsx)("p",{className:"text-xs text-blue-400/80",children:t?"سيتم مراجعة طلبك وتفعيل الاشتراك خلال 24 ساعة من التحقق من الدفع":"Your request will be reviewed and activated within 24 hours of payment verification"})]})}),(0,d.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:bn,className:"w-full py-4 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 rounded-xl text-white font-bold shadow-lg shadow-emerald-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:bn?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ah.A,{size:20,className:"animate-spin"}),t?"جاري الإرسال...":"Submitting..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(am.A,{size:20}),t?"إرسال طلب الدفع":"Submit Payment Request"]})})]})]})]})}),(0,d.jsx)(i.N,{children:bp&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>bq(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0,width:br?"98vw":"100%",height:br?"95vh":"80vh",maxWidth:br?"none":"1024px"},exit:{scale:.9,opacity:0,y:20},className:"relative bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-blue-500/20 flex flex-col transition-all duration-300",children:[(0,d.jsxs)("div",{className:"p-4 md:p-6 bg-gradient-to-r from-blue-500/10 to-indigo-500/10 border-b border-white/10 flex items-center justify-between shrink-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"p-3 rounded-2xl bg-blue-500/20",children:(0,d.jsx)(ap.A,{size:24,className:"text-blue-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-white text-lg md:text-xl",children:bv?t?"إعدادات البريد":"Email Settings":t?"بريد الشركة":"Company Email"}),(0,d.jsx)("p",{className:"text-sm text-blue-400 truncate max-w-[200px]",children:bv?t?"إدارة الحسابات":"Manage Accounts":bz?.email||(t?"اختر حساباً":"Select an account")})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(h.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>bw(!bv),className:(0,M.cn)("p-2.5 rounded-xl transition-all border",bv?"bg-blue-500 text-white border-blue-400":"bg-white/5 text-white/40 hover:text-white border-white/10"),title:t?"الإعدادات":"Settings",children:(0,d.jsx)(ai.A,{size:20})}),(0,d.jsx)(h.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>bs(!br),className:"p-2.5 bg-white/5 text-white/40 hover:text-white rounded-xl transition-all border border-white/10",children:br?(0,d.jsx)(aq.A,{size:20}):(0,d.jsx)(ar.A,{size:20})}),!bv&&(0,d.jsx)(h.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>bz&&bP(bz.id,bt),className:"p-2.5 bg-white/5 text-white/40 hover:text-white rounded-xl transition-all border border-white/10",children:(0,d.jsx)(ah.A,{size:20,className:bD?"animate-spin":""})}),(0,d.jsx)("button",{onClick:()=>bq(!1),className:"p-2.5 bg-white/5 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all border border-white/10",children:(0,d.jsx)(Y.A,{size:20})})]})]}),(0,d.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,d.jsxs)("div",{className:"w-20 md:w-64 border-l border-white/5 bg-black/20 flex flex-col shrink-0",children:[(0,d.jsxs)("div",{className:"p-4 border-b border-white/5",children:[(0,d.jsx)("p",{className:"hidden md:block text-[10px] font-bold text-white/30 uppercase tracking-widest mb-3 px-2",children:t?"الحسابات":"Accounts"}),(0,d.jsxs)("div",{className:"space-y-2",children:[bx.map(a=>(0,d.jsxs)("button",{onClick:()=>{bA(a),bP(a.id,"INBOX")},className:(0,M.cn)("w-full flex items-center gap-3 p-2 md:p-3 rounded-xl transition-all",bz?.id===a.id?"bg-blue-500/20 border border-blue-500/30 text-white":"hover:bg-white/5 text-white/40 border border-transparent"),children:[(0,d.jsx)("div",{className:(0,M.cn)("w-8 h-8 rounded-lg flex items-center justify-center shrink-0",bz?.id===a.id?"bg-blue-500 text-white":"bg-white/10"),children:(0,d.jsx)(as.A,{size:14})}),(0,d.jsxs)("div",{className:"hidden md:block flex-1 min-w-0 text-right",children:[(0,d.jsx)("p",{className:"text-xs font-bold truncate",children:a.email}),(0,d.jsx)("p",{className:"text-[10px] opacity-40 uppercase",children:a.provider})]})]},a.id)),0===bx.length&&(0,d.jsxs)("button",{onClick:()=>bw(!0),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-blue-500/10 text-blue-400 border border-blue-500/20 hover:bg-blue-500/20 transition-all",children:[(0,d.jsx)(at.A,{size:16,className:"mx-auto md:mx-0"}),(0,d.jsx)("span",{className:"hidden md:block text-xs font-bold",children:t?"أضف حساب":"Add Account"})]})]})]}),!bv&&bz&&(0,d.jsxs)("div",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[(0,d.jsx)("p",{className:"hidden md:block text-[10px] font-bold text-white/30 uppercase tracking-widest mb-3 px-2",children:t?"المجلدات":"Folders"}),[{id:"INBOX",name:t?"صندوق الوارد":"Inbox",icon:au.A,color:"text-blue-400"},{id:"Sent",name:t?"المرسل":"Sent",icon:av.A,color:"text-emerald-400"},{id:"Trash",name:t?"المحذوفات":"Trash",icon:aw.A,color:"text-rose-400"},{id:"Spam",name:t?"الرسائل المزعجة":"Spam",icon:ax.A,color:"text-amber-400"}].map(a=>(0,d.jsxs)("button",{onClick:()=>bP(bz.id,a.id),className:(0,M.cn)("w-full flex items-center gap-3 p-3 rounded-xl transition-all",bt===a.id?"bg-white/10 text-white shadow-sm":"text-white/40 hover:text-white/70 hover:bg-white/5"),children:[(0,d.jsx)(a.icon,{size:18,className:(0,M.cn)(bt===a.id?a.color:"text-inherit")}),(0,d.jsx)("span",{className:"hidden md:block text-sm font-medium",children:a.name})]},a.id))]})]}),(0,d.jsx)("div",{className:"flex-1 flex flex-col min-w-0 bg-white/[0.02]",children:bv?(0,d.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,d.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,d.jsxs)("section",{children:[(0,d.jsxs)("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,d.jsx)(ai.A,{size:20,className:"text-blue-400"}),t?"إدارة الحسابات":"Account Management"]}),(0,d.jsx)("div",{className:"grid gap-3",children:bx.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 border border-white/10 rounded-2xl group",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center",children:(0,d.jsx)(ap.A,{size:20,className:"text-blue-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-bold text-white text-sm",children:a.email}),(0,d.jsxs)("p",{className:"text-xs text-white/40",children:[a.provider," • IMAP: ",a.is_active?t?"متصل":"Connected":t?"فشل الاتصال":"Connection Failed"]})]})]}),(0,d.jsx)("button",{onClick:()=>bR(a.id),className:"p-2 text-white/20 hover:text-rose-400 hover:bg-rose-500/10 rounded-xl transition-all",children:(0,d.jsx)(aw.A,{size:18})})]},a.id))})]}),(0,d.jsxs)("section",{className:"p-6 bg-white/5 border border-white/10 rounded-3xl",children:[(0,d.jsxs)("h4",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[(0,d.jsx)(l.A,{size:20,className:"text-emerald-400"}),t?"إضافة حساب جديد":"Add New Account"]}),(0,d.jsxs)("form",{onSubmit:bQ,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-white/50 px-1",children:t?"البريد الإلكتروني":"Email Address"}),(0,d.jsx)("input",{name:"email",type:"email",required:!0,placeholder:"user@example.com",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-blue-500/50 outline-none transition-all"})]}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-white/50 px-1",children:t?"كلمة المرور":"Password"}),(0,d.jsx)("input",{name:"password",type:"password",required:!0,placeholder:"••••••••",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-blue-500/50 outline-none transition-all"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-white/50 px-1",children:t?"مزود الخدمة":"Provider"}),(0,d.jsxs)("select",{name:"provider",defaultValue:"hostinger",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-blue-500/50 outline-none transition-all",children:[(0,d.jsx)("option",{value:"hostinger",children:"Hostinger"}),(0,d.jsx)("option",{value:"gmail",children:"Gmail"}),(0,d.jsx)("option",{value:"outlook",children:"Outlook"}),(0,d.jsx)("option",{value:"custom",children:"Custom IMAP/SMTP"})]})]}),(0,d.jsx)("div",{className:"flex items-end",children:(0,d.jsxs)("button",{type:"submit",disabled:bJ,className:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-blue-600/20 flex items-center justify-center gap-2",children:[bJ?(0,d.jsx)(ah.A,{size:18,className:"animate-spin"}):(0,d.jsx)(at.A,{size:18}),t?"حفظ الحساب":"Save Account"]})})]})]})]})]})}):(0,d.jsx)("div",{className:"flex-1 flex flex-col min-w-0",children:bD?(0,d.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[(0,d.jsx)(ay.A,{size:40,className:"text-blue-500 animate-spin"}),(0,d.jsx)("p",{className:"text-sm text-white/40",children:t?"جاري جلب الرسائل...":"Fetching emails..."})]}):bB.length>0?(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4 px-2",children:[(0,d.jsx)("h4",{className:"text-sm font-bold text-white/60",children:"INBOX"===bt?t?"صندوق الوارد":"Inbox":"Sent"===bt?t?"المرسل":"Sent":"Trash"===bt?t?"المحذوفات":"Trash":t?"الرسائل المزعجة":"Spam"}),(0,d.jsxs)("span",{className:"text-[10px] bg-blue-500/20 text-blue-400 px-2 py-1 rounded-lg font-bold",children:[bB.length," ",t?"رسالة":"messages"]})]}),bB.map(a=>(0,d.jsxs)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,M.cn)("group relative p-4 rounded-2xl border transition-all cursor-pointer",a.isRead?"bg-transparent border-white/5 hover:bg-white/5":"bg-white/5 border-blue-500/30 shadow-lg shadow-blue-500/5"),children:[(0,d.jsxs)("div",{className:"flex justify-between items-start gap-4 mb-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[!a.isRead&&(0,d.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,d.jsx)("span",{className:"font-bold text-sm text-white/90 truncate",children:a.from})]}),(0,d.jsx)("span",{className:"text-[10px] text-white/30 whitespace-nowrap",children:new Date(a.date).toLocaleDateString("en-US")})]}),(0,d.jsx)("h4",{className:"text-xs font-bold text-blue-400 mb-1 truncate",children:a.subject}),(0,d.jsx)("p",{className:"text-[11px] text-white/40 line-clamp-2 leading-relaxed",children:a.snippet}),(0,d.jsx)("div",{className:"absolute left-4 bottom-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,d.jsx)("button",{className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg text-white/60",children:(0,d.jsx)(az.A,{size:14})})})]},a.uid))]}):(0,d.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-12 text-center",children:[(0,d.jsx)("div",{className:"w-20 h-20 rounded-full bg-white/5 flex items-center justify-center mb-6",children:(0,d.jsx)(ap.A,{size:40,className:"text-white/10"})}),(0,d.jsx)("h4",{className:"text-lg font-bold text-white mb-2",children:t?"لا توجد رسائل":"No messages"}),(0,d.jsx)("p",{className:"text-sm text-white/30 max-w-xs",children:t?"هذا المجلد فارغ حالياً أو لم يتم جلب الرسائل بعد.":"This folder is currently empty or messages haven't been fetched yet."}),!bz&&(0,d.jsx)("button",{onClick:()=>bw(!0),className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-xl text-sm font-bold hover:bg-blue-500 transition-all",children:t?"أضف حساب بريد الآن":"Add Email Account Now"})]})})})]})]})]})}),(0,d.jsx)(i.N,{children:G&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>H(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl p-8 shadow-2xl overflow-hidden border border-white/10",children:[(0,d.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-amber-500/10 to-transparent rounded-full blur-3xl"}),(0,d.jsx)("button",{onClick:()=>H(!1),className:"absolute top-6 left-6 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:(0,d.jsx)(Y.A,{size:20})}),(0,d.jsxs)("div",{className:"relative z-10 flex flex-col items-center text-center gap-4 mb-8",children:[(0,d.jsxs)(h.P.div,{animate:{rotate:[0,-5,5,0]},transition:{duration:4,repeat:1/0},className:"relative",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl blur-xl opacity-40"}),(0,d.jsx)("div",{className:"relative w-16 h-16 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center shadow-2xl border border-amber-400/30",children:(0,d.jsx)(J.A,{size:32,className:"text-white"})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-2xl font-black text-white mb-1",children:m("driverApp")}),(0,d.jsx)("p",{className:"text-white/40 text-sm",children:t?"نظام إدخال البيانات للسائقين الميدانيين":"Data entry system for field drivers"})]})]}),(0,d.jsxs)("div",{className:"relative z-10 grid grid-cols-1 gap-3 mb-6",children:[(0,d.jsxs)("a",{href:"https://accounts.zoolspeed.com/driver/",target:"_blank",className:"flex items-center justify-between p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group border border-white/10 hover:border-white/20",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-xl",children:(0,d.jsx)(aA.A,{size:18,className:"text-blue-400"})}),(0,d.jsx)("span",{className:"font-bold text-sm text-white/90",children:t?"فتح رابط التطبيق":"Open App Link"})]}),(0,d.jsx)(Q.A,{size:18,className:"text-white/30 group-hover:-translate-x-1 transition-transform"})]}),(0,d.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("https://accounts.zoolspeed.com/driver/"),P(!0),setTimeout(()=>P(!1),2e3)},className:"flex items-center justify-between p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group text-right w-full border border-white/10 hover:border-white/20",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:(0,M.cn)("p-2 rounded-xl",O?"bg-emerald-500/20":"bg-amber-500/20"),children:O?(0,d.jsx)(aB.A,{size:18,className:"text-emerald-400"}):(0,d.jsx)(aC.A,{size:18,className:"text-amber-400"})}),(0,d.jsx)("span",{className:"font-bold text-sm text-white/90",children:O?t?"تم النسخ بنجاح":"Copied!":t?"نسخ رابط التطبيق":"Copy App Link"})]})}),(0,d.jsx)("button",{onClick:()=>K(!I),className:"flex items-center justify-between p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group text-right w-full border border-white/10 hover:border-white/20",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"p-2 bg-purple-500/20 rounded-xl",children:(0,d.jsx)(aD.A,{size:18,className:"text-purple-400"})}),(0,d.jsx)("span",{className:"font-bold text-sm text-white/90",children:t?"عرض رمز QR":"Show QR Code"})]})})]}),(0,d.jsx)(i.N,{children:I&&(0,d.jsxs)(h.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"relative z-10 flex flex-col items-center gap-4 p-6 bg-white rounded-2xl mb-6 overflow-hidden",children:[(0,d.jsx)("div",{className:"bg-slate-100 p-4 rounded-2xl",children:(0,d.jsx)("img",{src:"https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://accounts.zoolspeed.com/driver/",alt:"QR Code",className:"w-32 h-32"})}),(0,d.jsx)("p",{className:"text-slate-600 text-xs font-bold",children:t?"امسح الكود لفتح التطبيق فوراً":"Scan to open app instantly"})]})}),(0,d.jsxs)("div",{className:"relative z-10 p-4 bg-white/5 rounded-2xl border border-white/10",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-blue-400",children:[(0,d.jsx)(ag.A,{size:14}),(0,d.jsx)("h6",{className:"text-xs font-bold",children:t?"معلومات عن التطبيق":"About the App"})]}),(0,d.jsx)("p",{className:"text-[11px] text-white/40 leading-relaxed",children:t?"هذا التطبيق مخصص للسائقين لتسجيل عمليات الشحن والتسليم بشكل فوري، ويتيح للمديرين متابعة سير العمليات من لوحة التحكم.":"This app is designed for drivers to instantly record shipping and delivery operations, allowing managers to track operations from the dashboard."})]})]})]})})]})}var aI=c(2616),aJ=c(58620),aK=c(81296),aL=c(11082),aM=c(18004),aN=c(71213),aO=c(80196);function aP(){let[a,b]=(0,e.useState)(null),[c,f]=(0,e.useState)(!0),[g,i]=(0,e.useState)({cpu:23,memory:45,latency:42}),{isRTL:j}=(0,N.Y)(),k=(0,N.c)("footer"),l=(a,c)=>{navigator.clipboard.writeText(a.replace(/\s/g,"")),b(c),setTimeout(()=>b(null),2e3)};return(0,d.jsxs)("footer",{className:"w-full no-print mt-auto relative overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-transparent"}),(0,d.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"}),(0,d.jsx)("div",{className:"relative z-10 max-w-[1800px] mx-auto px-4 md:px-6 py-3",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,d.jsx)("div",{className:"flex items-center gap-4",children:(0,d.jsxs)("div",{className:"hidden sm:flex items-center gap-1.5 text-white/30 text-[10px] font-bold",children:[(0,d.jsx)(aI.A,{size:10}),(0,d.jsxs)("span",{children:["2026 ",k("copyright")]})]})}),(0,d.jsxs)("div",{className:"hidden lg:flex items-center gap-3",children:[(0,d.jsx)(h.P.div,{whileHover:{scale:1.02},className:(0,M.cn)("flex items-center gap-2 px-3 py-1.5 rounded-xl border",c?"bg-emerald-500/10 border-emerald-500/20":"bg-rose-500/10 border-rose-500/20"),children:c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:(0,d.jsx)(aJ.A,{size:12,className:"text-emerald-400"})}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-emerald-400",children:k("online")})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aK.A,{size:12,className:"text-rose-400"}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-rose-400",children:k("offline")})]})}),(0,d.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-xl border border-white/10",children:[(0,d.jsx)(aL.A,{size:12,className:"text-blue-400"}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-white/50",children:"CPU"}),(0,d.jsxs)("span",{className:"text-[10px] font-bold text-blue-400",children:[g.cpu,"%"]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-xl border border-white/10",children:[(0,d.jsx)(aM.A,{size:12,className:"text-purple-400"}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-white/50",children:j?"الذاكرة":"Memory"}),(0,d.jsxs)("span",{className:"text-[10px] font-bold text-purple-400",children:[g.memory,"%"]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-xl border border-white/10",children:[(0,d.jsx)(L.A,{size:12,className:"text-amber-400"}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-white/50",children:"Latency"}),(0,d.jsxs)("span",{className:"text-[10px] font-bold text-amber-400",children:[g.latency,"ms"]})]})]}),(0,d.jsxs)("div",{className:"flex items-center flex-wrap justify-center gap-3",children:[(0,d.jsxs)(h.P.a,{whileHover:{scale:1.05,y:-2},href:"mailto:info@zoolspeed.com",className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-blue-500/30 transition-all group",children:[(0,d.jsx)("div",{className:"p-1 rounded-md bg-blue-500/20",children:(0,d.jsx)(ap.A,{size:10,className:"text-blue-400"})}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-white/50 group-hover:text-white/80 transition-colors",children:"info@zoolspeed.com"})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.05,y:-2},onClick:()=>l("+966534907721","ksa"),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-emerald-500/30 transition-all group",children:[(0,d.jsx)("div",{className:"p-1 rounded-md bg-emerald-500/20",children:(0,d.jsx)(aN.A,{size:10,className:"text-emerald-400"})}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-white/50 group-hover:text-white/80 transition-colors",dir:"ltr",children:"+966 53 490 7721"}),"ksa"===a?(0,d.jsx)(aB.A,{size:10,className:"text-emerald-500"}):(0,d.jsx)(aC.A,{size:10,className:"opacity-0 group-hover:opacity-100 text-white/30 transition-opacity"})]}),(0,d.jsxs)(h.P.button,{whileHover:{scale:1.05,y:-2},onClick:()=>l("+249921163000","sdn"),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-amber-500/30 transition-all group",children:[(0,d.jsx)("div",{className:"p-1 rounded-md bg-amber-500/20",children:(0,d.jsx)(aO.A,{size:10,className:"text-amber-400"})}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-white/50 group-hover:text-white/80 transition-colors",dir:"ltr",children:"+249 92 116 3000"}),"sdn"===a?(0,d.jsx)(aB.A,{size:10,className:"text-emerald-500"}):(0,d.jsx)(aC.A,{size:10,className:"opacity-0 group-hover:opacity-100 text-white/30 transition-opacity"})]}),(0,d.jsxs)(h.P.div,{whileHover:{scale:1.05},className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-emerald-500/10 to-teal-500/10 rounded-xl border border-emerald-500/20",children:[(0,d.jsx)(ak.A,{size:10,className:"text-emerald-400"}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-emerald-400",children:"SSL Secured"})]})]})]})})]})}var aQ=c(31583);function aR({isAdmin:a,companyId:b}){let[c,f]=(0,e.useState)([]),[j,k]=(0,e.useState)(0),[l,m]=(0,e.useState)(!1),[n,q]=(0,e.useState)(null),r=(0,e.useRef)(-1),s=(0,e.useRef)(!1),t=(0,g.useRouter)(),u=(0,g.usePathname)(),v=u?.includes("/admin/chat"),w="/chat"===u,x=a?v:w;(0,e.useCallback)(async()=>{if(!x&&!s.current){s.current=!0;try{if(a){let a=await fetch("/api/admin/chat?action=unread_count");if(!a.ok)throw Error("Fetch failed");let b=(await a.json()).unread_count||0;if(b>r.current&&r.current>=0){let a=await fetch("/api/admin/chat");if(!a.ok)throw Error("Fetch failed");let b=await a.json(),c=b.companies?.filter(a=>a.unread_count>0);if(c?.length>0){let a=c[0],b={id:Date.now(),companyName:a.name,message:a.last_message?.substring(0,80)||"رسالة جديدة",time:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),companyId:a.id};f(a=>[b,...a.slice(0,2)]),q(b),m(!0),setTimeout(()=>m(!1),8e3),y(),z("رسالة جديدة - دعم العملاء",`${a.name}: ${a.last_message?.substring(0,50)}`)}}r.current=b,k(b)}else if(b){let a=await fetch(`/api/admin/chat?company_id=${b}&action=client_unread`);if(!a.ok)throw Error("Fetch failed");let c=(await a.json()).unread_count||0;if(c>r.current&&r.current>=0){let a=await fetch(`/api/admin/chat?company_id=${b}&action=last_admin_message`);if(!a.ok)throw Error("Fetch failed");let c=(await a.json()).last_message;if(c){let a={id:Date.now(),companyName:"الدعم الفني",message:c.message?.substring(0,80)||"رسالة جديدة من الدعم",time:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})};f(b=>[a,...b.slice(0,2)]),q(a),m(!0),setTimeout(()=>m(!1),8e3),y(),z("رسالة جديدة من الدعم الفني",c.message?.substring(0,100))}}r.current=c,k(c)}}catch(a){console.error("Error checking for new messages:",a)}finally{s.current=!1}}},[a,b,x]);let y=()=>{try{let a=new Audio("/notification.mp3");a.volume=.5,a.play().catch(()=>{})}catch(a){}},z=(a,b)=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(a,{body:b,icon:"/favicon.ico"})},A=()=>{a?t.push("/admin/chat"):t.push("/chat"),f([]),m(!1)};return x?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.N,{children:l&&n&&(0,d.jsx)(h.P.div,{initial:{opacity:0,scale:.8,y:-50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-50},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none",children:(0,d.jsx)(h.P.div,{initial:{y:-20},animate:{y:[0,-10,0]},transition:{repeat:1/0,duration:2},className:"pointer-events-auto",children:(0,d.jsxs)("div",{onClick:A,className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 rounded-3xl shadow-2xl p-8 max-w-md mx-4 cursor-pointer hover:scale-105 transition-transform border-4 border-white/20",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,d.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center animate-bounce",children:(0,d.jsx)(aQ.A,{size:32,className:"text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-white font-bold text-xl",children:"رسالة جديدة!"}),(0,d.jsx)("p",{className:"text-white/80 text-sm",children:a?"من دعم العملاء":"من الدعم الفني"})]}),(0,d.jsx)("button",{onClick:a=>{a.stopPropagation(),m(!1)},className:"absolute top-4 left-4 p-2 bg-white/20 rounded-full hover:bg-white/30 transition-all",children:(0,d.jsx)(Y.A,{size:20,className:"text-white"})})]}),(0,d.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-5 mb-4 border border-white/10",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center text-white font-bold text-lg",children:n.companyName.charAt(0)}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-white font-bold",children:n.companyName}),(0,d.jsx)("p",{className:"text-white/60 text-xs",children:n.time})]})]}),(0,d.jsx)("p",{className:"text-white/90 text-sm leading-relaxed",children:n.message})]}),(0,d.jsxs)("button",{className:"w-full bg-white text-indigo-600 font-bold py-4 rounded-2xl hover:bg-white/90 transition-all flex items-center justify-center gap-2 shadow-lg",children:[(0,d.jsx)("span",{children:"الذهاب للرد"}),(0,d.jsx)(R.A,{size:20})]})]})})})}),(0,d.jsx)(i.N,{children:j>0&&0===c.length&&!l&&(0,d.jsx)(h.P.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},className:"fixed bottom-6 left-6 z-50",children:(0,d.jsxs)(h.P.button,{onClick:A,whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white p-5 rounded-2xl shadow-2xl shadow-indigo-500/40",children:[(0,d.jsx)(o.A,{size:28}),(0,d.jsx)(h.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 min-w-[28px] h-[28px] bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg border-2 border-white",children:j>9?"9+":j}),(0,d.jsx)(h.P.div,{className:"absolute inset-0 rounded-2xl bg-white/20",animate:{opacity:[0,.5,0]},transition:{repeat:1/0,duration:1.5}})]})})}),(0,d.jsx)("div",{className:"fixed top-24 left-6 z-[9998] space-y-4 pointer-events-none max-w-sm",children:(0,d.jsx)(i.N,{children:c.map(a=>(0,d.jsx)(h.P.div,{initial:{opacity:0,x:-100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-100,scale:.8},className:"pointer-events-auto",children:(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden cursor-pointer hover:shadow-3xl transition-shadow",onClick:A,children:[(0,d.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 px-5 py-3 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 text-white",children:[(0,d.jsx)(h.P.div,{animate:{rotate:[0,15,-15,0]},transition:{repeat:1/0,duration:.5,repeatDelay:2},children:(0,d.jsx)(p.A,{size:18})}),(0,d.jsx)("span",{className:"font-bold",children:"رسالة جديدة"})]}),(0,d.jsx)("button",{onClick:b=>{var c;b.stopPropagation(),c=a.id,f(a=>a.filter(a=>a.id!==c))},className:"text-white/70 hover:text-white transition-colors p-1",children:(0,d.jsx)(Y.A,{size:18})})]}),(0,d.jsxs)("div",{className:"p-5",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold",children:a.companyName.charAt(0)}),(0,d.jsx)("h4",{className:"font-bold text-gray-800 truncate flex-1",children:a.companyName})]}),(0,d.jsx)("p",{className:"text-gray-500 text-sm truncate",children:a.message}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:a.time})]})]})},a.id))})})]})}var aS=c(56203);function aT(){let[a,b]=(0,e.useState)(null),[c,f]=(0,e.useState)(!1);return(0,e.useRef)(0),(0,g.useRouter)(),(0,e.useCallback)(async()=>{try{let a=parseInt(localStorage.getItem("last_admin_notification_id")||"0"),c=await fetch(`/api/admin/notifications?limit=1&last_id=${a}`),d=await c.json();if(d.success&&d.notifications&&d.notifications.length>0){let c=d.notifications[0];if(c.id>a){b(c),f(!0);try{let a=new Audio("/notification.mp3");a.volume=.4,a.play().catch(()=>{})}catch(a){}}}}catch(a){console.error("Error checking for admin notifications:",a)}},[]),(0,d.jsx)(i.N,{children:c&&a&&(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-slate-950/60 backdrop-blur-sm",children:(0,d.jsx)(h.P.div,{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},className:"relative w-full max-w-lg overflow-hidden",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-[2.5rem] shadow-2xl border-4 border-white/20 dark:border-slate-800 overflow-hidden",children:[(0,d.jsxs)("div",{className:"bg-gradient-to-r from-[#2c3e50] via-[#34495e] to-[#2c3e50] p-8 text-white relative",children:[(0,d.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:(0,d.jsx)(aS.A,{size:120})}),(0,d.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,d.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center animate-pulse",children:(0,d.jsx)(p.A,{size:28,className:"text-amber-400"})}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("h2",{className:"text-2xl font-black tracking-tight",children:"تنبيه إداري هام"}),(0,d.jsx)("p",{className:"text-white/60 font-bold text-xs uppercase tracking-widest mt-1",children:new Date(a.created_at).toLocaleDateString("en-US")})]})]}),(0,d.jsx)("button",{onClick:()=>{a&&localStorage.setItem("last_admin_notification_id",a.id.toString()),f(!1)},className:"absolute top-6 left-6 w-10 h-10 rounded-xl bg-white/10 hover:bg-white/20 flex items-center justify-center transition-all border border-white/10",children:(0,d.jsx)(Y.A,{size:20})})]}),(0,d.jsxs)("div",{className:"p-8 space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h3",{className:"text-2xl font-black text-slate-900 dark:text-white leading-tight",children:a.title}),(0,d.jsx)("div",{className:"w-20 h-1.5 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full"})]}),(0,d.jsx)("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-3xl p-6 border-2 border-slate-100 dark:border-slate-800",children:(0,d.jsx)("p",{className:"text-slate-600 dark:text-slate-300 font-bold text-lg leading-relaxed text-right",children:a.message})}),a.image_path&&(0,d.jsx)("div",{className:"rounded-3xl overflow-hidden border-2 border-slate-100 dark:border-slate-800 shadow-lg",children:(0,d.jsx)("img",{src:a.image_path,alt:"Notification content",className:"w-full h-48 object-cover",onerror:"this.style.display='none'"})}),(0,d.jsx)("div",{className:"flex gap-4 pt-2",children:(0,d.jsxs)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{a&&localStorage.setItem("last_admin_notification_id",a.id.toString()),f(!1)},className:"flex-1 bg-gradient-to-r from-[#3498db] to-[#2ecc71] text-white py-5 rounded-2xl font-black text-xl shadow-xl shadow-blue-500/20 transition-all flex items-center justify-center gap-3",children:[(0,d.jsx)("span",{children:"فهمت، شكراً"}),(0,d.jsx)(R.A,{size:24})]})})]}),(0,d.jsx)("div",{className:"h-2 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})]})})})})}function aU({children:a,user:b,permissions:c,userType:f,subscriptionData:j}){let[k,l]=(0,e.useState)(!1),{isRTL:m}=(0,N.Y)(),[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(0),r=(0,e.useRef)(!1),s=(0,g.usePathname)(),t=(0,g.useRouter)(),u=s.includes("/subscriptions"),v=b?.role!=="admin"&&j&&!j.isActive&&!u;return((0,e.useCallback)(async()=>{if(b?.company_id&&b?.role!=="admin"&&!r.current){r.current=!0;try{let a=await fetch(`/api/admin/chat?company_id=${b.company_id}&action=client_unread`);if(!a.ok)throw Error("Fetch failed");let c=await a.json();void 0!==c.unread_count&&q(c.unread_count)}catch(a){console.error("Error fetching unread count:",a)}finally{r.current=!1}}},[b?.company_id,b?.role]),n)?(0,d.jsxs)("div",{className:"h-screen overflow-hidden text-foreground transition-colors duration-300",dir:m?"rtl":"ltr",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-[#0a0e1a] via-[#0d1525] to-[#0a0e1a] -z-10"}),(0,d.jsx)("div",{className:"fixed inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-blue-900/20 via-transparent to-transparent -z-10"}),(0,d.jsx)("div",{className:"fixed inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-purple-900/15 via-transparent to-transparent -z-10"}),(0,d.jsx)(aR,{isAdmin:b?.role==="admin",companyId:b?.company_id}),(0,d.jsx)(aT,{}),(0,d.jsx)("aside",{className:`hidden lg:flex fixed top-0 ${m?"right-0":"left-0"} h-screen w-64 z-50`,children:(0,d.jsx)(P,{userRole:b?.role,permissions:c,userType:f})}),(0,d.jsx)(i.N,{children:k&&(0,d.jsxs)("div",{className:"fixed inset-0 z-[100] lg:hidden",children:[(0,d.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,d.jsxs)(h.P.div,{initial:{x:m?"100%":"-100%"},animate:{x:0},exit:{x:m?"100%":"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:`absolute top-0 ${m?"right-0":"left-0"} bottom-0 w-64 overflow-hidden flex flex-col`,children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0d1525] via-[#0a0e1a] to-[#080c15]"}),(0,d.jsxs)("div",{className:"relative z-10 flex items-center justify-between p-4 border-b border-white/5",children:[(0,d.jsx)("span",{className:"text-white font-black text-sm",children:m?"القائمة الرئيسية":"Main Menu"}),(0,d.jsx)(h.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(!1),className:"p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:(0,d.jsx)(Y.A,{size:20})})]}),(0,d.jsx)("div",{className:"relative z-10 flex-1 overflow-y-auto",children:(0,d.jsx)(P,{userRole:b?.role,permissions:c,userType:f})})]})]})}),(0,d.jsxs)("div",{className:`${m?"lg:mr-64":"lg:ml-64"} flex flex-col h-screen`,children:[(0,d.jsx)("div",{className:"flex-shrink-0 relative z-[100]",children:(0,d.jsx)(aH,{user:b,onToggleSidebar:()=>l(!0),unreadChatCount:p,subscriptionData:j})}),(0,d.jsx)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden relative",children:v?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[80vh] p-6 text-center",children:(0,d.jsxs)(h.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-slate-900/80 backdrop-blur-xl border border-red-500/20 p-8 rounded-3xl max-w-md w-full",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,d.jsx)(ao.A,{size:40,className:"text-red-500"})}),(0,d.jsx)("h2",{className:"text-2xl font-black text-white mb-4",children:m?"تنبيه: اشتراك غير نشط":"Alert: Inactive Subscription"}),(0,d.jsx)("p",{className:"text-slate-400 mb-8",children:m?"عذراً، يجب أن يكون لديك اشتراك نشط لتتمكن من استخدام ميزات النظام. يرجى تفعيل باقة اشتراك للمتابعة.":"Sorry, you must have an active subscription to use system features. Please activate a subscription plan to continue."}),(0,d.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t.push("/subscriptions"),className:"w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-2xl shadow-xl shadow-blue-500/20",children:m?"الذهاب لصفحة الاشتراكات":"Go to Subscriptions"})]})}):(0,d.jsx)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"min-h-full w-full",children:a})}),(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)(aP,{})})]})]}):(0,d.jsx)("div",{className:"h-screen overflow-hidden bg-background text-foreground flex items-center justify-center",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"})})}},97788:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i});var d=c(75338);c(74515);var e=c(86802),f=c(82161),g=c(41557),h=c(35552);async function i({children:a}){let b,c=(await (0,e.cookies)()).get("auth_session");c||(0,f.redirect)("/login");let i=JSON.parse(c.value),j=i.user_type||"owner",k={isActive:!1,endDate:null,daysRemaining:0};if("sub_user"===j&&i.sub_user_id){let a=await (0,h.P)("SELECT id, name, email FROM company_sub_users WHERE id = ?",[i.sub_user_id]);a&&0!==a.length||(0,f.redirect)("/login");let c=a[0];b={name:c.name,role:"sub_user",email:c.email,company_id:i.company_id}}else{let a=await (0,h.P)("SELECT id, name, email, role, company_id FROM users WHERE id = ?",[i.user_id]);a&&0!==a.length||(0,f.redirect)("/login"),b={name:a[0].name,role:a[0].role,email:a[0].email,company_id:a[0].company_id||i.company_id}}if("admin"!==b.role&&b.company_id){let a=await (0,h.P)("SELECT is_subscription_active, subscription_end_date FROM companies WHERE id = ?",[b.company_id]);if(a&&a.length>0){let b=a[0],c=b.subscription_end_date,d=1===b.is_subscription_active&&!!c&&new Date(c)>new Date,e=c?Math.ceil((new Date(c).getTime()-Date.now())/864e5):0;k={isActive:d,endDate:c,daysRemaining:e>0?e:0}}}else"admin"===b.role&&(k={isActive:!0,endDate:null,daysRemaining:9999});return(0,d.jsx)(g.DashboardLayout,{user:b,permissions:i.permissions,userType:j,subscriptionData:k,children:a})}}};