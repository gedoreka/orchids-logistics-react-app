(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1890],{64269:(e,s,a)=>{"use strict";a.d(s,{cn:()=>r});var t=a(2821),l=a(75889);function r(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.QP)((0,t.$)(s))}},80866:(e,s,a)=>{Promise.resolve().then(a.bind(a,93518))},93518:(e,s,a)=>{"use strict";a.d(s,{CompaniesClient:()=>V});var t=a(95155),l=a(88661),r=a.n(l),i=a(12115),n=a(34544),c=a(26497),d=a(19408),o=a(42529),x=a(89559),b=a(86651),p=a(93341),f=a(78874),m=a(16485),u=a(24589),h=a(36168),j=a(43240),g=a(931),w=a(19204),v=a(69141),N=a(5370),y=a(6191),k=a(20027),_=a(57828),A=a(99708),z=a(52952),S=a(71360),C=a(52056),P=a(18720),R=a(30926);let T=(0,R.createServerReference)("4095cdd7be1ff4c76b304ecb94b2f98305b6e32ec0",R.callServer,void 0,R.findSourceMapURL,"deleteCompany"),D=(0,R.createServerReference)("40a439b2f84f3acf21d95d9dcd46c9c19d2d150a49",R.callServer,void 0,R.findSourceMapURL,"approveCompany"),H=(0,R.createServerReference)("40b3c28b534bd4125b9a5eea088757a93c86694438",R.callServer,void 0,R.findSourceMapURL,"rejectCompany"),L=(0,R.createServerReference)("607dbb406d918e91605363f854aaa211e6cdbac5c6",R.callServer,void 0,R.findSourceMapURL,"toggleCompanyStatus"),O=(0,R.createServerReference)("60a7e56db50f71edb6ab9f261f115559bafaa6f3e8",R.callServer,void 0,R.findSourceMapURL,"generateToken");var U=a(20063),I=a(52619),M=a.n(I),q=a(64269),E=a(68854);function V(e){let{initialCompanies:s,statusFilter:a,search:l,plans:R=[]}=e,I=(0,U.useRouter)(),V=(0,U.usePathname)(),B=(0,U.useSearchParams)(),[G,F]=(0,i.useState)(s),[J,Q]=(0,i.useState)(null),[$,K]=(0,i.useState)(null),[W,X]=(0,i.useState)(null),[Y,Z]=(0,i.useState)(!1),ee=(e,s)=>{let a=new URLSearchParams(B.toString());s?a.set(e,s):a.delete(e),I.push("".concat(V,"?").concat(a.toString()))},es=async(e,s)=>{Q(e);try{let e=await s();e.success?(P.oR.success("تم تنفيذ العملية بنجاح"),e.token&&P.oR.info("رمز التفعيل الجديد: ".concat(e.token),{duration:1e4}),I.refresh()):P.oR.error(e.error||"حدث خطأ")}catch(e){P.oR.error("حدث خطأ غير متوقع")}finally{Q(null)}},ea=async()=>{if($){Q($.id);try{let e=await T($.id);e.success?(P.oR.success(e.message||"تم حذف الشركة بنجاح"),K(null),I.refresh()):P.oR.error(e.error||"حدث خطأ أثناء الحذف")}catch(e){P.oR.error("حدث خطأ غير متوقع")}finally{Q(null)}}},et=async e=>{if(e.preventDefault(),!W)return;Z(!0);let s=new FormData(e.currentTarget);try{let e=await fetch("/api/admin/subscriptions/assign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:W.companyId,plan_id:s.get("plan_id"),start_date:s.get("start_date"),end_date:s.get("end_date"),assigned_by:1,notes:s.get("notes")})}),a=await e.json();a.success?(P.oR.success("تم تعيين الباقة بنجاح"),X(null),I.refresh()):P.oR.error(a.error||"حدث خطأ")}catch(e){P.oR.error("حدث خطأ")}Z(!1)};return(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 space-y-6 pb-20 max-w-[1600px] mx-auto",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 relative group",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 absolute -inset-1 bg-gradient-to-r from-blue-600 via-green-500 to-purple-600 rounded-[2.5rem] blur opacity-25 group-hover:opacity-40 transition duration-1000 group-hover:duration-200"}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 relative bg-slate-900/95 backdrop-blur-2xl rounded-[2.5rem] p-6 md:p-10 text-white shadow-2xl overflow-hidden text-center border border-white/10",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-green-500 via-red-500 via-yellow-500 via-purple-500 to-blue-500 bg-[length:200%_100%] animate-gradient-x"}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 relative z-10 space-y-4",children:[(0,t.jsxs)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"inline-flex items-center gap-3 bg-white/5 backdrop-blur-xl border border-white/10 px-5 py-2 rounded-full font-black text-xs uppercase tracking-widest",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),"نظام إدارة طلبات الشركات"]}),(0,t.jsx)("h1",{className:"jsx-9f81062741b319b6 text-3xl md:text-5xl font-black tracking-tighter bg-clip-text text-transparent bg-gradient-to-b from-white to-white/50",children:"إدارة طلبات المنشآت"}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex flex-wrap justify-center gap-4 pt-2",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 bg-blue-500/10 backdrop-blur-md px-6 py-2.5 rounded-2xl border border-blue-500/20 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center text-blue-400",children:(0,t.jsx)(d.A,{size:20})}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 text-right",children:[(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 block text-blue-400/50 text-[10px] font-black uppercase tracking-widest",children:"إجمالي الشركات"}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-xl font-black text-blue-100",children:G.length})]})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 bg-emerald-500/10 backdrop-blur-md px-6 py-2.5 rounded-2xl border border-emerald-500/20 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center text-emerald-400",children:(0,t.jsx)(o.A,{size:20})}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 text-right",children:[(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 block text-emerald-400/50 text-[10px] font-black uppercase tracking-widest",children:"المقبولة"}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-xl font-black text-emerald-100",children:G.filter(e=>"approved"===e.status).length})]})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 bg-amber-500/10 backdrop-blur-md px-6 py-2.5 rounded-2xl border border-amber-500/20 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center text-amber-400",children:(0,t.jsx)(x.A,{size:20,className:"animate-spin-slow"})}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 text-right",children:[(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 block text-amber-400/50 text-[10px] font-black uppercase tracking-widest",children:"قيد المراجعة"}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-xl font-black text-amber-100",children:G.filter(e=>"pending"===e.status).length})]})]})]})]})]})]}),(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 bg-white/80 backdrop-blur-xl rounded-3xl border border-white/20 p-5 shadow-[0_8px_30px_rgb(0,0,0,0.04)] ring-1 ring-slate-900/5",children:(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 grid lg:grid-cols-12 gap-6 items-center",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 lg:col-span-7 relative group",children:[(0,t.jsx)(b.A,{className:"absolute right-6 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors",size:20}),(0,t.jsx)("input",{type:"text",placeholder:"ابحث باسم الشركة، الرقم التجاري، أو الرقم الضريبي...",defaultValue:l,onChange:e=>ee("search",e.target.value),className:"jsx-9f81062741b319b6 w-full bg-slate-50 border border-slate-200 rounded-2xl py-2.5 pr-16 pl-8 font-bold text-slate-700 focus:border-blue-500 focus:bg-white focus:ring-4 focus:ring-blue-500/5 outline-none transition-all"})]}),(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 lg:col-span-5 flex flex-wrap gap-2 justify-center lg:justify-end",children:[{id:"all",label:"الكل",icon:p.A,color:"bg-slate-800"},{id:"approved",label:"مقبولة",icon:o.A,color:"bg-emerald-600"},{id:"rejected",label:"مرفوضة",icon:f.A,color:"bg-rose-600"},{id:"pending",label:"قيد المراجعة",icon:x.A,color:"bg-amber-600"}].map(e=>(0,t.jsxs)("button",{onClick:()=>ee("filter",e.id),className:"jsx-9f81062741b319b6 "+((0,q.cn)("flex items-center gap-2 px-4 py-2.5 rounded-xl font-bold text-sm transition-all relative overflow-hidden group",a===e.id?"".concat(e.color," text-white shadow-lg shadow-black/10 scale-105"):"bg-slate-100 text-slate-600 hover:bg-slate-200")||""),children:[(0,t.jsx)(e.icon,{size:16,className:(0,q.cn)(a===e.id&&"animate-pulse")}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6",children:e.label}),a===e.id&&(0,t.jsx)(n.P.div,{layoutId:"filter-active",className:"absolute inset-0 bg-white/10",transition:{type:"spring",bounce:.2,duration:.6}})]},e.id))})]})}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 space-y-6",children:[(0,t.jsx)(c.N,{mode:"popLayout",children:G.map((e,s)=>(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:.05*s},className:"group relative bg-white rounded-[2rem] border border-slate-200 p-6 md:p-8 shadow-sm hover:shadow-2xl hover:shadow-blue-500/5 transition-all duration-500 overflow-hidden",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 "+((0,q.cn)("absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r","approved"===e.status?"from-emerald-500 to-teal-400":"rejected"===e.status?"from-rose-500 to-pink-400":"from-amber-500 to-orange-400")||"")}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex flex-col md:flex-row md:items-center justify-between gap-4 pb-5 border-b border-slate-100",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 space-y-1",children:[(0,t.jsxs)("h3",{className:"jsx-9f81062741b319b6 text-2xl font-black text-slate-900 group-hover:text-blue-600 transition-colors flex items-center gap-3",children:[e.name,e.is_active?(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 w-2.5 h-2.5 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_10px_rgba(16,185,129,0.5)]"}):(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 w-2.5 h-2.5 rounded-full bg-slate-300"})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex flex-wrap gap-4 text-slate-400 font-bold text-xs",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex items-center gap-2",children:[(0,t.jsx)(m.A,{size:12,className:"text-blue-500"}),(0,t.jsxs)("span",{className:"jsx-9f81062741b319b6",children:["منذ ",new Date(e.created_at).toLocaleDateString("en-GB")]})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex items-center gap-2",children:[(0,t.jsx)(u.A,{size:12,className:"text-blue-500"}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6",children:e.country||"المملكة العربية السعودية"})]})]})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex flex-wrap gap-2",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 "+((0,q.cn)("flex items-center gap-2 px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest shadow-sm border","approved"===e.status?"bg-emerald-50 text-emerald-600 border-emerald-100":"rejected"===e.status?"bg-rose-50 text-rose-600 border-rose-100":"bg-amber-50 text-amber-600 border-amber-100")||""),children:["approved"===e.status?(0,t.jsx)(o.A,{size:12}):"rejected"===e.status?(0,t.jsx)(f.A,{size:12}):(0,t.jsx)(x.A,{size:12,className:"animate-spin-slow"}),"approved"===e.status?"مقبول":"rejected"===e.status?"مرفوض":"قيد المراجعة"]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 "+((0,q.cn)("flex items-center gap-2 px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest shadow-sm border",e.is_active?"bg-blue-50 text-blue-600 border-blue-100":"bg-slate-50 text-slate-400 border-slate-100")||""),children:[e.is_active?(0,t.jsx)(h.A,{size:12}):(0,t.jsx)(j.A,{size:12}),e.is_active?"نشط":"موقوف"]})]})]}),(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[{label:"رقم السجل التجاري",value:e.commercial_number,icon:g.A,color:"border-blue-500"},{label:"الرقم الضريبي",value:e.vat_number||"---",icon:w.A,color:"border-indigo-500"},{label:"رقم الهاتف",value:e.phone||"---",icon:v.A,color:"border-teal-500"},{label:"المنطقة/المدينة",value:"".concat(e.region||""," ").concat(e.district||"")||"---",icon:u.A,color:"border-purple-500"}].map((e,s)=>(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 "+((0,q.cn)("bg-slate-50/50 rounded-xl p-4 border-2 border-slate-100 transition-all hover:bg-white hover:shadow-lg hover:-translate-y-1 border-r-4",e.color)||""),children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex items-center gap-2 mb-1.5 text-slate-500",children:[(0,t.jsx)(e.icon,{size:16}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[10px] font-black uppercase tracking-widest",children:e.label})]}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 font-black text-slate-800 text-base block",children:e.value})]},s))}),(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 bg-slate-900/5 rounded-2xl p-5 border-2 border-dashed border-slate-200",children:(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 bg-white/80 rounded-xl p-4 shadow-sm border border-slate-100 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 space-y-0.5",children:[(0,t.jsxs)("span",{className:"jsx-9f81062741b319b6 flex items-center gap-2 text-slate-400 text-[10px] font-black uppercase tracking-widest",children:[(0,t.jsx)(N.A,{size:12,className:"text-blue-500"}),"رمز التفعيل"]}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 "+((0,q.cn)("font-mono text-lg font-black tracking-widest",e.access_token?"text-blue-600":"text-slate-300 italic text-xs")||""),children:e.access_token||"غير منشأ بعد"})]}),e.access_token&&(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e.access_token),P.oR.success("تم نسخ الرمز")},className:"jsx-9f81062741b319b6 w-9 h-9 rounded-lg bg-slate-100 text-slate-500 hover:bg-blue-600 hover:text-white transition-all flex items-center justify-center",children:(0,t.jsx)(y.A,{size:18,className:"rotate-45"})})]}),(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 bg-white/80 rounded-xl p-4 shadow-sm border border-slate-100 flex items-center justify-between",children:(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 space-y-0.5",children:[(0,t.jsxs)("span",{className:"jsx-9f81062741b319b6 flex items-center gap-2 text-slate-400 text-[10px] font-black uppercase tracking-widest",children:[(0,t.jsx)(m.A,{size:12,className:"text-amber-500"}),"مدة التفعيل"]}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 font-black text-slate-800 text-base",children:e.token_expiry&&"0000-00-00"!==e.token_expiry?(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-amber-600",children:new Date(e.token_expiry).toLocaleDateString("en-GB")}):(0,t.jsxs)("span",{className:"jsx-9f81062741b319b6 text-emerald-600 flex items-center gap-2",children:["تفعيل دائم",(0,t.jsx)(k.A,{size:18})]})})]})})]})}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-9 gap-2",children:[(0,t.jsx)(M(),{href:"/admin/companies/".concat(e.id),children:(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full h-full flex flex-col items-center justify-center gap-1.5 p-3 rounded-xl bg-gradient-to-br from-blue-600 to-blue-700 text-white font-black shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 transition-all",children:[(0,t.jsx)(_.A,{size:18}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[9px] uppercase tracking-wider text-center",children:"عرض التفاصيل"})]})}),(0,t.jsx)(M(),{href:"/admin/companies/".concat(e.id,"/permissions"),children:(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full h-full flex flex-col items-center justify-center gap-1.5 p-3 rounded-xl bg-gradient-to-br from-indigo-500 to-indigo-600 text-white font-black shadow-lg shadow-indigo-500/20 hover:shadow-indigo-500/40 transition-all",children:[(0,t.jsx)(A.A,{size:18}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[9px] uppercase tracking-wider text-center",children:"الصلاحيات"})]})}),(0,t.jsxs)(n.P.button,{whileHover:"pending"===e.status?{scale:1.02}:{},whileTap:"pending"===e.status?{scale:.98}:{},onClick:()=>"pending"===e.status&&es(e.id,()=>D(e.id)),disabled:J===e.id||"pending"!==e.status,className:(0,q.cn)("w-full h-full flex flex-col items-center justify-center gap-1.5 p-3 rounded-xl font-black shadow-lg transition-all","pending"===e.status?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-emerald-500/20 hover:shadow-emerald-500/40 cursor-pointer":"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none"),children:[(0,t.jsx)(o.A,{size:18}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[9px] uppercase tracking-wider text-center",children:"approved"===e.status?"تم القبول":"قبول الطلب"})]}),(0,t.jsxs)(n.P.button,{whileHover:"pending"===e.status?{scale:1.02}:{},whileTap:"pending"===e.status?{scale:.98}:{},onClick:()=>"pending"===e.status&&es(e.id,()=>H(e.id)),disabled:J===e.id||"pending"!==e.status,className:(0,q.cn)("w-full h-full flex flex-col items-center justify-center gap-1.5 p-3 rounded-xl font-black shadow-lg transition-all","pending"===e.status?"bg-gradient-to-br from-rose-500 to-rose-600 text-white shadow-rose-500/20 hover:shadow-rose-500/40 cursor-pointer":"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none"),children:[(0,t.jsx)(f.A,{size:18}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[9px] uppercase tracking-wider text-center",children:"rejected"===e.status?"تم الرفض":"رفض الطلب"})]}),(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>es(e.id,()=>L(e.id,e.is_active)),disabled:J===e.id,className:(0,q.cn)("w-full h-full flex flex-col items-center justify-center gap-1.5 p-3 rounded-xl font-black shadow-lg transition-all",e.is_active?"bg-gradient-to-br from-amber-500 to-orange-600 text-white shadow-amber-500/20 hover:shadow-amber-500/40":"bg-gradient-to-br from-blue-500 to-cyan-600 text-white shadow-blue-500/20 hover:shadow-blue-500/40"),children:[(0,t.jsx)(z.A,{size:18}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[9px] uppercase tracking-wider text-center",children:e.is_active?"إيقاف المنشأة":"تفعيل المنشأة"})]}),(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>es(e.id,()=>O(e.id,30)),disabled:J===e.id,className:"w-full h-full flex flex-col items-center justify-center gap-1.5 p-3 rounded-xl bg-gradient-to-br from-purple-500 to-purple-700 text-white font-black shadow-lg shadow-purple-500/20 hover:shadow-purple-500/40 transition-all",children:[(0,t.jsx)(N.A,{size:18}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[9px] uppercase tracking-wider text-center",children:"رمز 30 يوم"})]}),(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>es(e.id,()=>O(e.id,0)),disabled:J===e.id,className:"w-full h-full flex flex-col items-center justify-center gap-1.5 p-3 rounded-xl bg-gradient-to-br from-teal-400 to-teal-600 text-white font-black shadow-lg shadow-teal-500/20 hover:shadow-teal-500/40 transition-all",children:[(0,t.jsx)(k.A,{size:18}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[9px] uppercase tracking-wider text-center",children:"رمز دائم"})]}),1!==e.id&&(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>K({id:e.id,name:e.name}),disabled:J===e.id,className:"w-full h-full flex flex-col items-center justify-center gap-1.5 p-3 rounded-xl bg-gradient-to-br from-red-600 to-red-800 text-white font-black shadow-lg shadow-red-500/20 hover:shadow-red-500/40 transition-all",children:[(0,t.jsx)(S.A,{size:18}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[9px] uppercase tracking-wider text-center",children:"حذف الشركة"})]}),(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>X({companyId:e.id,companyName:e.name||""}),className:"w-full h-full flex flex-col items-center justify-center gap-1.5 p-3 rounded-xl bg-gradient-to-br from-violet-500 to-purple-700 text-white font-black shadow-lg shadow-purple-500/20 hover:shadow-purple-500/40 transition-all",children:[(0,t.jsx)(E.A,{size:18}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-[9px] uppercase tracking-wider text-center",children:"تعيين باقة"})]})]})]}),J===e.id&&(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 absolute inset-0 bg-white/60 backdrop-blur-[2px] z-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex flex-col items-center gap-4",children:[(0,t.jsx)(x.A,{className:"w-10 h-10 text-blue-600 animate-spin"}),(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 font-black text-blue-600 text-xs uppercase tracking-widest",children:"جاري التنفيذ..."})]})})]},e.id))}),0===G.length&&(0,t.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"py-32 flex flex-col items-center gap-8 text-center",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center text-slate-300",children:(0,t.jsx)(d.A,{size:48})}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 space-y-3",children:[(0,t.jsx)("h3",{className:"jsx-9f81062741b319b6 text-3xl font-black text-slate-800",children:"لا توجد منشآت مطابقة"}),(0,t.jsx)("p",{className:"jsx-9f81062741b319b6 font-bold text-slate-400 text-lg",children:"لم يتم العثور على أي شركات تطابق معايير البحث الحالية."}),(0,t.jsx)("button",{onClick:()=>I.push(V),className:"jsx-9f81062741b319b6 mt-4 px-8 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:"عرض جميع الشركات"})]})]})]}),(0,t.jsx)(c.N,{children:$&&(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:()=>K(null),children:(0,t.jsx)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl border border-slate-100",children:(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex flex-col items-center text-center gap-6",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 w-20 h-20 rounded-full bg-red-100 flex items-center justify-center",children:(0,t.jsx)(C.A,{size:40,className:"text-red-600"})}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 space-y-2",children:[(0,t.jsx)("h3",{className:"jsx-9f81062741b319b6 text-2xl font-black text-slate-900",children:"تأكيد الحذف"}),(0,t.jsxs)("p",{className:"jsx-9f81062741b319b6 text-slate-500 font-bold",children:["هل أنت متأكد من حذف شركة ",(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-red-600 font-black",children:$.name}),"؟"]}),(0,t.jsx)("p",{className:"jsx-9f81062741b319b6 text-xs text-slate-400 font-medium",children:"سيتم حذف جميع المستخدمين المرتبطين بهذه الشركة نهائياً ولا يمكن استرجاعهم."})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex gap-3 w-full",children:[(0,t.jsx)("button",{onClick:()=>K(null),className:"jsx-9f81062741b319b6 flex-1 px-6 py-4 rounded-2xl bg-slate-100 text-slate-700 font-black hover:bg-slate-200 transition-all",children:"إلغاء"}),(0,t.jsxs)("button",{onClick:ea,disabled:J===$.id,className:"jsx-9f81062741b319b6 flex-1 px-6 py-4 rounded-2xl bg-gradient-to-br from-red-600 to-red-700 text-white font-black shadow-lg shadow-red-500/30 hover:shadow-red-500/50 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[J===$.id?(0,t.jsx)(x.A,{size:18,className:"animate-spin"}):(0,t.jsx)(S.A,{size:18}),"حذف نهائي"]})]})]})})})}),(0,t.jsx)(c.N,{children:W&&(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:()=>X(null),children:(0,t.jsx)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white rounded-3xl p-8 max-w-lg w-full shadow-2xl border border-slate-100",children:(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex flex-col items-center text-center gap-6",children:[(0,t.jsx)("div",{className:"jsx-9f81062741b319b6 w-20 h-20 rounded-full bg-purple-100 flex items-center justify-center",children:(0,t.jsx)(E.A,{size:40,className:"text-purple-600"})}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 space-y-2",children:[(0,t.jsx)("h3",{className:"jsx-9f81062741b319b6 text-2xl font-black text-slate-900",children:"تعيين باقة اشتراك"}),(0,t.jsxs)("p",{className:"jsx-9f81062741b319b6 text-slate-500 font-bold",children:["لشركة ",(0,t.jsx)("span",{className:"jsx-9f81062741b319b6 text-purple-600 font-black",children:W.companyName})]})]}),(0,t.jsxs)("form",{onSubmit:et,dir:"rtl",className:"jsx-9f81062741b319b6 w-full space-y-4 text-right",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6",children:[(0,t.jsx)("label",{className:"jsx-9f81062741b319b6 block text-sm font-bold text-slate-700 mb-2",children:"اختر الباقة"}),(0,t.jsxs)("select",{name:"plan_id",required:!0,className:"jsx-9f81062741b319b6 w-full px-4 py-3 bg-slate-100 rounded-xl font-bold",children:[(0,t.jsx)("option",{value:"",className:"jsx-9f81062741b319b6",children:"-- اختر الباقة --"}),R.map(e=>(0,t.jsxs)("option",{value:e.id,className:"jsx-9f81062741b319b6",children:[e.name," - ",e.price," ر.س / ",e.duration_value," ","days"===e.duration_unit?"يوم":"months"===e.duration_unit?"شهر":"سنة"]},e.id))]})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6",children:[(0,t.jsx)("label",{className:"jsx-9f81062741b319b6 block text-sm font-bold text-slate-700 mb-2",children:"تاريخ البداية"}),(0,t.jsx)("input",{type:"date",name:"start_date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"jsx-9f81062741b319b6 w-full px-4 py-3 bg-slate-100 rounded-xl font-bold"})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6",children:[(0,t.jsx)("label",{className:"jsx-9f81062741b319b6 block text-sm font-bold text-slate-700 mb-2",children:"تاريخ النهاية"}),(0,t.jsx)("input",{type:"date",name:"end_date",required:!0,defaultValue:new Date(Date.now()+31536e6).toISOString().split("T")[0],className:"jsx-9f81062741b319b6 w-full px-4 py-3 bg-slate-100 rounded-xl font-bold"})]})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6",children:[(0,t.jsx)("label",{className:"jsx-9f81062741b319b6 block text-sm font-bold text-slate-700 mb-2",children:"ملاحظات (اختياري)"}),(0,t.jsx)("textarea",{name:"notes",rows:2,placeholder:"أي ملاحظات إضافية...",className:"jsx-9f81062741b319b6 w-full px-4 py-3 bg-slate-100 rounded-xl font-bold"})]}),(0,t.jsxs)("div",{className:"jsx-9f81062741b319b6 flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>X(null),className:"jsx-9f81062741b319b6 flex-1 px-6 py-4 rounded-2xl bg-slate-100 text-slate-700 font-black hover:bg-slate-200 transition-all",children:"إلغاء"}),(0,t.jsxs)("button",{type:"submit",disabled:Y,className:"jsx-9f81062741b319b6 flex-1 px-6 py-4 rounded-2xl bg-gradient-to-br from-purple-600 to-purple-700 text-white font-black shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[Y?(0,t.jsx)(x.A,{size:18,className:"animate-spin"}):(0,t.jsx)(E.A,{size:18}),"تعيين الباقة"]})]})]})]})})})}),(0,t.jsx)(r(),{id:"9f81062741b319b6",children:"@keyframes gradient-x{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}.animate-gradient-x{animation:gradient-x 3s ease infinite}.animate-spin-slow{animation:spin 3s linear infinite}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}"})]})}}},e=>{e.O(0,[2418,4909,2619,8720,2470,2912,8441,1255,7358],()=>e(e.s=80866)),_N_E=e.O()}]);