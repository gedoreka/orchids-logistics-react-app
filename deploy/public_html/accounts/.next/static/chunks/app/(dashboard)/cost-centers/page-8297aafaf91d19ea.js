(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7313],{9504:(e,s,t)=>{Promise.resolve().then(t.bind(t,40138))},40138:(e,s,t)=>{"use strict";t.d(s,{CostCentersClient:()=>_});var a=t(95155),l=t(12115),r=t(34544),c=t(26497),n=t(91456),i=t(80534),d=t(71871),o=t(86651),x=t(6191),m=t(37107),h=t(21190),p=t(71360),b=t(89715),u=t(65229),f=t(46046),j=t(6132),g=t(18720),N=t(30926);let v=(0,N.createServerReference)("608b759b217ff199dfc0736d4bc412028cd24234e0",N.callServer,void 0,N.findSourceMapURL,"updateCostCenter"),w=(0,N.createServerReference)("4007700aff8c768d274e1bb724bac00107117109c1",N.callServer,void 0,N.findSourceMapURL,"createCostCenter"),y=(0,N.createServerReference)("408074f4fcda389912b4d106150d6199d1c9ad2a9f",N.callServer,void 0,N.findSourceMapURL,"deleteCostCenter");var C=t(83884),k=t(64269);function _(e){let{initialCostCenters:s,companyId:t}=e,N=(0,C.c)("costCenters"),{isRTL:_}=(0,C.Y)(),[S,A]=(0,l.useState)(s),[R,P]=(0,l.useState)(!1),[E,L]=(0,l.useState)(null),[D,M]=(0,l.useState)(""),[q,z]=(0,l.useState)(!1),[O,U]=(0,l.useState)(null),[T,F]=(0,l.useState)({center_code:"",center_name:""}),H=S.filter(e=>e.center_name.toLowerCase().includes(D.toLowerCase())||e.center_code.toLowerCase().includes(D.toLowerCase())),Q=e=>{e?(L(e),F({center_code:e.center_code,center_name:e.center_name})):(L(null),F({center_code:"",center_name:""})),P(!0)},Y=async e=>{e.preventDefault(),z(!0);try{if(E){let e=await v(E.id,T);e.success?(g.oR.success(N("updateSuccess")),A(e=>e.map(e=>e.id===E.id?{...e,...T}:e)),P(!1)):g.oR.error(e.error||N("updateError"))}else{let e=await w({...T,company_id:t});e.success?(g.oR.success(N("addSuccess")),window.location.reload()):g.oR.error(e.error||N("addError"))}}catch(e){g.oR.error(N("unexpectedError"))}finally{z(!1)}},$=async e=>{try{let s=await y(e);s.success?(g.oR.success(N("deleteSuccess")),A(s=>s.filter(s=>s.id!==e)),U(null)):g.oR.error(s.error||N("deleteError"))}catch(e){g.oR.error(N("unexpectedError"))}};return(0,a.jsxs)("div",{className:"w-full max-w-[98%] mx-auto px-6 py-6",dir:_?"rtl":"ltr",children:[(0,a.jsxs)("div",{className:"bg-[#1a2234] rounded-3xl p-8 space-y-8 shadow-2xl border border-white/5",children:[(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-amber-700 to-orange-600 p-8 text-white shadow-xl border border-white/10",children:[(0,a.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-center text-center space-y-4",children:[(0,a.jsx)("div",{className:"p-3 bg-white/10 rounded-full backdrop-blur-sm",children:(0,a.jsx)(n.A,{className:"w-8 h-8 text-amber-200"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:N("title")}),(0,a.jsx)("p",{className:"text-amber-100 max-w-2xl",children:N("subtitle")})]}),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-400 via-orange-400 to-red-400"})]}),(0,a.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:(0,k.cn)("bg-white p-5 rounded-2xl border border-slate-100 shadow-lg flex items-center group hover:border-amber-200 transition-colors",_?"space-x-4 space-x-reverse":"space-x-4"),children:[(0,a.jsx)("div",{className:"p-3 bg-amber-50 rounded-xl text-amber-600 group-hover:scale-110 transition-transform",children:(0,a.jsx)(n.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-500 font-bold",children:N("totalCenters")}),(0,a.jsx)("p",{className:"text-2xl font-black text-slate-900",children:S.length})]})]}),(0,a.jsxs)("div",{className:(0,k.cn)("bg-white p-5 rounded-2xl border border-slate-100 shadow-lg flex items-center group hover:border-emerald-200 transition-colors",_?"space-x-4 space-x-reverse":"space-x-4"),children:[(0,a.jsx)("div",{className:"p-3 bg-emerald-50 rounded-xl text-emerald-600 group-hover:scale-110 transition-transform",children:(0,a.jsx)(i.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-500 font-bold",children:N("activeCenters")}),(0,a.jsx)("p",{className:"text-2xl font-black text-slate-900",children:S.length})]})]}),(0,a.jsxs)("div",{className:(0,k.cn)("bg-white p-5 rounded-2xl border border-slate-100 shadow-lg flex items-center group hover:border-blue-200 transition-colors",_?"space-x-4 space-x-reverse":"space-x-4"),children:[(0,a.jsx)("div",{className:"p-3 bg-blue-50 rounded-xl text-blue-600 group-hover:scale-110 transition-transform",children:(0,a.jsx)(d.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-500 font-bold",children:N("branches")}),(0,a.jsx)("p",{className:"text-2xl font-black text-slate-900",children:S.length})]})]})]}),(0,a.jsxs)(r.P.div,{className:"bg-white p-6 rounded-2xl shadow-lg border border-slate-100 flex flex-col md:flex-row gap-4 items-center justify-between",whileHover:{y:-2},children:[(0,a.jsxs)("div",{className:"flex-1 relative w-full md:w-auto",children:[(0,a.jsx)(o.A,{className:(0,k.cn)("absolute top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5",_?"right-4":"left-4")}),(0,a.jsx)("input",{type:"text",placeholder:N("searchPlaceholder"),value:D,onChange:e=>M(e.target.value),className:(0,k.cn)("w-full bg-slate-50 border border-slate-200 rounded-xl py-3 focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition-all text-sm",_?"pr-12 pl-4":"pl-12 pr-4")})]}),(0,a.jsxs)("button",{onClick:()=>Q(),className:(0,k.cn)("bg-amber-600 hover:bg-amber-700 text-white px-6 py-3 rounded-xl font-bold transition-all flex items-center shadow-lg shadow-amber-200 text-sm whitespace-nowrap",_?"space-x-2 space-x-reverse":"space-x-2"),children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:N("addNewCenter")})]})]}),(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl border border-slate-100 overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:(0,k.cn)("w-full border-collapse min-w-[600px]",_?"text-right":"text-left"),children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-slate-50 border-b border-slate-100",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-black text-slate-400 uppercase tracking-wider",children:"#"}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-black text-slate-400 uppercase tracking-wider",children:N("centerCode")}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-black text-slate-400 uppercase tracking-wider",children:N("centerName")}),(0,a.jsx)("th",{className:"px-6 py-4 text-xs font-black text-slate-400 uppercase tracking-wider text-center",children:N("actions")})]})}),(0,a.jsx)("tbody",{children:(0,a.jsx)(c.N,{mode:"popLayout",children:H.length>0?H.map((e,s)=>(0,a.jsxs)(r.P.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},transition:{delay:.03*s},className:"border-b border-slate-50 hover:bg-slate-50/50 transition-colors group",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-xs font-black text-slate-500 group-hover:bg-amber-600 group-hover:text-white transition-colors",children:s+1})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:(0,k.cn)("flex items-center",_?"space-x-2 space-x-reverse":"space-x-2"),children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-slate-300"}),(0,a.jsx)("span",{className:"font-mono font-bold text-slate-700 bg-slate-100 px-3 py-1 rounded-lg text-sm",children:e.center_code})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:(0,k.cn)("flex items-center",_?"space-x-3 space-x-reverse":"space-x-3"),children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-amber-50",children:(0,a.jsx)(d.A,{className:"w-4 h-4 text-amber-600"})}),(0,a.jsx)("span",{className:"font-bold text-slate-900",children:e.center_name})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>Q(e),className:"p-2 rounded-xl bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white transition-all",title:N("edit"),children:(0,a.jsx)(h.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>U(e.id),className:"p-2 rounded-xl bg-red-50 text-red-600 hover:bg-red-600 hover:text-white transition-all",title:N("delete"),children:(0,a.jsx)(p.A,{className:"w-4 h-4"})})]})})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"px-6 py-20 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4 text-slate-400",children:[(0,a.jsx)(b.A,{className:"w-16 h-16 opacity-30"}),(0,a.jsx)("p",{className:"font-bold text-lg",children:N("noMatchingCenters")}),(0,a.jsx)("p",{className:"text-sm",children:N("noMatchingCentersDesc")})]})})})})})]})}),(0,a.jsx)("div",{className:"bg-slate-50 px-6 py-4 border-t border-slate-100 flex items-center justify-between",children:(0,a.jsxs)("p",{className:"text-sm text-slate-500 font-bold",children:[N("view")," ",(0,a.jsx)("span",{className:"text-slate-900",children:H.length})," ",N("outOf")," ",(0,a.jsx)("span",{className:"text-slate-900",children:S.length})," ",N("centersCount")]})})]})]}),(0,a.jsx)(c.N,{children:R&&(0,a.jsxs)("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4",dir:_?"rtl":"ltr",children:[(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>P(!1),className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),(0,a.jsxs)(r.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-lg bg-white rounded-3xl shadow-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-amber-700 to-orange-600 p-6 text-white flex items-center justify-between",children:[(0,a.jsxs)("div",{className:(0,k.cn)("flex items-center",_?"space-x-4 space-x-reverse":"space-x-4"),children:[(0,a.jsx)("div",{className:"p-2.5 bg-white/10 rounded-xl",children:E?(0,a.jsx)(h.A,{className:"w-5 h-5"}):(0,a.jsx)(x.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:E?N("editCenter"):N("addNewCenterTitle")}),(0,a.jsx)("p",{className:"text-amber-100 text-xs",children:N("fillRequiredData")})]})]}),(0,a.jsx)("button",{onClick:()=>P(!1),className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:(0,a.jsx)(u.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("form",{onSubmit:Y,className:"p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:(0,k.cn)("text-xs font-black text-slate-500 uppercase tracking-wider",_?"mr-1":"ml-1"),children:N("centerCode")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:(0,k.cn)("absolute top-1/2 -translate-y-1/2 text-slate-300 w-4 h-4",_?"right-4":"left-4")}),(0,a.jsx)("input",{type:"text",required:!0,value:T.center_code,onChange:e=>F({...T,center_code:e.target.value}),placeholder:N("codeExample"),className:(0,k.cn)("w-full bg-slate-50 border border-slate-200 rounded-xl py-3 focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition-all text-sm font-bold",_?"pr-11 pl-4":"pl-11 pr-4")})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:(0,k.cn)("text-xs font-black text-slate-500 uppercase tracking-wider",_?"mr-1":"ml-1"),children:N("centerName")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.A,{className:(0,k.cn)("absolute top-1/2 -translate-y-1/2 text-slate-300 w-4 h-4",_?"right-4":"left-4")}),(0,a.jsx)("input",{type:"text",required:!0,value:T.center_name,onChange:e=>F({...T,center_name:e.target.value}),placeholder:N("nameExample"),className:(0,k.cn)("w-full bg-slate-50 border border-slate-200 rounded-xl py-3 focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition-all text-sm font-bold",_?"pr-11 pl-4":"pl-11 pr-4")})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{type:"submit",disabled:q,className:(0,k.cn)("flex-1 bg-amber-600 hover:bg-amber-700 text-white py-3 rounded-xl font-bold transition-all flex items-center justify-center disabled:opacity-50 shadow-lg shadow-amber-200",_?"space-x-2 space-x-reverse":"space-x-2"),children:q?(0,a.jsx)("div",{className:"h-5 w-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:E?N("saveChanges"):N("addCenter")})]})}),(0,a.jsx)("button",{type:"button",onClick:()=>P(!1),className:"px-6 bg-slate-100 text-slate-600 py-3 rounded-xl font-bold hover:bg-slate-200 transition-all",children:N("cancel")})]})]})]})]})}),(0,a.jsx)(c.N,{children:O&&(0,a.jsxs)("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4",dir:_?"rtl":"ltr",children:[(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>U(null),className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),(0,a.jsxs)(r.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(j.A,{className:"w-8 h-8 text-red-600"})}),(0,a.jsx)("h3",{className:"text-xl font-black text-slate-900 mb-2",children:N("confirmDelete")}),(0,a.jsx)("p",{className:"text-slate-500 mb-8",children:N("confirmDeleteDesc")}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>$(O),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-all",children:N("yesDelete")}),(0,a.jsx)("button",{onClick:()=>U(null),className:"flex-1 bg-slate-100 text-slate-600 py-3 rounded-xl font-bold hover:bg-slate-200 transition-all",children:N("cancel")})]})]})]})})]})}},64269:(e,s,t)=>{"use strict";t.d(s,{cn:()=>r});var a=t(2821),l=t(75889);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.QP)((0,a.$)(s))}}},e=>{e.O(0,[2418,4909,8720,927,3884,8441,1255,7358],()=>e(e.s=9504)),_N_E=e.O()}]);