(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9305],{59392:(e,t,a)=>{Promise.resolve().then(a.bind(a,65429))},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2821),i=a(75889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,s.$)(t))}},65429:(e,t,a)=>{"use strict";a.d(t,{DashboardLayout:()=>eQ});var s=a(95155),i=a(12115),l=a(20063),r=a(34544),n=a(26497),o=a(65993),c=a(19408),d=a(46826),m=a(5370),x=a(86651),h=a(37586),u=a(85998),b=a(26617),p=a(48055),g=a(91169),f=a(53409),w=a(60167),j=a(89715),N=a(78519),v=a(24947),y=a(55136),A=a(42041),k=a(80534),z=a(97079),S=a(87454),_=a(47937),P=a(92927),C=a(85843),T=a(80647),I=a(90368),M=a(27937),H=a(46398),E=a(95740),R=a(56154),D=a(64269),F=a(83884);let K=[{titleKey:"home",href:"/dashboard",icon:o.A,gradient:"from-blue-500 to-cyan-500"},{titleKey:"companyRequests",href:"/admin/companies",icon:c.A,adminOnly:!0,gradient:"from-violet-500 to-purple-500"},{titleKey:"addNewCompany",href:"/admin/companies/new",icon:d.A,adminOnly:!0,gradient:"from-emerald-500 to-green-500"},{titleKey:"generateToken",href:"/admin/generate-token",icon:m.A,adminOnly:!0,gradient:"from-amber-500 to-yellow-500"},{titleKey:"searchToken",href:"/admin/search-token",icon:x.A,adminOnly:!0,gradient:"from-sky-500 to-blue-500"},{titleKey:"technicalSupport",href:"/admin/chat",icon:h.A,adminOnly:!0,gradient:"from-indigo-500 to-violet-500"},{titleKey:"adminNotifications",href:"/admin/notifications",icon:u.A,adminOnly:!0,gradient:"from-rose-500 to-pink-500"},{titleKey:"subscriptionPlans",href:"/admin/subscriptions",icon:b.A,adminOnly:!0,gradient:"from-violet-500 to-purple-500"},{titleKey:"specialSalaries",href:"/admin/special-salaries",icon:p.A,adminOnly:!0,dividerAfter:!0,gradient:"from-yellow-500 to-orange-500"},{titleKey:"hrManagement",href:"/hr",icon:g.A,permission:"employees_module",gradient:"from-blue-500 to-indigo-500"},{titleKey:"customersList",href:"/customers",icon:g.A,permission:"clients_module",gradient:"from-cyan-500 to-teal-500"},{titleKey:"financialVouchers",href:"/financial-vouchers",icon:f.A,permission:"receipts_module",gradient:"from-indigo-500 to-purple-500"},{titleKey:"salaryPayrolls",href:"/salary-payrolls",icon:w.A,permission:"salary_payrolls_module",gradient:"from-teal-500 to-emerald-500"},{titleKey:"taxInvoices",href:"/sales-invoices",icon:j.A,permission:"sales_module",gradient:"from-blue-500 to-sky-500"},{titleKey:"creditNotes",href:"/credit-notes",icon:N.A,permission:"credit_notes_module",gradient:"from-red-500 to-rose-500"},{titleKey:"fleetManagement",href:"/fleet",icon:v.A,permission:"sales_module",gradient:"from-yellow-500 to-amber-500"},{titleKey:"ecommerce",href:"/ecommerce",icon:y.A,permission:"ecommerce_orders_module",gradient:"from-emerald-500 to-teal-500"},{titleKey:"monthlyCommissions",href:"/hr/commissions",icon:A.A,permission:"monthly_commissions_module",gradient:"from-amber-500 to-orange-500"},{titleKey:"expensesCenter",href:"/expenses",icon:k.A,permission:"expenses_module",gradient:"from-red-500 to-orange-500"},{titleKey:"journalEntries",href:"/journal-entries",icon:z.A,permission:"journal_entries_module",gradient:"from-violet-500 to-indigo-500"},{titleKey:"profitLossSummary",href:"/profit-loss",icon:S.A,permission:"income_report_module",gradient:"from-sky-500 to-blue-500"},{titleKey:"accountsCenter",href:"/accounts",icon:_.A,permission:"accounts_module",gradient:"from-orange-500 to-amber-500"},{titleKey:"costCenters",href:"/cost-centers",icon:P.A,permission:"cost_centers_module",gradient:"from-slate-500 to-gray-500"},{titleKey:"generalLedger",href:"/general-ledger",icon:_.A,permission:"ledger_module",gradient:"from-zinc-500 to-neutral-500"},{titleKey:"trialBalance",href:"/trial-balance",icon:C.A,permission:"trial_balance_module",gradient:"from-gray-500 to-slate-500"},{titleKey:"incomeStatement",href:"/income-statement",icon:k.A,permission:"income_statement_module",gradient:"from-emerald-500 to-teal-500"},{titleKey:"balanceSheet",href:"/balance-sheet",icon:j.A,permission:"balance_sheet_module",gradient:"from-blue-500 to-cyan-500"},{titleKey:"subUsersManagement",href:"/sub-users",icon:g.A,permission:"sub_users_module",gradient:"from-violet-500 to-purple-500"},{titleKey:"taxSettings",href:"/tax-settings",icon:T.A,permission:"balance_sheet_module",gradient:"from-rose-500 to-pink-500"}];function L(e){let{userRole:t,permissions:a={},userType:o}=e,[c,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)(null),h=(0,l.usePathname)(),u=(0,l.useRouter)(),b="admin"===t,{isRTL:p}=(0,F.Y)(),g=(0,F.c)("sidebar");(0,i.useEffect)(()=>{d(!0)},[]);let f=K.filter(e=>(!e.adminOnly||!!b)&&(!e.permission||!!b||1===a[e.permission])),w={hidden:{opacity:0,x:p?20:-20},visible:{opacity:1,x:0}},j=p?I.A:M.A;return(0,s.jsxs)("div",{className:"w-64 h-screen overflow-hidden flex flex-col relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-transparent"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4wMiI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMiIvPjwvZz48L2c+PC9zdmc+')] opacity-50"}),(0,s.jsx)("div",{className:(0,D.cn)("absolute top-0 w-64 h-64 bg-gradient-to-br from-blue-600/10 to-transparent rounded-full blur-3xl",p?"right-0":"left-0")}),(0,s.jsx)("div",{className:(0,D.cn)("absolute bottom-0 w-64 h-64 bg-gradient-to-tr from-purple-600/10 to-transparent rounded-full blur-3xl",p?"left-0":"right-0")}),(0,s.jsx)("div",{className:(0,D.cn)("absolute top-0 bottom-0 w-[1px] bg-gradient-to-b from-white/5 via-white/10 to-white/5",p?"left-0":"right-0")}),(0,s.jsx)("div",{className:"relative z-10 p-5 border-b border-white/5",children:c&&(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col items-center gap-4",children:[(0,s.jsxs)(r.P.div,{whileHover:{scale:1.05,rotate:[0,-5,5,0]},transition:{duration:.5},className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl blur-xl opacity-50 animate-pulse"}),(0,s.jsx)("div",{className:"relative bg-gradient-to-br from-blue-500 via-blue-600 to-purple-600 p-4 rounded-2xl shadow-2xl shadow-blue-500/30 border border-white/10",children:(0,s.jsx)(H.A,{size:28,className:"text-white drop-shadow-lg"})}),(0,s.jsx)(r.P.div,{className:(0,D.cn)("absolute -top-1",p?"-left-1":"-right-1"),animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:(0,s.jsx)(E.A,{size:14,className:"text-amber-400"})})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-sm font-black tracking-wider bg-gradient-to-r from-white via-blue-200 to-white bg-clip-text text-transparent",children:"LOGISTICS PRO"}),(0,s.jsx)("p",{className:"text-[9px] text-white/30 font-medium tracking-[0.2em] mt-1",children:"ENTERPRISE EDITION"})]})]})}),(0,s.jsx)("nav",{className:"relative z-10 flex-1 p-3 overflow-y-auto custom-scrollbar",children:(0,s.jsx)(r.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.02}}},initial:"hidden",animate:"visible",className:"space-y-1",children:f.map(e=>{let t=h===e.href||h.startsWith(e.href+"/"),a=m===e.href;return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(r.P.div,{variants:w,children:(0,s.jsx)("div",{onClick:()=>{u.push(e.href)},className:"cursor-pointer",children:(0,s.jsxs)(r.P.div,{onHoverStart:()=>x(e.href),onHoverEnd:()=>x(null),whileTap:{scale:.98},className:(0,D.cn)("relative flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-300 group overflow-hidden",t?"bg-white/10 backdrop-blur-xl border border-white/20 shadow-lg shadow-blue-500/10":"hover:bg-white/5 border border-transparent"),children:[t&&(0,s.jsx)(r.P.div,{layoutId:"active-sidebar-bg",className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10",transition:{type:"spring",bounce:.2,duration:.6}}),(0,s.jsx)(n.N,{children:(t||a)&&(0,s.jsx)(r.P.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:3},exit:{opacity:0,width:0},className:(0,D.cn)("absolute top-2 bottom-2 rounded-full",p?"right-0":"left-0",t?"bg-gradient-to-b ".concat(e.gradient):"bg-white/30")})}),(0,s.jsx)("div",{className:(0,D.cn)("relative p-2 rounded-lg transition-all duration-300",t?"bg-gradient-to-br ".concat(e.gradient," shadow-lg"):"bg-white/5 group-hover:bg-white/10"),children:(0,s.jsx)(e.icon,{size:16,className:(0,D.cn)("transition-all duration-300",t?"text-white":"text-white/50 group-hover:text-white/80")})}),(0,s.jsx)("span",{className:(0,D.cn)("relative font-bold text-[12px] tracking-wide transition-all duration-300",t?"text-white":"text-white/50 group-hover:text-white/90"),children:g(e.titleKey)}),t&&(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},className:(0,D.cn)("absolute",p?"right-3":"left-3"),children:(0,s.jsx)(j,{size:14,className:"text-white/50"})})]})})}),e.dividerAfter&&(0,s.jsxs)("div",{className:"relative my-4 mx-4",children:[(0,s.jsx)("div",{className:"h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"}),(0,s.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 -top-1.5 bg-[#0d1525] px-2",children:(0,s.jsx)(R.A,{size:10,className:"text-white/20"})})]})]},e.href)})})})]})}var q=a(52987),O=a(35626),B=a(9540),G=a(50700),Q=a(26983),U=a(21873),Z=a(20508),Y=a(24033),J=a(65229),W=a(12932),V=a(53511),X=a(85921),$=a(62332),ee=a(2068),et=a(77247),ea=a(35130),es=a(59e3),ei=a(68854),el=a(23327),er=a(89559),en=a(15870),eo=a(84926),ec=a(17910),ed=a(39347),em=a(61362),ex=a(21786),eh=a(6132),eu=a(23664),eb=a(97624),ep=a(37354),eg=a(18756),ef=a(6191),ew=a(43465),ej=a(18085),eN=a(71360),ev=a(52056),ey=a(35299),eA=a(57828),ek=a(93499),ez=a(5917),eS=a(75426),e_=a(54690),eP=a(18720);function eC(){let{locale:e,setLocale:t,isRTL:a}=(0,F.Y)();return(0,s.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{t("ar"===e?"en":"ar")},className:"relative flex items-center gap-2 h-10 px-1 bg-slate-800/80 hover:bg-slate-700/80 rounded-full transition-all border border-white/10 overflow-hidden",children:[(0,s.jsx)(r.P.div,{className:"absolute inset-y-1 w-[calc(50%-2px)] bg-gradient-to-r from-violet-500 to-purple-500 rounded-full shadow-lg",animate:{x:a?2:"calc(100% + 2px)"},transition:{type:"spring",stiffness:500,damping:30}}),(0,s.jsx)("div",{className:"relative z-10 flex items-center gap-1 px-3 py-1.5",children:(0,s.jsx)("span",{className:"text-xs font-bold transition-colors ".concat(a?"text-white":"text-white/50"),children:"عربي"})}),(0,s.jsx)("div",{className:"relative z-10 flex items-center gap-1 px-3 py-1.5",children:(0,s.jsx)("span",{className:"text-xs font-bold transition-colors ".concat(a?"text-white/50":"text-white"),children:"EN"})})]})}let eT=[{number:1,name:"الفاتحة",englishName:"Al-Fatiha"},{number:2,name:"البقرة",englishName:"Al-Baqarah"},{number:3,name:"آل عمران",englishName:"Aal-Imran"},{number:4,name:"النساء",englishName:"An-Nisa"},{number:5,name:"المائدة",englishName:"Al-Ma'idah"},{number:6,name:"الأنعام",englishName:"Al-An'am"},{number:7,name:"الأعراف",englishName:"Al-A'raf"},{number:8,name:"الأنفال",englishName:"Al-Anfal"},{number:9,name:"التوبة",englishName:"At-Tawbah"},{number:10,name:"يونس",englishName:"Yunus"},{number:11,name:"هود",englishName:"Hud"},{number:12,name:"يوسف",englishName:"Yusuf"},{number:13,name:"الرعد",englishName:"Ar-Ra'd"},{number:14,name:"إبراهيم",englishName:"Ibrahim"},{number:15,name:"الحجر",englishName:"Al-Hijr"},{number:16,name:"النحل",englishName:"An-Nahl"},{number:17,name:"الإسراء",englishName:"Al-Isra"},{number:18,name:"الكهف",englishName:"Al-Kahf"},{number:19,name:"مريم",englishName:"Maryam"},{number:20,name:"طه",englishName:"Ta-Ha"},{number:21,name:"الأنبياء",englishName:"Al-Anbiya"},{number:22,name:"الحج",englishName:"Al-Hajj"},{number:23,name:"المؤمنون",englishName:"Al-Mu'minun"},{number:24,name:"النور",englishName:"An-Nur"},{number:25,name:"الفرقان",englishName:"Al-Furqan"},{number:26,name:"الشعراء",englishName:"Ash-Shu'ara"},{number:27,name:"النمل",englishName:"An-Naml"},{number:28,name:"القصص",englishName:"Al-Qasas"},{number:29,name:"العنكبوت",englishName:"Al-Ankabut"},{number:30,name:"الروم",englishName:"Ar-Rum"},{number:31,name:"لقمان",englishName:"Luqman"},{number:32,name:"السجدة",englishName:"As-Sajdah"},{number:33,name:"الأحزاب",englishName:"Al-Ahzab"},{number:34,name:"سبأ",englishName:"Saba"},{number:35,name:"فاطر",englishName:"Fatir"},{number:36,name:"يس",englishName:"Ya-Sin"},{number:37,name:"الصافات",englishName:"As-Saffat"},{number:38,name:"ص",englishName:"Sad"},{number:39,name:"الزمر",englishName:"Az-Zumar"},{number:40,name:"غافر",englishName:"Ghafir"},{number:41,name:"فصلت",englishName:"Fussilat"},{number:42,name:"الشورى",englishName:"Ash-Shura"},{number:43,name:"الزخرف",englishName:"Az-Zukhruf"},{number:44,name:"الدخان",englishName:"Ad-Dukhan"},{number:45,name:"الجاثية",englishName:"Al-Jathiyah"},{number:46,name:"الأحقاف",englishName:"Al-Ahqaf"},{number:47,name:"محمد",englishName:"Muhammad"},{number:48,name:"الفتح",englishName:"Al-Fath"},{number:49,name:"الحجرات",englishName:"Al-Hujurat"},{number:50,name:"ق",englishName:"Qaf"},{number:51,name:"الذاريات",englishName:"Adh-Dhariyat"},{number:52,name:"الطور",englishName:"At-Tur"},{number:53,name:"النجم",englishName:"An-Najm"},{number:54,name:"القمر",englishName:"Al-Qamar"},{number:55,name:"الرحمن",englishName:"Ar-Rahman"},{number:56,name:"الواقعة",englishName:"Al-Waqi'ah"},{number:57,name:"الحديد",englishName:"Al-Hadid"},{number:58,name:"المجادلة",englishName:"Al-Mujadilah"},{number:59,name:"الحشر",englishName:"Al-Hashr"},{number:60,name:"الممتحنة",englishName:"Al-Mumtahanah"},{number:61,name:"الصف",englishName:"As-Saff"},{number:62,name:"الجمعة",englishName:"Al-Jumu'ah"},{number:63,name:"المنافقون",englishName:"Al-Munafiqun"},{number:64,name:"التغابن",englishName:"At-Taghabun"},{number:65,name:"الطلاق",englishName:"At-Talaq"},{number:66,name:"التحريم",englishName:"At-Tahrim"},{number:67,name:"الملك",englishName:"Al-Mulk"},{number:68,name:"القلم",englishName:"Al-Qalam"},{number:69,name:"الحاقة",englishName:"Al-Haqqah"},{number:70,name:"المعارج",englishName:"Al-Ma'arij"},{number:71,name:"نوح",englishName:"Nuh"},{number:72,name:"الجن",englishName:"Al-Jinn"},{number:73,name:"المزمل",englishName:"Al-Muzzammil"},{number:74,name:"المدثر",englishName:"Al-Muddaththir"},{number:75,name:"القيامة",englishName:"Al-Qiyamah"},{number:76,name:"الإنسان",englishName:"Al-Insan"},{number:77,name:"المرسلات",englishName:"Al-Mursalat"},{number:78,name:"النبأ",englishName:"An-Naba"},{number:79,name:"النازعات",englishName:"An-Nazi'at"},{number:80,name:"عبس",englishName:"Abasa"},{number:81,name:"التكوير",englishName:"At-Takwir"},{number:82,name:"الانفطار",englishName:"Al-Infitar"},{number:83,name:"المطففين",englishName:"Al-Mutaffifin"},{number:84,name:"الانشقاق",englishName:"Al-Inshiqaq"},{number:85,name:"البروج",englishName:"Al-Buruj"},{number:86,name:"الطارق",englishName:"At-Tariq"},{number:87,name:"الأعلى",englishName:"Al-A'la"},{number:88,name:"الغاشية",englishName:"Al-Ghashiyah"},{number:89,name:"الفجر",englishName:"Al-Fajr"},{number:90,name:"البلد",englishName:"Al-Balad"},{number:91,name:"الشمس",englishName:"Ash-Shams"},{number:92,name:"الليل",englishName:"Al-Layl"},{number:93,name:"الضحى",englishName:"Ad-Duha"},{number:94,name:"الشرح",englishName:"Ash-Sharh"},{number:95,name:"التين",englishName:"At-Tin"},{number:96,name:"العلق",englishName:"Al-Alaq"},{number:97,name:"القدر",englishName:"Al-Qadr"},{number:98,name:"البينة",englishName:"Al-Bayyinah"},{number:99,name:"الزلزلة",englishName:"Az-Zalzalah"},{number:100,name:"العاديات",englishName:"Al-Adiyat"},{number:101,name:"القارعة",englishName:"Al-Qari'ah"},{number:102,name:"التكاثر",englishName:"At-Takathur"},{number:103,name:"العصر",englishName:"Al-Asr"},{number:104,name:"الهمزة",englishName:"Al-Humazah"},{number:105,name:"الفيل",englishName:"Al-Fil"},{number:106,name:"قريش",englishName:"Quraysh"},{number:107,name:"الماعون",englishName:"Al-Ma'un"},{number:108,name:"الكوثر",englishName:"Al-Kawthar"},{number:109,name:"الكافرون",englishName:"Al-Kafirun"},{number:110,name:"النصر",englishName:"An-Nasr"},{number:111,name:"المسد",englishName:"Al-Masad"},{number:112,name:"الإخلاص",englishName:"Al-Ikhlas"},{number:113,name:"الفلق",englishName:"Al-Falaq"},{number:114,name:"الناس",englishName:"An-Nas"}];function eI(e){let{user:t,onToggleSidebar:a,unreadChatCount:m=0,subscriptionData:p}=e,g=(0,F.c)("header"),f=(0,F.c)("common"),{locale:w,isRTL:j}=(0,F.Y)(),[N,v]=(0,i.useState)(!1),[y,A]=(0,i.useState)(new Date),[k,z]=(0,i.useState)(j?"الرياض، السعودية":"Riyadh, Saudi Arabia"),[S,C]=(0,i.useState)("Riyadh"),[T,I]=(0,i.useState)("Saudi Arabia"),[M,E]=(0,i.useState)(!1),[K,L]=(0,i.useState)(!1),[eI,eM]=(0,i.useState)(!1),[eH,eE]=(0,i.useState)(!1),[eR,eD]=(0,i.useState)(""),[eF,eK]=(0,i.useState)(!1),[eL,eq]=(0,i.useState)(!1),[eO,eB]=(0,i.useState)([]),[eG,eQ]=(0,i.useState)(0),[eU,eZ]=(0,i.useState)(null),[eY,eJ]=(0,i.useState)(!1),[eW,eV]=(0,i.useState)(null),[eX,e$]=(0,i.useState)(!1),[e0,e1]=(0,i.useState)(!1),[e5,e2]=(0,i.useState)(0),[e4,e3]=(0,i.useState)(null),[e9,e6]=(0,i.useState)(!1),[e8,e7]=(0,i.useState)(!1),[te,tt]=(0,i.useState)(null),[ta,ts]=(0,i.useState)([]),[ti,tl]=(0,i.useState)([]),[tr,tn]=(0,i.useState)(null),[to,tc]=(0,i.useState)(null),[td,tm]=(0,i.useState)(1),[tx,th]=(0,i.useState)(1),[tu,tb]=(0,i.useState)(!1),[tp,tg]=(0,i.useState)(!1),[tf,tw]=(0,i.useState)(!1),[tj,tN]=(0,i.useState)("INBOX"),[tv,ty]=(0,i.useState)(!1),[tA,tk]=(0,i.useState)([]),[tz,tS]=(0,i.useState)(null),[t_,tP]=(0,i.useState)([]),[tC,tT]=(0,i.useState)(!1),[tI,tM]=(0,i.useState)(0),[tH,tE]=(0,i.useState)(!1),[tR,tD]=(0,i.useState)(!1),tF=(0,i.useRef)(null);(0,i.useEffect)(()=>{tF.current&&(tF.current.volume=td)},[td]);let tK=(0,l.usePathname)(),tL=(0,l.useRouter)();(0,i.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/admin/notifications?limit=5"),t=await e.json();if(t.success){eB(t.notifications);let e=parseInt(localStorage.getItem("last_admin_notification_id")||"0"),a=t.notifications.filter(t=>t.id>e).length;eQ(a)}}catch(e){console.error("Error fetching header notifications:",e)}},a=async()=>{if((null==t?void 0:t.company_id)&&!tH){tE(!0);try{let e=await fetch("/api/email/accounts?company_id=".concat(t.company_id)),a=await e.json();if(a.accounts){tk(a.accounts),a.accounts.length>0&&!tz&&tS(a.accounts[0]);let e=[];for(let s of a.accounts)try{let a=await fetch("/api/email/fetch?accountId=".concat(s.id,"&company_id=").concat(t.company_id,"&action=unread"));if(a.ok){let t=await a.json();e.push(t.unreadCount||0)}else e.push(0)}catch(t){console.error("Error fetching unread for ".concat(s.email,":"),t),e.push(0)}let s=e.reduce((e,t)=>e+t,0);tM(s)}}catch(e){console.error("Error fetching email data:",e)}finally{tE(!1)}}};e(),a();let s=setInterval(()=>{e(),a()},6e4);return()=>clearInterval(s)},[null==t?void 0:t.company_id]),(0,i.useEffect)(()=>{v(!0);let e=setInterval(()=>{A(new Date)},1e3);return()=>clearInterval(e)},[]),(0,i.useEffect)(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async e=>{let t=e.coords.latitude,a=e.coords.longitude;e3({lat:t,lng:a});try{let e=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(t,"&lon=").concat(a,"&accept-language=ar")),s=(await e.json()).address,i=s.city||s.town||s.village||s.state||"",l=s.country||"السعودية";C(i),I(l),z("".concat(i,"، ").concat(l))}catch(e){z("الرياض، السعودية")}},()=>{z("الرياض، السعودية"),e3({lat:24.7136,lng:46.6753})}):e3({lat:24.7136,lng:46.6753})},[]),(0,i.useEffect)(()=>{e4&&(async()=>{try{let e=new Date,t="".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear()),a=await fetch("https://api.aladhan.com/v1/timings/".concat(t,"?latitude=").concat(e4.lat,"&longitude=").concat(e4.lng,"&method=4")),s=await a.json();200===s.code&&eZ(s.data.timings)}catch(e){console.error("Error fetching prayer times:",e)}})()},[e4]);let tq=(0,i.useCallback)(()=>{if(!eU)return;let e=[{name:j?"الفجر":"Fajr",time:eU.Fajr},{name:j?"الشروق":"Sunrise",time:eU.Sunrise},{name:j?"الظهر":"Dhuhr",time:eU.Dhuhr},{name:j?"العصر":"Asr",time:eU.Asr},{name:j?"المغرب":"Maghrib",time:eU.Maghrib},{name:j?"العشاء":"Isha",time:eU.Isha}],t=new Date,a=60*t.getHours()+t.getMinutes();for(let t of e){let[e,s]=t.time.split(":").map(Number),i=60*e+s;if(i>a){let e=i-a,s=Math.floor(e/60),l=e%60;eV({name:t.name,time:t.time,remaining:s>0?"".concat(s,"س ").concat(l,"د"):"".concat(l,"د")});return}}eV({name:e[0].name,time:e[0].time,remaining:j?"غداً":"Tomorrow"})},[eU,j]);(0,i.useEffect)(()=>{tq();let e=setInterval(tq,6e4);return()=>clearInterval(e)},[tq]),(0,i.useEffect)(()=>{let e=localStorage.getItem("quran_last_surah");e&&e2(parseInt(e))},[]),(0,i.useEffect)(()=>{localStorage.setItem("quran_last_surah",e5.toString())},[e5]);let tO=e=>{let t=eT[e].number.toString().padStart(3,"0");tF.current&&(tF.current.src="https://server8.mp3quran.net/afs/".concat(t,".mp3"),tF.current.play(),e1(!0),e2(e))},tB=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INBOX";if(null==t?void 0:t.company_id){tT(!0),tN(a);try{let s=await fetch("/api/email/fetch?accountId=".concat(e,"&company_id=").concat(t.company_id,"&folder=").concat(a,"&limit=30")),i=await s.json();i.emails?tP(i.emails):i.error&&(eP.oR.error(i.error),tP([]))}catch(e){console.error("Error fetching emails:",e),eP.oR.error(j?"خطأ في جلب الرسائل":"Error fetching emails"),tP([])}finally{tT(!1)}}},tG=async e=>{if(e.preventDefault(),!(null==t?void 0:t.company_id))return;tD(!0);let a=new FormData(e.currentTarget),s={company_id:t.company_id,email:a.get("email"),password:a.get("password"),provider:a.get("provider"),imap_host:a.get("imap_host"),imap_port:parseInt(a.get("imap_port")||"993"),smtp_host:a.get("smtp_host"),smtp_port:parseInt(a.get("smtp_port")||"465")};try{let e=await fetch("/api/email/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await e.json();t.success?(eP.oR.success(j?"تم إضافة الحساب بنجاح":"Account added successfully"),tk([...tA,t.account]),ty(!1)):eP.oR.error(t.error||(j?"حدث خطأ":"An error occurred"))}catch(e){eP.oR.error(j?"خطأ في الاتصال":"Connection error")}finally{tD(!1)}},tQ=async e=>{if((null==t?void 0:t.company_id)&&confirm(j?"هل أنت متأكد من حذف هذا الحساب؟":"Are you sure you want to delete this account?"))try{let a=await fetch("/api/email/accounts?id=".concat(e,"&company_id=").concat(t.company_id),{method:"DELETE"}),s=await a.json();s.success?(eP.oR.success(j?"تم حذف الحساب":"Account deleted"),tk(tA.filter(t=>t.id!==e)),(null==tz?void 0:tz.id)===e&&(tS(tA.find(t=>t.id!==e)||null),tP([]))):eP.oR.error(s.error)}catch(e){eP.oR.error(j?"خطأ في الحذف":"Error deleting account")}};(0,i.useEffect)(()=>{tp&&tz&&0===t_.length&&tB(tz.id)},[tp,tz]);let tU=async()=>{try{let e=await fetch("/api/subscriptions"),t=await e.json();t.success&&(ts(t.plans),tl(t.bankAccounts),tn(t.currentSubscription))}catch(e){console.error("Error fetching subscription data:",e)}},tZ=async e=>{if(e.preventDefault(),!te)return;tb(!0);let t=new FormData(e.currentTarget);try{let e=await fetch("/api/subscriptions/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan_id:te.plan.id,bank_account_id:t.get("bank_account_id"),receipt_image:to,request_type:te.type,notes:t.get("notes")})}),a=await e.json();a.success?(eP.oR.success(j?"تم إرسال طلب الدفع بنجاح":"Payment request sent successfully"),tt(null),tc(null),e7(!1),e6(!1)):eP.oR.error(a.error||(j?"حدث خطأ":"Error occurred"))}catch(e){eP.oR.error(j?"حدث خطأ في الاتصال":"Connection error")}tb(!1)},tY=()=>{tU(),e6(!0),eK(!1)},tJ=()=>{tU(),e7(!0),e6(!1)},tW=j?q.A:O.A;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:"sticky top-0 z-[100] w-full no-print",children:(0,s.jsxs)("div",{className:"relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-transparent"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"}),(0,s.jsx)("div",{className:"relative z-10 w-full mx-auto px-4 md:px-6 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"lg:hidden p-2.5 bg-white/5 hover:bg-white/10 rounded-xl transition-all text-white/70 border border-white/10",children:(0,s.jsx)(B.A,{size:20})}),"/dashboard"!==tK&&(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02,x:j?3:-3},whileTap:{scale:.98},onClick:()=>tL.back(),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10 group",children:[(0,s.jsx)(tW,{size:16,className:(0,D.cn)("text-white/60 transition-transform",j?"group-hover:translate-x-1":"group-hover:-translate-x-1")}),(0,s.jsx)("span",{className:"text-[11px] font-bold text-white/60",children:f("back")})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>tL.push("/dashboard"),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10 group",children:[(0,s.jsx)(o.A,{size:16,className:"text-white/60 group-hover:scale-110 transition-transform"}),(0,s.jsx)("span",{className:"text-[11px] font-bold text-white/60",children:j?"الرئيسية":"Home"})]})]})]}),(0,s.jsx)("div",{className:"flex-1 max-w-xl hidden md:block",children:(0,s.jsxs)(r.P.div,{animate:{boxShadow:eH?"0 0 0 2px rgba(59, 130, 246, 0.3), 0 4px 20px rgba(0, 0, 0, 0.3)":"0 0 0 1px rgba(255, 255, 255, 0.05)"},className:(0,D.cn)("relative flex items-center gap-3 px-4 py-2.5 rounded-2xl transition-all duration-300","bg-white/5 border border-white/10",eH&&"bg-white/10 border-blue-500/30"),children:[(0,s.jsx)(x.A,{size:16,className:(0,D.cn)("transition-colors",eH?"text-blue-400":"text-white/30")}),(0,s.jsx)("input",{type:"text",placeholder:g("searchPlaceholder"),value:eR,onChange:e=>eD(e.target.value),onFocus:()=>eE(!0),onBlur:()=>eE(!1),className:"flex-1 !bg-transparent border-none text-white/90 text-[12px] font-medium placeholder:text-white/30 outline-none"}),(0,s.jsxs)("div",{className:"hidden lg:flex items-center gap-1 px-2 py-1 bg-white/5 rounded-lg border border-white/10",children:[(0,s.jsx)(G.A,{size:10,className:"text-white/30"}),(0,s.jsx)("span",{className:"text-[9px] font-bold text-white/30",children:"K"})]})]})}),(0,s.jsx)("div",{className:"hidden xl:flex items-center gap-4 px-4 py-2 bg-white/5 rounded-2xl border border-white/10",children:N&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-blue-500/30 to-indigo-500/30",children:(0,s.jsx)(Q.A,{size:12,className:"text-blue-400"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-[10px] font-bold text-white/70",children:(e=>{if(j){let t=["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"][e.getDay()],a=e.getDate(),s=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"][e.getMonth()],i=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0"),r=e.getSeconds().toString().padStart(2,"0");return"".concat(t,"، ").concat(a," ").concat(s," - ").concat(i,":").concat(l,":").concat(r)}{let t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],a=e.getDate(),s=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],i=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0"),r=e.getSeconds().toString().padStart(2,"0");return"".concat(t,", ").concat(s," ").concat(a," - ").concat(i,":").concat(l,":").concat(r)}})(y)}),(0,s.jsx)("span",{className:"text-[9px] text-white/40",children:(()=>{try{let e=new Date;return new Intl.DateTimeFormat("ar-SA-u-ca-islamic-nu-latn-nu-latn",{day:"numeric",month:"long",year:"numeric"}).format(e)}catch(e){return""}})()})]})]}),(0,s.jsx)("div",{className:"w-px h-6 bg-white/10"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-rose-500/30 to-pink-500/30",children:(0,s.jsx)(U.A,{size:12,className:"text-rose-400"})}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-white/50 max-w-[120px] truncate",children:k})]})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eC,{}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>eq(!eL),className:"relative hidden sm:flex items-center gap-2 px-3 py-2.5 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10",children:[(0,s.jsx)(u.A,{size:18,className:"text-white/60"}),(0,s.jsx)("span",{className:"text-[11px] font-bold text-white/60",children:j?"الإشعارات":"Notifications"}),eG>0&&(0,s.jsx)(r.P.span,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"min-w-[18px] h-[18px] bg-gradient-to-r from-rose-500 to-red-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center shadow-lg shadow-rose-500/50",children:eG>9?"9+":eG})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>eJ(!eY),className:"relative hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 hover:from-emerald-500/30 hover:to-teal-500/30 rounded-xl transition-all border border-emerald-500/20",children:[(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"text-emerald-400",children:(0,s.jsx)("path",{d:"M12 3C7.03 3 3 7.03 3 12s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 16c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7zm.5-11H11v5l4.28 2.54.72-1.21-3.5-2.08V8z",fill:"currentColor"})}),(0,s.jsx)("span",{className:"text-[11px] font-bold text-emerald-400",children:j?"أوقات الصلاة":"Prayer Times"}),eW&&(0,s.jsx)("span",{className:"min-w-[20px] h-[20px] bg-emerald-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center",children:eW.remaining.replace(/[سد]/g,"").trim().split(" ")[0]})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e$(!eX),className:(0,D.cn)("relative hidden sm:flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all border",e0?"bg-gradient-to-br from-amber-500/30 to-orange-500/30 border-amber-500/30":"bg-gradient-to-br from-amber-500/20 to-orange-500/20 hover:from-amber-500/30 hover:to-orange-500/30 border-amber-500/20"),children:[(0,s.jsx)(_.A,{size:18,className:"text-amber-400"}),(0,s.jsx)("span",{className:"text-[11px] font-bold text-amber-400",children:j?"المصحف الشريف":"Holy Quran"}),e0&&(0,s.jsx)(r.P.span,{animate:{scale:[1,1.3,1]},transition:{duration:1,repeat:1/0},className:"w-3 h-3 bg-amber-500 rounded-full"})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>tg(!0),className:"relative hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-br from-blue-500/20 to-indigo-500/20 hover:from-blue-500/30 hover:to-indigo-500/30 rounded-xl transition-all border border-blue-500/20",children:[(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"text-blue-400",children:(0,s.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z",fill:"currentColor"})}),(0,s.jsx)("span",{className:"text-[11px] font-bold text-blue-400",children:j?"البريد":"Email"}),tI>0&&(0,s.jsx)(r.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1.5 -right-1.5 min-w-[18px] h-[18px] bg-red-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center shadow-lg border border-white/20",children:tI>9?"9+":tI})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>E(!0),className:"hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 rounded-xl transition-all shadow-lg shadow-amber-500/20 border border-amber-400/20",children:[(0,s.jsx)(H.A,{size:16,className:"text-white"}),(0,s.jsx)("span",{className:"text-[11px] font-bold text-white",children:g("driverApp")})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>tL.push("/chat"),className:"hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 rounded-xl transition-all shadow-lg shadow-emerald-500/20 border border-emerald-400/20 relative",children:[(0,s.jsx)(h.A,{size:16,className:"text-white"}),(0,s.jsx)("span",{className:"text-[11px] font-bold text-white",children:g("support")}),m>0&&(0,s.jsx)(r.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 min-w-[22px] h-[22px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center shadow-lg animate-pulse border-2 border-white",children:m>9?"9+":m})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>eK(!eF),className:"flex items-center gap-3 px-3 py-2 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:(0,s.jsx)(Z.A,{size:16,className:"text-white"})}),(0,s.jsx)("span",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-emerald-500 rounded-full border-2 border-slate-950"})]}),(0,s.jsxs)("div",{className:"hidden md:block text-right",children:[(0,s.jsx)("p",{className:"text-[11px] font-bold text-white/90",children:(null==t?void 0:t.name)||(j?"المستخدم":"User")}),(0,s.jsx)("p",{className:"text-[9px] text-white/40",children:(null==t?void 0:t.role)==="admin"?j?"مدير النظام":"System Admin":j?"مدير منشأة":"Manager"})]}),(0,s.jsx)(Y.A,{size:14,className:(0,D.cn)("text-white/40 transition-transform",eF&&"rotate-180")})]}),(0,s.jsx)("audio",{ref:tF,onEnded:()=>{let e=(e5+1)%eT.length;e2(e),tO(e)}})]})]})})]})}),(0,s.jsx)(n.N,{children:eY&&eU&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>eJ(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-sm bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-emerald-500/20",children:[(0,s.jsx)("button",{onClick:()=>eJ(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,s.jsx)(J.A,{size:20})}),(0,s.jsx)("div",{className:"p-6 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 border-b border-emerald-500/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-2xl bg-emerald-500/30",children:(0,s.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",className:"text-emerald-400",children:(0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"currentColor"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white text-xl",children:j?"أوقات الصلاة":"Prayer Times"}),(0,s.jsx)("p",{className:"text-sm text-emerald-400",children:k})]})]})}),(0,s.jsx)("div",{className:"p-4 space-y-3",children:[{name:j?"الفجر":"Fajr",time:eU.Fajr,icon:"\uD83C\uDF19"},{name:j?"الشروق":"Sunrise",time:eU.Sunrise,icon:"\uD83C\uDF05"},{name:j?"الظهر":"Dhuhr",time:eU.Dhuhr,icon:"☀️"},{name:j?"العصر":"Asr",time:eU.Asr,icon:"\uD83C\uDF24️"},{name:j?"المغرب":"Maghrib",time:eU.Maghrib,icon:"\uD83C\uDF07"},{name:j?"العشاء":"Isha",time:eU.Isha,icon:"\uD83C\uDF03"}].map((e,t)=>(0,s.jsxs)("div",{className:(0,D.cn)("flex items-center justify-between p-4 rounded-2xl transition-all",(null==eW?void 0:eW.name)===e.name?"bg-emerald-500/20 border-2 border-emerald-500/40 shadow-lg shadow-emerald-500/20":"bg-white/5 hover:bg-white/10 border border-white/10"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:e.icon}),(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:e.name})]}),(0,s.jsx)("span",{className:(0,D.cn)("text-lg font-bold",(null==eW?void 0:eW.name)===e.name?"text-emerald-400":"text-white/60"),children:e.time})]},t))}),eW&&(0,s.jsx)("div",{className:"p-4 border-t border-white/10 bg-emerald-500/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-white/60",children:j?"الصلاة القادمة":"Next Prayer"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-emerald-400",children:[eW.name," - ",j?"بعد ".concat(eW.remaining):"in ".concat(eW.remaining)]})]})})]})]})}),(0,s.jsx)(n.N,{children:eX&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e$(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-amber-500/20",children:[(0,s.jsx)("button",{onClick:()=>e$(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,s.jsx)(J.A,{size:20})}),(0,s.jsx)("div",{className:"p-6 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border-b border-amber-500/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-2xl bg-amber-500/30",children:(0,s.jsx)(_.A,{size:28,className:"text-amber-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white text-xl",children:j?"القرآن الكريم":"Holy Quran"}),(0,s.jsx)("p",{className:"text-sm text-amber-400",children:j?"مشاري العفاسي":"Mishary Alafasy"})]})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-white mb-1",children:eT[e5].name}),(0,s.jsx)("p",{className:"text-sm text-white/50",children:eT[e5].englishName})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,s.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{let e=0===e5?eT.length-1:e5-1;e2(e),tO(e)},className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl transition-all",children:(0,s.jsx)(W.A,{size:24,className:"text-white/70"})}),(0,s.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{tF.current&&(e0?(tF.current.pause(),e1(!1)):tF.current.src?(tF.current.play(),e1(!0)):tO(e5))},className:"p-5 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full shadow-xl shadow-amber-500/40",children:e0?(0,s.jsx)(V.A,{size:32,className:"text-white"}):(0,s.jsx)(X.A,{size:32,className:"text-white"})}),(0,s.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{let e=(e5+1)%eT.length;e2(e),tO(e)},className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl transition-all",children:(0,s.jsx)($.A,{size:24,className:"text-white/70"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6 px-2",children:[(0,s.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{td>0?(th(td),tm(0)):tm(tx||.5)},className:"text-amber-400 p-1 hover:bg-white/5 rounded-lg transition-colors",children:0===td?(0,s.jsx)(ee.A,{size:18}):td<.5?(0,s.jsx)(et.A,{size:18}):(0,s.jsx)(ea.A,{size:18})}),(0,s.jsxs)("div",{className:"flex-1 h-1.5 bg-white/10 rounded-full relative group cursor-pointer",children:[(0,s.jsx)(r.P.div,{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full shadow-[0_0_10px_rgba(245,158,11,0.5)]",style:{width:"".concat(100*td,"%")}}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:td,onChange:e=>tm(parseFloat(e.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),(0,s.jsx)(r.P.div,{className:"absolute top-1/2 -translate-y-1/2 w-3.5 h-3.5 bg-white rounded-full shadow-[0_0_8px_rgba(255,255,255,0.8)] border-2 border-amber-500",style:{left:"".concat(100*td,"%"),x:"-50%"}})]}),(0,s.jsxs)("span",{className:"text-[10px] font-bold text-white/40 w-8",children:[Math.round(100*td),"%"]})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{tF.current&&(tF.current.pause(),tF.current.currentTime=0,e1(!1),e2(0),localStorage.setItem("quran_last_surah","0"))},className:"w-full flex items-center justify-center gap-2 py-3 bg-red-500/10 hover:bg-red-500/20 rounded-2xl transition-all text-red-400 hover:text-red-300 border border-red-500/20",children:[(0,s.jsx)(es.A,{size:18}),(0,s.jsx)("span",{className:"text-sm font-bold",children:j?"إيقاف والبدء من جديد":"Stop & Reset"})]})]}),(0,s.jsxs)("div",{className:"p-4 border-t border-white/10 max-h-60 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("p",{className:"text-xs text-white/40",children:j?"سور القرآن الكريم (114 سورة)":"Quran Surahs (114)"}),(0,s.jsxs)("p",{className:"text-xs text-amber-400",children:[e5+1,"/114"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:eT.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>{e2(t),tO(t)},className:(0,D.cn)("text-right p-2 rounded-xl transition-all text-xs",e5===t?"bg-amber-500/20 text-amber-400 font-bold border border-amber-500/30":"bg-white/5 hover:bg-white/10 text-white/60 border border-white/5"),children:[(0,s.jsxs)("span",{className:"text-white/30 text-[10px]",children:[e.number,"."]})," ",e.name]},e.number))})]})]})]})}),(0,s.jsx)(n.N,{children:eL&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>eq(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-white/10",children:[(0,s.jsx)("button",{onClick:()=>eq(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,s.jsx)(J.A,{size:20})}),(0,s.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-2xl bg-blue-500/30",children:(0,s.jsx)(u.A,{size:28,className:"text-blue-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white text-xl",children:j?"تنبيهات النظام":"System Alerts"}),(0,s.jsx)("p",{className:"text-sm text-white/40",children:j?"لديك ".concat(eG," تنبيهات جديدة"):"You have ".concat(eG," new alerts")})]})]})}),(0,s.jsx)("div",{className:"max-h-80 overflow-y-auto",children:eO.length>0?eO.map(e=>(0,s.jsx)(r.P.div,{whileHover:{backgroundColor:"rgba(255,255,255,0.05)"},className:"p-4 border-b border-white/5 cursor-pointer",onClick:()=>{let t=parseInt(localStorage.getItem("last_admin_notification_id")||"0");e.id>t&&(localStorage.setItem("last_admin_notification_id",e.id.toString()),eQ(e=>Math.max(0,e-1))),eq(!1)},children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-blue-500/20",children:(0,s.jsx)(u.A,{size:16,className:"text-blue-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-white/90",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-white/40",children:new Date(e.created_at).toLocaleDateString("en-US")})]})]})},e.id)):(0,s.jsxs)("div",{className:"p-16 text-center",children:[(0,s.jsx)(u.A,{size:48,className:"mx-auto mb-3 text-white/20"}),(0,s.jsx)("p",{className:"text-sm font-bold text-white/30",children:j?"لا توجد تنبيهات":"No alerts"})]})}),(0,s.jsx)("div",{className:"p-4 border-t border-white/10",children:(0,s.jsx)("button",{onClick:()=>{(null==t?void 0:t.role)==="admin"&&tL.push("/admin/notifications"),eq(!1)},className:"w-full py-3 text-center text-sm font-bold text-blue-400 hover:text-blue-300 transition-colors bg-blue-500/10 rounded-xl hover:bg-blue-500/20",children:j?"عرض جميع التنبيهات":"View All Alerts"})})]})]})}),(0,s.jsx)(n.N,{children:eF&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>eK(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-white/10 max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("button",{onClick:()=>eK(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,s.jsx)(J.A,{size:20})}),(0,s.jsx)("div",{className:"p-6 border-b border-white/10 bg-gradient-to-r from-blue-500/10 to-purple-500/10",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-xl",children:(0,s.jsx)(Z.A,{size:32,className:"text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-white text-lg",children:null==t?void 0:t.name}),(0,s.jsx)("p",{className:"text-sm text-white/40",children:null==t?void 0:t.email}),(0,s.jsx)("p",{className:"text-xs text-white/30 mt-1",children:(null==t?void 0:t.role)==="admin"?j?"مدير النظام":"System Admin":j?"مدير منشأة":"Facility Manager"})]})]})}),(null==t?void 0:t.role)!=="admin"&&p&&(0,s.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,s.jsxs)("div",{className:(0,D.cn)("p-4 rounded-2xl",p.isActive&&p.daysRemaining>7?"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/20":p.isActive&&p.daysRemaining>0?"bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/20":"bg-gradient-to-r from-red-500/10 to-rose-500/10 border border-red-500/20"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.A,{size:18,className:"text-amber-400"}),(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:j?"باقتك الحالية":"Your Plan"})]}),(0,s.jsx)(ei.A,{size:20,className:(0,D.cn)(p.isActive?"text-amber-400":"text-red-400")})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:(0,D.cn)("text-lg font-bold",p.isActive?"text-emerald-400":"text-red-400"),children:p.isActive?"".concat(p.daysRemaining," ").concat(j?"يوم متبقي":"days left"):j?"غير مشترك":"Not Subscribed"}),p.endDate&&(0,s.jsxs)("p",{className:"text-xs text-white/40 mt-1",children:[j?"تنتهي في: ":"Expires: ",new Date(p.endDate).toLocaleDateString("en-US")]})]}),(0,s.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:tY,className:"p-2 bg-white/10 hover:bg-white/20 rounded-xl transition-all",children:(0,s.jsx)(el.A,{size:16,className:"text-white/60"})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:tJ,className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 rounded-xl text-purple-400 text-sm font-bold border border-purple-500/20 transition-all",children:[(0,s.jsx)(R.A,{size:16}),j?"ترقية الباقة":"Upgrade"]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:tY,className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 hover:from-emerald-500/30 hover:to-teal-500/30 rounded-xl text-emerald-400 text-sm font-bold border border-emerald-500/20 transition-all",children:[(0,s.jsx)(er.A,{size:16}),j?"تجديد":"Renew"]})]})]}),(0,s.jsxs)("div",{className:"p-3 space-y-1",children:[(0,s.jsxs)(r.P.button,{whileHover:{backgroundColor:"rgba(255,255,255,0.05)"},onClick:()=>{tL.push("/user_profile"),eK(!1)},className:"w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-white/70 hover:text-white transition-colors",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-blue-500/20",children:(0,s.jsx)(c.A,{size:18,className:"text-blue-400"})}),(0,s.jsx)("span",{className:"text-sm font-bold",children:g("userProfile")})]}),(null==t?void 0:t.role)!=="admin"&&(0,s.jsxs)(r.P.button,{whileHover:{backgroundColor:"rgba(255,255,255,0.05)"},onClick:()=>{tL.push("/subscriptions"),eK(!1)},className:"w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-white/70 hover:text-white transition-colors",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-amber-500/20",children:(0,s.jsx)(b.A,{size:18,className:"text-amber-400"})}),(0,s.jsx)("span",{className:"text-sm font-bold",children:g("mySubscription")})]}),(0,s.jsxs)(r.P.button,{whileHover:{backgroundColor:"rgba(255,255,255,0.05)"},onClick:()=>{tL.push("/settings"),eK(!1)},className:"w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-white/70 hover:text-white transition-colors",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-slate-500/20",children:(0,s.jsx)(en.A,{size:18,className:"text-slate-400"})}),(0,s.jsx)("span",{className:"text-sm font-bold",children:j?"إعدادات النظام":"System Settings"})]})]}),(0,s.jsx)("div",{className:"p-3 border-t border-white/10",children:(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02,backgroundColor:"rgba(239, 68, 68, 0.1)"},whileTap:{scale:.98},onClick:()=>{document.cookie="auth_session=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",tL.push("/login")},className:"w-full flex items-center justify-center gap-3 px-4 py-4 rounded-xl bg-red-500/10 text-rose-400 hover:text-rose-300 transition-all border border-red-500/20",children:[(0,s.jsx)(eo.A,{size:20}),(0,s.jsx)("span",{className:"text-sm font-bold",children:j?"تسجيل الخروج":"Logout"})]})})]})]})}),(0,s.jsx)(n.N,{children:e9&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e6(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-lg bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-amber-500/20 max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("button",{onClick:()=>e6(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,s.jsx)(J.A,{size:20})}),(0,s.jsx)("div",{className:"p-6 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border-b border-amber-500/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-amber-500/30 to-orange-500/30",children:(0,s.jsx)(ei.A,{size:32,className:"text-amber-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white text-xl",children:j?"تفاصيل الاشتراك":"Subscription Details"}),(0,s.jsx)("p",{className:"text-sm text-amber-400",children:j?"إدارة باقتك وتجديدها":"Manage and renew your plan"})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[p&&(0,s.jsxs)("div",{className:(0,D.cn)("p-5 rounded-2xl",p.isActive?"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/20":"bg-gradient-to-r from-red-500/10 to-rose-500/10 border border-red-500/20"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,D.cn)("p-3 rounded-xl",p.isActive?"bg-emerald-500/20":"bg-red-500/20"),children:(0,s.jsx)(ec.A,{size:24,className:p.isActive?"text-emerald-400":"text-red-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-white",children:j?"حالة الاشتراك":"Status"}),(0,s.jsx)("p",{className:(0,D.cn)("text-sm font-bold",p.isActive?"text-emerald-400":"text-red-400"),children:p.isActive?j?"نشط":"Active":j?"غير نشط":"Inactive"})]})]}),p.isActive&&(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"text-3xl font-black text-white",children:p.daysRemaining}),(0,s.jsx)("p",{className:"text-xs text-white/40",children:j?"يوم متبقي":"days left"})]})]}),tr&&(0,s.jsxs)("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-white/50",children:j?"اسم الباقة":"Plan Name"}),(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:tr.plan_name})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-white/50",children:j?"السعر":"Price"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-amber-400",children:[tr.plan_price," ",j?"ر.س":"SAR"]})]}),p.endDate&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-white/50",children:j?"تاريخ الانتهاء":"End Date"}),(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:new Date(p.endDate).toLocaleDateString("en-US")})]})]})]}),(null==tr?void 0:tr.features)&&(0,s.jsxs)("div",{className:"p-5 rounded-2xl bg-white/5 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(ed.A,{size:20,className:"text-amber-400"}),(0,s.jsx)("p",{className:"font-bold text-white",children:j?"مميزات الباقة":"Plan Features"})]}),(0,s.jsx)("div",{className:"space-y-2",children:(tr.features||"").split(",").map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(em.A,{size:16,className:"text-emerald-400"}),(0,s.jsx)("span",{className:"text-sm text-white/70",children:e.trim()})]},t))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{tr&&tt({plan:{id:tr.plan_id,name:tr.plan_name,price:tr.plan_price,duration_value:tr.duration_value||30,duration_unit:tr.duration_unit||"day"},type:"renewal"})},className:"flex items-center justify-center gap-2 py-4 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 rounded-xl text-white text-sm font-bold shadow-lg shadow-emerald-500/30 transition-all",children:[(0,s.jsx)(er.A,{size:18}),j?"تجديد الباقة":"Renew Plan"]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:tJ,className:"flex items-center justify-center gap-2 py-4 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 rounded-xl text-white text-sm font-bold shadow-lg shadow-purple-500/30 transition-all",children:[(0,s.jsx)(R.A,{size:18}),j?"ترقية الباقة":"Upgrade Plan"]})]})]})]})]})}),(0,s.jsx)(n.N,{children:e8&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e7(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-2xl bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-purple-500/20 max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("button",{onClick:()=>e7(!1),className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,s.jsx)(J.A,{size:20})}),(0,s.jsx)("div",{className:"p-6 bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-b border-purple-500/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-purple-500/30 to-pink-500/30",children:(0,s.jsx)(R.A,{size:32,className:"text-purple-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white text-xl",children:j?"ترقية الباقة":"Upgrade Plan"}),(0,s.jsx)("p",{className:"text-sm text-purple-400",children:j?"اختر الباقة المناسبة لاحتياجاتك":"Choose the plan that fits your needs"})]})]})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"grid gap-4",children:ta.map((e,t)=>(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:(0,D.cn)("p-5 rounded-2xl border transition-all cursor-pointer",1===t?"bg-gradient-to-r from-amber-500/10 to-orange-500/10 border-amber-500/30 ring-2 ring-amber-500/20":"bg-white/5 border-white/10 hover:border-white/20"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,D.cn)("p-3 rounded-xl",1===t?"bg-amber-500/20":"bg-white/10"),children:(0,s.jsx)(b.A,{size:24,className:1===t?"text-amber-400":"text-white/60"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-bold text-white text-lg",children:e.name}),1===t&&(0,s.jsx)("span",{className:"px-2 py-0.5 bg-amber-500 text-white text-[10px] font-bold rounded-full",children:j?"الأكثر طلباً":"Popular"})]}),(0,s.jsxs)("p",{className:"text-sm text-white/40",children:[e.duration_value," ","day"===e.duration_unit?j?"يوم":"days":"month"===e.duration_unit?j?"شهر":"months":j?"سنة":"years"]})]})]}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"text-2xl font-black text-white",children:e.price}),(0,s.jsx)("p",{className:"text-xs text-white/40",children:j?"ر.س":"SAR"})]})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-white/50 mb-4",children:e.description}),(0,s.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>tt({plan:e,type:"upgrade"}),className:(0,D.cn)("w-full py-3 rounded-xl font-bold text-sm transition-all",1===t?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg shadow-amber-500/30":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"),children:j?"اختيار هذه الباقة":"Choose This Plan"})]},e.id))})})]})]})}),(0,s.jsx)(n.N,{children:te&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{tt(null),tc(null)},className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-lg bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-emerald-500/20 max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("button",{onClick:()=>{tt(null),tc(null)},className:"absolute top-4 left-4 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all z-10",children:(0,s.jsx)(J.A,{size:20})}),(0,s.jsx)("div",{className:"p-6 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 border-b border-emerald-500/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-emerald-500/30 to-teal-500/30",children:(0,s.jsx)(P.A,{size:32,className:"text-emerald-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white text-xl",children:j?"إتمام الدفع":"Complete Payment"}),(0,s.jsx)("p",{className:"text-sm text-emerald-400",children:"renewal"===te.type?j?"تجديد الباقة":"Plan Renewal":"upgrade"===te.type?j?"ترقية الباقة":"Plan Upgrade":j?"اشتراك جديد":"New Subscription"})]})]})}),(0,s.jsxs)("form",{onSubmit:tZ,className:"p-6 space-y-5",children:[(0,s.jsx)("div",{className:"p-4 rounded-2xl bg-amber-500/10 border border-amber-500/20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(b.A,{size:20,className:"text-amber-400"}),(0,s.jsx)("span",{className:"font-bold text-white",children:te.plan.name})]}),(0,s.jsxs)("span",{className:"text-lg font-black text-amber-400",children:[te.plan.price," ",j?"ر.س":"SAR"]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-white/70 mb-3",children:j?"اختر الحساب البنكي للتحويل":"Select Bank Account"}),(0,s.jsx)("div",{className:"space-y-2",children:ti.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-4 p-4 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 cursor-pointer transition-all",children:[(0,s.jsx)("input",{type:"radio",name:"bank_account_id",value:e.id,required:!0,className:"w-4 h-4 accent-emerald-500"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-bold text-white text-sm",children:e.bank_name}),(0,s.jsx)("p",{className:"text-xs text-white/40",children:e.account_holder}),(0,s.jsx)("p",{className:"text-xs text-emerald-400 font-mono mt-1",children:e.iban})]})]},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-white/70 mb-3",children:j?"إرفاق إيصال الدفع":"Upload Receipt"}),(0,s.jsxs)("div",{className:(0,D.cn)("relative p-6 rounded-2xl border-2 border-dashed transition-all text-center",to?"border-emerald-500/50 bg-emerald-500/10":"border-white/20 bg-white/5 hover:border-white/30"),children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){let e=new FileReader;e.onloadend=()=>{tc(e.result)},e.readAsDataURL(a)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",required:!0}),to?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("img",{src:to,alt:"Receipt",className:"max-h-32 mx-auto rounded-lg"}),(0,s.jsx)("p",{className:"text-sm text-emerald-400 font-bold",children:j?"تم رفع الإيصال بنجاح":"Receipt uploaded"})]}):(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(ex.A,{size:32,className:"mx-auto text-white/30"}),(0,s.jsx)("p",{className:"text-sm text-white/50",children:j?"اضغط لرفع صورة الإيصال":"Click to upload receipt"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-white/70 mb-2",children:j?"ملاحظات (اختياري)":"Notes (Optional)"}),(0,s.jsx)("textarea",{name:"notes",rows:2,className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 text-white text-sm placeholder:text-white/30 focus:border-emerald-500/50 focus:ring-0 outline-none resize-none",placeholder:j?"أي ملاحظات إضافية...":"Any additional notes..."})]}),(0,s.jsx)("div",{className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(eh.A,{size:18,className:"text-blue-400 mt-0.5"}),(0,s.jsx)("p",{className:"text-xs text-blue-400/80",children:j?"سيتم مراجعة طلبك وتفعيل الاشتراك خلال 24 ساعة من التحقق من الدفع":"Your request will be reviewed and activated within 24 hours of payment verification"})]})}),(0,s.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:tu,className:"w-full py-4 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 rounded-xl text-white font-bold shadow-lg shadow-emerald-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:tu?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(er.A,{size:20,className:"animate-spin"}),j?"جاري الإرسال...":"Submitting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(em.A,{size:20}),j?"إرسال طلب الدفع":"Submit Payment Request"]})})]})]})]})}),(0,s.jsx)(n.N,{children:tp&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>tg(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0,width:tf?"98vw":"100%",height:tf?"95vh":"80vh",maxWidth:tf?"none":"1024px"},exit:{scale:.9,opacity:0,y:20},className:"relative bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl shadow-2xl overflow-hidden border border-blue-500/20 flex flex-col transition-all duration-300",children:[(0,s.jsxs)("div",{className:"p-4 md:p-6 bg-gradient-to-r from-blue-500/10 to-indigo-500/10 border-b border-white/10 flex items-center justify-between shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-2xl bg-blue-500/20",children:(0,s.jsx)(eu.A,{size:24,className:"text-blue-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white text-lg md:text-xl",children:tv?j?"إعدادات البريد":"Email Settings":j?"بريد الشركة":"Company Email"}),(0,s.jsx)("p",{className:"text-sm text-blue-400 truncate max-w-[200px]",children:tv?j?"إدارة الحسابات":"Manage Accounts":(null==tz?void 0:tz.email)||(j?"اختر حساباً":"Select an account")})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ty(!tv),className:(0,D.cn)("p-2.5 rounded-xl transition-all border",tv?"bg-blue-500 text-white border-blue-400":"bg-white/5 text-white/40 hover:text-white border-white/10"),title:j?"الإعدادات":"Settings",children:(0,s.jsx)(en.A,{size:20})}),(0,s.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tw(!tf),className:"p-2.5 bg-white/5 text-white/40 hover:text-white rounded-xl transition-all border border-white/10",children:tf?(0,s.jsx)(eb.A,{size:20}):(0,s.jsx)(ep.A,{size:20})}),!tv&&(0,s.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>tz&&tB(tz.id,tj),className:"p-2.5 bg-white/5 text-white/40 hover:text-white rounded-xl transition-all border border-white/10",children:(0,s.jsx)(er.A,{size:20,className:tC?"animate-spin":""})}),(0,s.jsx)("button",{onClick:()=>tg(!1),className:"p-2.5 bg-white/5 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all border border-white/10",children:(0,s.jsx)(J.A,{size:20})})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-20 md:w-64 border-l border-white/5 bg-black/20 flex flex-col shrink-0",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/5",children:[(0,s.jsx)("p",{className:"hidden md:block text-[10px] font-bold text-white/30 uppercase tracking-widest mb-3 px-2",children:j?"الحسابات":"Accounts"}),(0,s.jsxs)("div",{className:"space-y-2",children:[tA.map(e=>(0,s.jsxs)("button",{onClick:()=>{tS(e),tB(e.id,"INBOX")},className:(0,D.cn)("w-full flex items-center gap-3 p-2 md:p-3 rounded-xl transition-all",(null==tz?void 0:tz.id)===e.id?"bg-blue-500/20 border border-blue-500/30 text-white":"hover:bg-white/5 text-white/40 border border-transparent"),children:[(0,s.jsx)("div",{className:(0,D.cn)("w-8 h-8 rounded-lg flex items-center justify-center shrink-0",(null==tz?void 0:tz.id)===e.id?"bg-blue-500 text-white":"bg-white/10"),children:(0,s.jsx)(eg.A,{size:14})}),(0,s.jsxs)("div",{className:"hidden md:block flex-1 min-w-0 text-right",children:[(0,s.jsx)("p",{className:"text-xs font-bold truncate",children:e.email}),(0,s.jsx)("p",{className:"text-[10px] opacity-40 uppercase",children:e.provider})]})]},e.id)),0===tA.length&&(0,s.jsxs)("button",{onClick:()=>ty(!0),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-blue-500/10 text-blue-400 border border-blue-500/20 hover:bg-blue-500/20 transition-all",children:[(0,s.jsx)(ef.A,{size:16,className:"mx-auto md:mx-0"}),(0,s.jsx)("span",{className:"hidden md:block text-xs font-bold",children:j?"أضف حساب":"Add Account"})]})]})]}),!tv&&tz&&(0,s.jsxs)("div",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[(0,s.jsx)("p",{className:"hidden md:block text-[10px] font-bold text-white/30 uppercase tracking-widest mb-3 px-2",children:j?"المجلدات":"Folders"}),[{id:"INBOX",name:j?"صندوق الوارد":"Inbox",icon:ew.A,color:"text-blue-400"},{id:"Sent",name:j?"المرسل":"Sent",icon:ej.A,color:"text-emerald-400"},{id:"Trash",name:j?"المحذوفات":"Trash",icon:eN.A,color:"text-rose-400"},{id:"Spam",name:j?"الرسائل المزعجة":"Spam",icon:ev.A,color:"text-amber-400"}].map(e=>(0,s.jsxs)("button",{onClick:()=>tB(tz.id,e.id),className:(0,D.cn)("w-full flex items-center gap-3 p-3 rounded-xl transition-all",tj===e.id?"bg-white/10 text-white shadow-sm":"text-white/40 hover:text-white/70 hover:bg-white/5"),children:[(0,s.jsx)(e.icon,{size:18,className:(0,D.cn)(tj===e.id?e.color:"text-inherit")}),(0,s.jsx)("span",{className:"hidden md:block text-sm font-medium",children:e.name})]},e.id))]})]}),(0,s.jsx)("div",{className:"flex-1 flex flex-col min-w-0 bg-white/[0.02]",children:tv?(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,s.jsxs)("section",{children:[(0,s.jsxs)("h4",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(en.A,{size:20,className:"text-blue-400"}),j?"إدارة الحسابات":"Account Management"]}),(0,s.jsx)("div",{className:"grid gap-3",children:tA.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 border border-white/10 rounded-2xl group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center",children:(0,s.jsx)(eu.A,{size:20,className:"text-blue-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-white text-sm",children:e.email}),(0,s.jsxs)("p",{className:"text-xs text-white/40",children:[e.provider," • IMAP: ",e.is_active?j?"متصل":"Connected":j?"فشل الاتصال":"Connection Failed"]})]})]}),(0,s.jsx)("button",{onClick:()=>tQ(e.id),className:"p-2 text-white/20 hover:text-rose-400 hover:bg-rose-500/10 rounded-xl transition-all",children:(0,s.jsx)(eN.A,{size:18})})]},e.id))})]}),(0,s.jsxs)("section",{className:"p-6 bg-white/5 border border-white/10 rounded-3xl",children:[(0,s.jsxs)("h4",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[(0,s.jsx)(d.A,{size:20,className:"text-emerald-400"}),j?"إضافة حساب جديد":"Add New Account"]}),(0,s.jsxs)("form",{onSubmit:tG,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-bold text-white/50 px-1",children:j?"البريد الإلكتروني":"Email Address"}),(0,s.jsx)("input",{name:"email",type:"email",required:!0,placeholder:"user@example.com",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-blue-500/50 outline-none transition-all"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-bold text-white/50 px-1",children:j?"كلمة المرور":"Password"}),(0,s.jsx)("input",{name:"password",type:"password",required:!0,placeholder:"••••••••",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-blue-500/50 outline-none transition-all"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-bold text-white/50 px-1",children:j?"مزود الخدمة":"Provider"}),(0,s.jsxs)("select",{name:"provider",defaultValue:"hostinger",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-sm text-white focus:border-blue-500/50 outline-none transition-all",children:[(0,s.jsx)("option",{value:"hostinger",children:"Hostinger"}),(0,s.jsx)("option",{value:"gmail",children:"Gmail"}),(0,s.jsx)("option",{value:"outlook",children:"Outlook"}),(0,s.jsx)("option",{value:"custom",children:"Custom IMAP/SMTP"})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("button",{type:"submit",disabled:tR,className:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-blue-600/20 flex items-center justify-center gap-2",children:[tR?(0,s.jsx)(er.A,{size:18,className:"animate-spin"}):(0,s.jsx)(ef.A,{size:18}),j?"حفظ الحساب":"Save Account"]})})]})]})]})]})}):(0,s.jsx)("div",{className:"flex-1 flex flex-col min-w-0",children:tC?(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[(0,s.jsx)(ey.A,{size:40,className:"text-blue-500 animate-spin"}),(0,s.jsx)("p",{className:"text-sm text-white/40",children:j?"جاري جلب الرسائل...":"Fetching emails..."})]}):t_.length>0?(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 px-2",children:[(0,s.jsx)("h4",{className:"text-sm font-bold text-white/60",children:"INBOX"===tj?j?"صندوق الوارد":"Inbox":"Sent"===tj?j?"المرسل":"Sent":"Trash"===tj?j?"المحذوفات":"Trash":j?"الرسائل المزعجة":"Spam"}),(0,s.jsxs)("span",{className:"text-[10px] bg-blue-500/20 text-blue-400 px-2 py-1 rounded-lg font-bold",children:[t_.length," ",j?"رسالة":"messages"]})]}),t_.map(e=>(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,D.cn)("group relative p-4 rounded-2xl border transition-all cursor-pointer",e.isRead?"bg-transparent border-white/5 hover:bg-white/5":"bg-white/5 border-blue-500/30 shadow-lg shadow-blue-500/5"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start gap-4 mb-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[!e.isRead&&(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,s.jsx)("span",{className:"font-bold text-sm text-white/90 truncate",children:e.from})]}),(0,s.jsx)("span",{className:"text-[10px] text-white/30 whitespace-nowrap",children:new Date(e.date).toLocaleDateString("en-US")})]}),(0,s.jsx)("h4",{className:"text-xs font-bold text-blue-400 mb-1 truncate",children:e.subject}),(0,s.jsx)("p",{className:"text-[11px] text-white/40 line-clamp-2 leading-relaxed",children:e.snippet}),(0,s.jsx)("div",{className:"absolute left-4 bottom-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)("button",{className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg text-white/60",children:(0,s.jsx)(eA.A,{size:14})})})]},e.uid))]}):(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-12 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-white/5 flex items-center justify-center mb-6",children:(0,s.jsx)(eu.A,{size:40,className:"text-white/10"})}),(0,s.jsx)("h4",{className:"text-lg font-bold text-white mb-2",children:j?"لا توجد رسائل":"No messages"}),(0,s.jsx)("p",{className:"text-sm text-white/30 max-w-xs",children:j?"هذا المجلد فارغ حالياً أو لم يتم جلب الرسائل بعد.":"This folder is currently empty or messages haven't been fetched yet."}),!tz&&(0,s.jsx)("button",{onClick:()=>ty(!0),className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-xl text-sm font-bold hover:bg-blue-500 transition-all",children:j?"أضف حساب بريد الآن":"Add Email Account Now"})]})})})]})]})]})}),(0,s.jsx)(n.N,{children:M&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>E(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 rounded-3xl p-8 shadow-2xl overflow-hidden border border-white/10",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-amber-500/10 to-transparent rounded-full blur-3xl"}),(0,s.jsx)("button",{onClick:()=>E(!1),className:"absolute top-6 left-6 p-2 text-white/30 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:(0,s.jsx)(J.A,{size:20})}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col items-center text-center gap-4 mb-8",children:[(0,s.jsxs)(r.P.div,{animate:{rotate:[0,-5,5,0]},transition:{duration:4,repeat:1/0},className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl blur-xl opacity-40"}),(0,s.jsx)("div",{className:"relative w-16 h-16 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center shadow-2xl border border-amber-400/30",children:(0,s.jsx)(H.A,{size:32,className:"text-white"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-black text-white mb-1",children:g("driverApp")}),(0,s.jsx)("p",{className:"text-white/40 text-sm",children:j?"نظام إدخال البيانات للسائقين الميدانيين":"Data entry system for field drivers"})]})]}),(0,s.jsxs)("div",{className:"relative z-10 grid grid-cols-1 gap-3 mb-6",children:[(0,s.jsxs)("a",{href:"https://accounts.zoolspeed.com/driver/",target:"_blank",className:"flex items-center justify-between p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group border border-white/10 hover:border-white/20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-xl",children:(0,s.jsx)(ek.A,{size:18,className:"text-blue-400"})}),(0,s.jsx)("span",{className:"font-bold text-sm text-white/90",children:j?"فتح رابط التطبيق":"Open App Link"})]}),(0,s.jsx)(q.A,{size:18,className:"text-white/30 group-hover:-translate-x-1 transition-transform"})]}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("https://accounts.zoolspeed.com/driver/"),eM(!0),setTimeout(()=>eM(!1),2e3)},className:"flex items-center justify-between p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group text-right w-full border border-white/10 hover:border-white/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,D.cn)("p-2 rounded-xl",eI?"bg-emerald-500/20":"bg-amber-500/20"),children:eI?(0,s.jsx)(ez.A,{size:18,className:"text-emerald-400"}):(0,s.jsx)(eS.A,{size:18,className:"text-amber-400"})}),(0,s.jsx)("span",{className:"font-bold text-sm text-white/90",children:eI?j?"تم النسخ بنجاح":"Copied!":j?"نسخ رابط التطبيق":"Copy App Link"})]})}),(0,s.jsx)("button",{onClick:()=>L(!K),className:"flex items-center justify-between p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group text-right w-full border border-white/10 hover:border-white/20",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-purple-500/20 rounded-xl",children:(0,s.jsx)(e_.A,{size:18,className:"text-purple-400"})}),(0,s.jsx)("span",{className:"font-bold text-sm text-white/90",children:j?"عرض رمز QR":"Show QR Code"})]})})]}),(0,s.jsx)(n.N,{children:K&&(0,s.jsxs)(r.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"relative z-10 flex flex-col items-center gap-4 p-6 bg-white rounded-2xl mb-6 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-slate-100 p-4 rounded-2xl",children:(0,s.jsx)("img",{src:"https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://accounts.zoolspeed.com/driver/",alt:"QR Code",className:"w-32 h-32"})}),(0,s.jsx)("p",{className:"text-slate-600 text-xs font-bold",children:j?"امسح الكود لفتح التطبيق فوراً":"Scan to open app instantly"})]})}),(0,s.jsxs)("div",{className:"relative z-10 p-4 bg-white/5 rounded-2xl border border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-blue-400",children:[(0,s.jsx)(el.A,{size:14}),(0,s.jsx)("h6",{className:"text-xs font-bold",children:j?"معلومات عن التطبيق":"About the App"})]}),(0,s.jsx)("p",{className:"text-[11px] text-white/40 leading-relaxed",children:j?"هذا التطبيق مخصص للسائقين لتسجيل عمليات الشحن والتسليم بشكل فوري، ويتيح للمديرين متابعة سير العمليات من لوحة التحكم.":"This app is designed for drivers to instantly record shipping and delivery operations, allowing managers to track operations from the dashboard."})]})]})]})})]})}var eM=a(41728),eH=a(3166),eE=a(33738),eR=a(34172),eD=a(50906),eF=a(69141),eK=a(39068);function eL(){let[e,t]=(0,i.useState)(null),[a,l]=(0,i.useState)(!0),[n,o]=(0,i.useState)({cpu:23,memory:45,latency:42}),{isRTL:c}=(0,F.Y)(),d=(0,F.c)("footer");(0,i.useEffect)(()=>{let e=()=>l(!0),t=()=>l(!1);window.addEventListener("online",e),window.addEventListener("offline",t),l(navigator.onLine);let a=setInterval(()=>{o({cpu:Math.floor(30*Math.random())+15,memory:Math.floor(20*Math.random())+40,latency:Math.floor(30*Math.random())+30})},5e3);return()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t),clearInterval(a)}},[]);let m=(e,a)=>{navigator.clipboard.writeText(e.replace(/\s/g,"")),t(a),setTimeout(()=>t(null),2e3)};return(0,s.jsxs)("footer",{className:"w-full no-print mt-auto relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-transparent"}),(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"}),(0,s.jsx)("div",{className:"relative z-10 max-w-[1800px] mx-auto px-4 md:px-6 py-3",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-1.5 text-white/30 text-[10px] font-bold",children:[(0,s.jsx)(eM.A,{size:10}),(0,s.jsxs)("span",{children:["2026 ",d("copyright")]})]})}),(0,s.jsxs)("div",{className:"hidden lg:flex items-center gap-3",children:[(0,s.jsx)(r.P.div,{whileHover:{scale:1.02},className:(0,D.cn)("flex items-center gap-2 px-3 py-1.5 rounded-xl border",a?"bg-emerald-500/10 border-emerald-500/20":"bg-rose-500/10 border-rose-500/20"),children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:(0,s.jsx)(eH.A,{size:12,className:"text-emerald-400"})}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-emerald-400",children:d("online")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eE.A,{size:12,className:"text-rose-400"}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-rose-400",children:d("offline")})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-xl border border-white/10",children:[(0,s.jsx)(eR.A,{size:12,className:"text-blue-400"}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-white/50",children:"CPU"}),(0,s.jsxs)("span",{className:"text-[10px] font-bold text-blue-400",children:[n.cpu,"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-xl border border-white/10",children:[(0,s.jsx)(eD.A,{size:12,className:"text-purple-400"}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-white/50",children:c?"الذاكرة":"Memory"}),(0,s.jsxs)("span",{className:"text-[10px] font-bold text-purple-400",children:[n.memory,"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-xl border border-white/10",children:[(0,s.jsx)(R.A,{size:12,className:"text-amber-400"}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-white/50",children:"Latency"}),(0,s.jsxs)("span",{className:"text-[10px] font-bold text-amber-400",children:[n.latency,"ms"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center flex-wrap justify-center gap-3",children:[(0,s.jsxs)(r.P.a,{whileHover:{scale:1.05,y:-2},href:"mailto:info@zoolspeed.com",className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-blue-500/30 transition-all group",children:[(0,s.jsx)("div",{className:"p-1 rounded-md bg-blue-500/20",children:(0,s.jsx)(eu.A,{size:10,className:"text-blue-400"})}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-white/50 group-hover:text-white/80 transition-colors",children:"info@zoolspeed.com"})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.05,y:-2},onClick:()=>m("+966534907721","ksa"),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-emerald-500/30 transition-all group",children:[(0,s.jsx)("div",{className:"p-1 rounded-md bg-emerald-500/20",children:(0,s.jsx)(eF.A,{size:10,className:"text-emerald-400"})}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-white/50 group-hover:text-white/80 transition-colors",dir:"ltr",children:"+966 53 490 7721"}),"ksa"===e?(0,s.jsx)(ez.A,{size:10,className:"text-emerald-500"}):(0,s.jsx)(eS.A,{size:10,className:"opacity-0 group-hover:opacity-100 text-white/30 transition-opacity"})]}),(0,s.jsxs)(r.P.button,{whileHover:{scale:1.05,y:-2},onClick:()=>m("+249921163000","sdn"),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-amber-500/30 transition-all group",children:[(0,s.jsx)("div",{className:"p-1 rounded-md bg-amber-500/20",children:(0,s.jsx)(eK.A,{size:10,className:"text-amber-400"})}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-white/50 group-hover:text-white/80 transition-colors",dir:"ltr",children:"+249 92 116 3000"}),"sdn"===e?(0,s.jsx)(ez.A,{size:10,className:"text-emerald-500"}):(0,s.jsx)(eS.A,{size:10,className:"opacity-0 group-hover:opacity-100 text-white/30 transition-opacity"})]}),(0,s.jsxs)(r.P.div,{whileHover:{scale:1.05},className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-emerald-500/10 to-teal-500/10 rounded-xl border border-emerald-500/20",children:[(0,s.jsx)(ec.A,{size:10,className:"text-emerald-400"}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-emerald-400",children:"SSL Secured"})]})]})]})})]})}var eq=a(14755);function eO(e){let{isAdmin:t,companyId:a}=e,[o,c]=(0,i.useState)([]),[d,m]=(0,i.useState)(0),[x,b]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),f=(0,i.useRef)(-1),w=(0,i.useRef)(!1),j=(0,l.useRouter)(),N=(0,l.usePathname)(),v=null==N?void 0:N.includes("/admin/chat"),y="/chat"===N,A=t?v:y,k=(0,i.useCallback)(async()=>{if(!A&&!w.current){w.current=!0;try{var e,s,i,l,r;if(t){let t=await fetch("/api/admin/chat?action=unread_count");if(!t.ok)throw Error("Fetch failed");let a=(await t.json()).unread_count||0;if(a>f.current&&f.current>=0){let t=await fetch("/api/admin/chat");if(!t.ok)throw Error("Fetch failed");let a=null==(e=(await t.json()).companies)?void 0:e.filter(e=>e.unread_count>0);if((null==a?void 0:a.length)>0){let e=a[0],t={id:Date.now(),companyName:e.name,message:(null==(s=e.last_message)?void 0:s.substring(0,80))||"رسالة جديدة",time:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),companyId:e.id};c(e=>[t,...e.slice(0,2)]),g(t),b(!0),setTimeout(()=>b(!1),8e3),z(),S("رسالة جديدة - دعم العملاء","".concat(e.name,": ").concat(null==(i=e.last_message)?void 0:i.substring(0,50)))}}f.current=a,m(a)}else if(a){let e=await fetch("/api/admin/chat?company_id=".concat(a,"&action=client_unread"));if(!e.ok)throw Error("Fetch failed");let t=(await e.json()).unread_count||0;if(t>f.current&&f.current>=0){let e=await fetch("/api/admin/chat?company_id=".concat(a,"&action=last_admin_message"));if(!e.ok)throw Error("Fetch failed");let t=(await e.json()).last_message;if(t){let e={id:Date.now(),companyName:"الدعم الفني",message:(null==(l=t.message)?void 0:l.substring(0,80))||"رسالة جديدة من الدعم",time:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})};c(t=>[e,...t.slice(0,2)]),g(e),b(!0),setTimeout(()=>b(!1),8e3),z(),S("رسالة جديدة من الدعم الفني",null==(r=t.message)?void 0:r.substring(0,100))}}f.current=t,m(t)}}catch(e){console.error("Error checking for new messages:",e)}finally{w.current=!1}}},[t,a,A]),z=()=>{try{let e=new Audio("/notification.mp3");e.volume=.5,e.play().catch(()=>{})}catch(e){}},S=(e,t)=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:t,icon:"/favicon.ico"})};(0,i.useEffect)(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission(),k();let e=setInterval(k,4e3);return()=>clearInterval(e)},[k]);let _=()=>{t?j.push("/admin/chat"):j.push("/chat"),c([]),b(!1)};return A?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.N,{children:x&&p&&(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:.8,y:-50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-50},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none",children:(0,s.jsx)(r.P.div,{initial:{y:-20},animate:{y:[0,-10,0]},transition:{repeat:1/0,duration:2},className:"pointer-events-auto",children:(0,s.jsxs)("div",{onClick:_,className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 rounded-3xl shadow-2xl p-8 max-w-md mx-4 cursor-pointer hover:scale-105 transition-transform border-4 border-white/20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center animate-bounce",children:(0,s.jsx)(eq.A,{size:32,className:"text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-bold text-xl",children:"رسالة جديدة!"}),(0,s.jsx)("p",{className:"text-white/80 text-sm",children:t?"من دعم العملاء":"من الدعم الفني"})]}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),b(!1)},className:"absolute top-4 left-4 p-2 bg-white/20 rounded-full hover:bg-white/30 transition-all",children:(0,s.jsx)(J.A,{size:20,className:"text-white"})})]}),(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-5 mb-4 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center text-white font-bold text-lg",children:p.companyName.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-bold",children:p.companyName}),(0,s.jsx)("p",{className:"text-white/60 text-xs",children:p.time})]})]}),(0,s.jsx)("p",{className:"text-white/90 text-sm leading-relaxed",children:p.message})]}),(0,s.jsxs)("button",{className:"w-full bg-white text-indigo-600 font-bold py-4 rounded-2xl hover:bg-white/90 transition-all flex items-center justify-center gap-2 shadow-lg",children:[(0,s.jsx)("span",{children:"الذهاب للرد"}),(0,s.jsx)(O.A,{size:20})]})]})})})}),(0,s.jsx)(n.N,{children:d>0&&0===o.length&&!x&&(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},className:"fixed bottom-6 left-6 z-50",children:(0,s.jsxs)(r.P.button,{onClick:_,whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white p-5 rounded-2xl shadow-2xl shadow-indigo-500/40",children:[(0,s.jsx)(h.A,{size:28}),(0,s.jsx)(r.P.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 min-w-[28px] h-[28px] bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg border-2 border-white",children:d>9?"9+":d}),(0,s.jsx)(r.P.div,{className:"absolute inset-0 rounded-2xl bg-white/20",animate:{opacity:[0,.5,0]},transition:{repeat:1/0,duration:1.5}})]})})}),(0,s.jsx)("div",{className:"fixed top-24 left-6 z-[9998] space-y-4 pointer-events-none max-w-sm",children:(0,s.jsx)(n.N,{children:o.map(e=>(0,s.jsx)(r.P.div,{initial:{opacity:0,x:-100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-100,scale:.8},className:"pointer-events-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden cursor-pointer hover:shadow-3xl transition-shadow",onClick:_,children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 px-5 py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-white",children:[(0,s.jsx)(r.P.div,{animate:{rotate:[0,15,-15,0]},transition:{repeat:1/0,duration:.5,repeatDelay:2},children:(0,s.jsx)(u.A,{size:18})}),(0,s.jsx)("span",{className:"font-bold",children:"رسالة جديدة"})]}),(0,s.jsx)("button",{onClick:t=>{var a;t.stopPropagation(),a=e.id,c(e=>e.filter(e=>e.id!==a))},className:"text-white/70 hover:text-white transition-colors p-1",children:(0,s.jsx)(J.A,{size:18})})]}),(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold",children:e.companyName.charAt(0)}),(0,s.jsx)("h4",{className:"font-bold text-gray-800 truncate flex-1",children:e.companyName})]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm truncate",children:e.message}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:e.time})]})]})},e.id))})})]})}var eB=a(403);function eG(){let[e,t]=(0,i.useState)(null),[a,o]=(0,i.useState)(!1);(0,i.useRef)(0),(0,l.useRouter)();let c=(0,i.useCallback)(async()=>{try{let e=parseInt(localStorage.getItem("last_admin_notification_id")||"0"),a=await fetch("/api/admin/notifications?limit=1&last_id=".concat(e)),s=await a.json();if(s.success&&s.notifications&&s.notifications.length>0){let a=s.notifications[0];if(a.id>e){t(a),o(!0);try{let e=new Audio("/notification.mp3");e.volume=.4,e.play().catch(()=>{})}catch(e){}}}}catch(e){console.error("Error checking for admin notifications:",e)}},[]);return(0,i.useEffect)(()=>{c();let e=setInterval(c,3e4);return()=>clearInterval(e)},[c]),(0,s.jsx)(n.N,{children:a&&e&&(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-slate-950/60 backdrop-blur-sm",children:(0,s.jsx)(r.P.div,{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},className:"relative w-full max-w-lg overflow-hidden",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-[2.5rem] shadow-2xl border-4 border-white/20 dark:border-slate-800 overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-[#2c3e50] via-[#34495e] to-[#2c3e50] p-8 text-white relative",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:(0,s.jsx)(eB.A,{size:120})}),(0,s.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center animate-pulse",children:(0,s.jsx)(u.A,{size:28,className:"text-amber-400"})}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("h2",{className:"text-2xl font-black tracking-tight",children:"تنبيه إداري هام"}),(0,s.jsx)("p",{className:"text-white/60 font-bold text-xs uppercase tracking-widest mt-1",children:new Date(e.created_at).toLocaleDateString("en-US")})]})]}),(0,s.jsx)("button",{onClick:()=>{e&&localStorage.setItem("last_admin_notification_id",e.id.toString()),o(!1)},className:"absolute top-6 left-6 w-10 h-10 rounded-xl bg-white/10 hover:bg-white/20 flex items-center justify-center transition-all border border-white/10",children:(0,s.jsx)(J.A,{size:20})})]}),(0,s.jsxs)("div",{className:"p-8 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"text-2xl font-black text-slate-900 dark:text-white leading-tight",children:e.title}),(0,s.jsx)("div",{className:"w-20 h-1.5 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full"})]}),(0,s.jsx)("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-3xl p-6 border-2 border-slate-100 dark:border-slate-800",children:(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-300 font-bold text-lg leading-relaxed text-right",children:e.message})}),e.image_path&&(0,s.jsx)("div",{className:"rounded-3xl overflow-hidden border-2 border-slate-100 dark:border-slate-800 shadow-lg",children:(0,s.jsx)("img",{src:e.image_path,alt:"Notification content",className:"w-full h-48 object-cover",onerror:"this.style.display='none'"})}),(0,s.jsx)("div",{className:"flex gap-4 pt-2",children:(0,s.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{e&&localStorage.setItem("last_admin_notification_id",e.id.toString()),o(!1)},className:"flex-1 bg-gradient-to-r from-[#3498db] to-[#2ecc71] text-white py-5 rounded-2xl font-black text-xl shadow-xl shadow-blue-500/20 transition-all flex items-center justify-center gap-3",children:[(0,s.jsx)("span",{children:"فهمت، شكراً"}),(0,s.jsx)(O.A,{size:24})]})})]}),(0,s.jsx)("div",{className:"h-2 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})]})})})})}function eQ(e){let{children:t,user:a,permissions:o,userType:c,subscriptionData:d}=e,[m,x]=(0,i.useState)(!1),{isRTL:h}=(0,F.Y)(),[u,b]=(0,i.useState)(!1),[p,g]=(0,i.useState)(0),f=(0,i.useRef)(!1),w=(0,l.usePathname)(),j=(0,l.useRouter)(),N=w.includes("/subscriptions"),v=(null==a?void 0:a.role)!=="admin"&&d&&!d.isActive&&!N,y=(0,i.useCallback)(async()=>{if((null==a?void 0:a.company_id)&&(null==a?void 0:a.role)!=="admin"&&!f.current){f.current=!0;try{let e=await fetch("/api/admin/chat?company_id=".concat(a.company_id,"&action=client_unread"));if(!e.ok)throw Error("Fetch failed");let t=await e.json();void 0!==t.unread_count&&g(t.unread_count)}catch(e){console.error("Error fetching unread count:",e)}finally{f.current=!1}}},[null==a?void 0:a.company_id,null==a?void 0:a.role]);return((0,i.useEffect)(()=>{b(!0)},[]),(0,i.useEffect)(()=>{y();let e=setInterval(y,5e3);return()=>clearInterval(e)},[y]),u)?(0,s.jsxs)("div",{className:"h-screen overflow-hidden text-foreground transition-colors duration-300",dir:h?"rtl":"ltr",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-[#0a0e1a] via-[#0d1525] to-[#0a0e1a] -z-10"}),(0,s.jsx)("div",{className:"fixed inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-blue-900/20 via-transparent to-transparent -z-10"}),(0,s.jsx)("div",{className:"fixed inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-purple-900/15 via-transparent to-transparent -z-10"}),(0,s.jsx)(eO,{isAdmin:(null==a?void 0:a.role)==="admin",companyId:null==a?void 0:a.company_id}),(0,s.jsx)(eG,{}),(0,s.jsx)("aside",{className:"hidden lg:flex fixed top-0 ".concat(h?"right-0":"left-0"," h-screen w-64 z-50"),children:(0,s.jsx)(L,{userRole:null==a?void 0:a.role,permissions:o,userType:c})}),(0,s.jsx)(n.N,{children:m&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[100] lg:hidden",children:[(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>x(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,s.jsxs)(r.P.div,{initial:{x:h?"100%":"-100%"},animate:{x:0},exit:{x:h?"100%":"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute top-0 ".concat(h?"right-0":"left-0"," bottom-0 w-64 overflow-hidden flex flex-col"),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0d1525] via-[#0a0e1a] to-[#080c15]"}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center justify-between p-4 border-b border-white/5",children:[(0,s.jsx)("span",{className:"text-white font-black text-sm",children:h?"القائمة الرئيسية":"Main Menu"}),(0,s.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>x(!1),className:"p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:(0,s.jsx)(J.A,{size:20})})]}),(0,s.jsx)("div",{className:"relative z-10 flex-1 overflow-y-auto",children:(0,s.jsx)(L,{userRole:null==a?void 0:a.role,permissions:o,userType:c})})]})]})}),(0,s.jsxs)("div",{className:"".concat(h?"lg:mr-64":"lg:ml-64"," flex flex-col h-screen"),children:[(0,s.jsx)("div",{className:"flex-shrink-0 relative z-[100]",children:(0,s.jsx)(eI,{user:a,onToggleSidebar:()=>x(!0),unreadChatCount:p,subscriptionData:d})}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden relative",children:v?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[80vh] p-6 text-center",children:(0,s.jsxs)(r.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-slate-900/80 backdrop-blur-xl border border-red-500/20 p-8 rounded-3xl max-w-md w-full",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(eh.A,{size:40,className:"text-red-500"})}),(0,s.jsx)("h2",{className:"text-2xl font-black text-white mb-4",children:h?"تنبيه: اشتراك غير نشط":"Alert: Inactive Subscription"}),(0,s.jsx)("p",{className:"text-slate-400 mb-8",children:h?"عذراً، يجب أن يكون لديك اشتراك نشط لتتمكن من استخدام ميزات النظام. يرجى تفعيل باقة اشتراك للمتابعة.":"Sorry, you must have an active subscription to use system features. Please activate a subscription plan to continue."}),(0,s.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j.push("/subscriptions"),className:"w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-2xl shadow-xl shadow-blue-500/20",children:h?"الذهاب لصفحة الاشتراكات":"Go to Subscriptions"})]})}):(0,s.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"min-h-full w-full",children:t})}),(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(eL,{})})]})]}):(0,s.jsx)("div",{className:"h-screen overflow-hidden bg-background text-foreground flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"})})}}},e=>{e.O(0,[2418,4909,8720,8621,5500,3884,8441,1255,7358],()=>e(e.s=59392)),_N_E=e.O()}]);