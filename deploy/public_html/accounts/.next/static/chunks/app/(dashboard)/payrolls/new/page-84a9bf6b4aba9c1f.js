(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5552],{32839:(e,r,t)=>{Promise.resolve().then(t.bind(t,50616))},50616:(e,r,t)=>{"use strict";t.d(r,{NewPayrollClient:()=>S});var s=t(95155),a=t(12115),l=t(26497),o=t(34544),d=t(42529),n=t(6132),i=t(35299),c=t(89715),x=t(52987),b=t(16485),m=t(91169),u=t(86651),p=t(23327),h=t(79397),g=t(30814),y=t(60709),j=t(26983),f=t(52056),N=t(80647),_=t(91761),w=t(42516),v=t(46046),k=t(52619),z=t.n(k),A=t(20063);function S(e){let r,t,k,{packages:S,debts:C,companyId:F,userName:O}=e,E=(0,A.useRouter)(),[q,L]=(0,a.useState)(!1),[P,T]=(0,a.useState)(!1),[U,D]=(0,a.useState)({show:!1,type:"success",title:"",message:""}),[I,J]=(0,a.useState)(new Date().toISOString().slice(0,7)),[R,B]=(0,a.useState)(""),[G,H]=(0,a.useState)(null),[K,M]=(0,a.useState)([]),[Q,V]=(0,a.useState)([]),[W,X]=(0,a.useState)([]),[Y,Z]=(0,a.useState)([]),[$,ee]=(0,a.useState)(!1),er=(e,r,t)=>{D({show:!0,type:e,title:r,message:t}),"loading"!==e&&setTimeout(()=>D(e=>({...e,show:!1})),3e3)},et=(0,a.useCallback)(async e=>{if(e){T(!0);try{let r=await fetch("/api/packages?company_id=".concat(F,"&package_id=").concat(e));if(r.ok){let e=await r.json();H(e.package),M(e.employees||[]),V((e.tiers||[]).map(e=>({...e,min_orders:Number(e.min_orders)||0,base_salary:Number(e.base_salary)||0,increment_per_order:Number(e.increment_per_order)||0,bonus:Number(e.bonus)||0}))),X((e.slabs||[]).map(e=>({...e,from_orders:Number(e.from_orders)||0,to_orders:e.to_orders?Number(e.to_orders):null,value_per_order:Number(e.value_per_order)||0})));let t=(e.employees||[]).map(r=>{var t,s;let a=Number(r.basic_salary)||0,l=Number(r.housing_allowance)||0,o=Number(null==(t=e.package)?void 0:t.monthly_target)||0,d=Number(null==(s=e.package)?void 0:s.bonus_after_target)||0;return{employee_name:r.name,iqama_number:r.iqama_number,user_code:r.user_code||"",basic_salary:a,housing_allowance:l,nationality:r.nationality||"",job_title:r.job_title||"",target:o,bonus_per_order:d,successful_orders:0,target_deduction:0,monthly_bonus:0,operator_deduction:0,internal_deduction:0,wallet_deduction:0,internal_bonus:0,net_salary:a+l,payment_method:"غير محدد",achieved_tier:"",tier_bonus:0,extra_amount:0}});Z(t)}}catch(e){console.error("Error fetching package:",e)}finally{T(!1)}}},[F]);(0,a.useEffect)(()=>{R&&et(R)},[R,et]);let es=(0,a.useCallback)(e=>{let r=(null==G?void 0:G.work_type)||"salary",t=0,s=0,a=0,l="",o=0,d=0,n=Number(e.operator_deduction)||0,i=Number(e.internal_deduction)||0,c=Number(e.wallet_deduction)||0,x=Number(e.internal_bonus)||0,b=Number(e.successful_orders)||0,m=Number(e.basic_salary)||0,u=Number(e.housing_allowance)||0,p=n+i+c;if("salary"===r)t=m+u+x-p;else if("target"===r){let r=Number(e.target||(null==G?void 0:G.monthly_target)||0),l=Number(e.bonus_per_order||(null==G?void 0:G.bonus_after_target)||0);b<r?s=r>0?m/r*(r-b):0:a=(b-r)*l,t=m+a+x-s-p}else if("tiers"===r)if($){let e=((e,r,t,s,a)=>{let l=Number(e)||0,o=Number(r)||0,d=Number(t)||0,n=Number(s)||0,i=Number(a)||0,c=0,x="";return l<1?(c=0,x="لا توجد طلبات"):l<301?(c=2*l,x="من 1 إلى 300 طلب (2 ريال/طلب)"):l<401?(c=3*l,x="من 301 إلى 400 طلب (3 ريال/طلب)"):l<450?(c=4*l,x="من 401 إلى 449 طلب (4 ريال/طلب)"):l<520?(c=2450+(l-450)*7,x="الشريحة 1 (450-519 طلب)"):l<560?(c=3e3+(l-520)*8,x="الشريحة 2 (520-559 طلب)"):(c=3450+(l-560)*10,x="الشريحة 3 (560+ طلب)"),{net:Number(c+i-(o+d+n)),achievedTier:x,baseSalary:c}})(b,n,i,c,x);t=e.net,l=e.achievedTier}else{let e=null;for(let r of Q)if(b>=r.min_orders)e=r;else break;if(e)t=Number(e.base_salary)+(d=(b-Number(e.min_orders))*Number(e.increment_per_order))+(o=Number(e.bonus)||0)+x-p,l="من ".concat(e.min_orders," طلب");else{let e=null;for(let r of W)if(b>=r.from_orders&&(null===r.to_orders||0===r.to_orders||b<=r.to_orders)){e=r;break}e?(t=b*Number(e.value_per_order)+x-p,l="انخفاض (".concat(e.from_orders,"-").concat(e.to_orders||"فوق",")")):(t=x-p,l="لا توجد شريحة مناسبة")}}else"commission"===r&&(t=m+b*((Number(null==G?void 0:G.bonus_after_target)||0)/100)+x-p);return{...e,target_deduction:s,monthly_bonus:a,net_salary:t,achieved_tier:l,tier_bonus:o,extra_amount:d}},[G,Q,W,$]),ea=(e,r,t)=>{Z(s=>{let a=[...s];return a[e]={...a[e],[r]:t},a[e]=es(a[e]),a})},el=(0,a.useCallback)(()=>{Z(e=>e.map(e=>es(e)))},[es]);(0,a.useEffect)(()=>{Y.length>0&&el()},[$]);let eo=async e=>{if(!R||!I)return void er("error","خطأ","يرجى تحديد شهر المسير والباقة");L(!0),er("loading","جاري الحفظ",e?"جاري حفظ المسودة...":"جاري حفظ المسير...");try{let r=Y.map(e=>({employee_name:e.employee_name,iqama_number:e.iqama_number,user_code:e.user_code,basic_salary:e.basic_salary,target:e.target,successful_orders:e.successful_orders,target_deduction:e.target_deduction,monthly_bonus:e.monthly_bonus,operator_deduction:e.operator_deduction,internal_deduction:e.internal_deduction,wallet_deduction:e.wallet_deduction,internal_bonus:e.internal_bonus,net_salary:e.net_salary,payment_method:e.payment_method,housing_allowance:e.housing_allowance,achieved_tier:e.achieved_tier,tier_bonus:e.tier_bonus,extra_amount:e.extra_amount})),t=await fetch("/api/payrolls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:F,payroll_month:I,package_id:R,saved_by:O,is_draft:+!!e,items:r})});if(t.ok)er("success","تم الحفظ بنجاح",e?"تم حفظ المسودة بنجاح":"تم حفظ المسير بنجاح"),setTimeout(()=>{E.push("/payrolls"),E.refresh()},1500);else{let e=await t.json();er("error","فشل الحفظ",e.error||"فشل حفظ المسير")}}catch(e){er("error","خطأ","حدث خطأ أثناء الحفظ")}finally{L(!1)}},ed=(r=0,t=0,k=0,Y.forEach(e=>{e.net_salary>=0&&(r+=e.net_salary),t+=e.successful_orders,k+=e.target_deduction+e.operator_deduction+e.internal_deduction+e.wallet_deduction}),{totalSalary:r,totalOrders:t,totalDeductions:k});return(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsx)(l.N,{children:U.show&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>"loading"!==U.type&&D(e=>({...e,show:!1}))}),(0,s.jsx)(o.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md",children:(0,s.jsx)("div",{className:"bg-white rounded-3xl p-8 shadow-2xl border-t-4 ".concat("success"===U.type?"border-emerald-500":"error"===U.type?"border-red-500":"border-blue-500"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"h-20 w-20 rounded-full mx-auto mb-6 flex items-center justify-center ".concat("success"===U.type?"bg-emerald-100 text-emerald-500":"error"===U.type?"bg-red-100 text-red-500":"bg-blue-100 text-blue-500"),children:["success"===U.type&&(0,s.jsx)(d.A,{size:40}),"error"===U.type&&(0,s.jsx)(n.A,{size:40}),"loading"===U.type&&(0,s.jsx)(i.A,{size:40,className:"animate-spin"})]}),(0,s.jsx)("h3",{className:"text-2xl font-black text-gray-900 mb-2",children:U.title}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:U.message}),"loading"!==U.type&&(0,s.jsx)("button",{onClick:()=>D(e=>({...e,show:!1})),className:"px-8 py-3 rounded-xl font-bold text-white transition-all ".concat("success"===U.type?"bg-emerald-500 hover:bg-emerald-600":"bg-red-500 hover:bg-red-600"),children:"حسناً"})]})})})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-6",children:(0,s.jsxs)("div",{className:"max-w-[1800px] mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-br from-[#1a237e] to-[#283593] rounded-2xl p-6 text-white shadow-xl",children:[(0,s.jsx)("div",{className:"relative z-10",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"h-14 w-14 rounded-xl bg-amber-500 flex items-center justify-center shadow-lg",children:(0,s.jsx)(c.A,{size:28})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-black",children:"إنشاء مسير رواتب جديد"}),(0,s.jsx)("p",{className:"text-white/60 text-sm",children:"يمكنك من هنا إنشاء مسير رواتب جديد للموظفين"})]})]}),(0,s.jsx)(z(),{href:"/payrolls",children:(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white/10 text-white font-bold text-sm hover:bg-white/20 transition-all border border-white/10",children:[(0,s.jsx)(x.A,{size:16}),(0,s.jsx)("span",{children:"العودة للقائمة"})]})})]})}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/5 rounded-full -mr-20 -mt-20 blur-2xl"})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl border border-gray-100 p-5 shadow-sm",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center gap-1.5 text-xs font-bold text-gray-700 mb-1.5",children:[(0,s.jsx)(b.A,{size:14,className:"text-gray-400"}),"شهر المسير"]}),(0,s.jsx)("input",{type:"month",value:I,onChange:e=>J(e.target.value),className:"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 outline-none text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center gap-1.5 text-xs font-bold text-gray-700 mb-1.5",children:[(0,s.jsx)(m.A,{size:14,className:"text-gray-400"}),"باقة الموظفين"]}),(0,s.jsxs)("select",{value:R,onChange:e=>B(e.target.value),className:"w-full px-3 py-2.5 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 outline-none text-sm",children:[(0,s.jsx)("option",{value:"",children:"-- اختر الباقة --"}),S.map(e=>(0,s.jsx)("option",{value:e.id,children:e.group_name},e.id))]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("button",{onClick:()=>R&&et(R),disabled:!R||P,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-blue-500 text-white font-bold text-sm hover:bg-blue-600 transition-all disabled:opacity-50",children:[P?(0,s.jsx)(i.A,{size:16,className:"animate-spin"}):(0,s.jsx)(u.A,{size:16}),(0,s.jsx)("span",{children:"بحث"})]})})]})}),G&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200 p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(p.A,{size:18,className:"text-blue-500"}),(0,s.jsx)("h3",{className:"font-bold text-blue-900",children:"معلومات النظام"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl p-3 border border-blue-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[(0,s.jsx)(h.A,{size:14}),(0,s.jsx)("span",{className:"text-xs font-bold",children:"نظام العمل"})]}),(0,s.jsx)("p",{className:"font-bold text-gray-900",children:(e=>{switch(e){case"salary":return"الراتب الثابت";case"target":return"نظام التارقت";case"tiers":return"نظام الشرائح";case"commission":return"نظام العمولة";default:return e}})(G.work_type)})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-3 border border-blue-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[(0,s.jsx)(g.A,{size:14}),(0,s.jsx)("span",{className:"text-xs font-bold",children:"التارقت الشهري"})]}),(0,s.jsxs)("p",{className:"font-bold text-gray-900",children:[G.monthly_target||0," طلب"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-3 border border-blue-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[(0,s.jsx)(y.A,{size:14}),(0,s.jsx)("span",{className:"text-xs font-bold",children:"قيمة البونص"})]}),(0,s.jsxs)("p",{className:"font-bold text-gray-900",children:[G.bonus_after_target||0," ريال لكل طلب"]})]})]}),"tiers"===G.work_type&&(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-blue-200",children:(0,s.jsxs)("button",{onClick:()=>ee(!$),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-bold text-sm transition-all ".concat($?"bg-emerald-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[$?(0,s.jsx)(d.A,{size:16}):(0,s.jsx)(j.A,{size:16}),$?"نظام الشرائح مفعل":"تفعيل نظام الشرائح المخصص"]})})]}),C.length>0&&(0,s.jsxs)("div",{className:"bg-amber-50 rounded-2xl border border-amber-200 p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(f.A,{size:18,className:"text-amber-600"}),(0,s.jsx)("h3",{className:"font-bold text-amber-900",children:"ديون غير مسددة"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:C.slice(0,6).map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-xl p-3 border border-amber-100",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900 text-sm",children:e.employee_name}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.iqama_number}),(0,s.jsxs)("p",{className:"text-red-600 font-bold text-sm mt-1",children:[Number(e.amount).toLocaleString("en-US")," ر.س"]})]},e.id))})]}),Y.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-[#1a237e] to-[#283593] px-4 py-3 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-white",children:[(0,s.jsx)(N.A,{size:18}),(0,s.jsx)("h3",{className:"font-bold text-sm",children:"salary"===G.work_type?"جدول الرواتب":"target"===G.work_type?"جدول التارقت":"tiers"===G.work_type?"جدول الشرائح":"جدول الرواتب"})]}),(0,s.jsxs)("span",{className:"bg-white/20 text-white px-2 py-0.5 rounded text-xs font-bold",children:[Y.length," موظف"]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,s.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"اسم الموظف"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"الإقامة"}),"salary"!==G.work_type&&(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"الكود"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"الراتب"}),"salary"===G.work_type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"السكن"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"الجنسية"})]}),"salary"!==G.work_type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"التارقت"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"البونص"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"الطلبات"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"خصم"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"بونص"})]}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"مشغل"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"داخلي"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"محفظة"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"مكافأة"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"صافي"}),(0,s.jsx)("th",{className:"text-right px-3 py-3 text-xs font-bold text-gray-700 whitespace-nowrap border border-gray-200",children:"التحويل"})]})}),(0,s.jsx)("tbody",{children:Y.map((e,r)=>(0,s.jsxs)("tr",{className:"transition-colors duration-150 hover:bg-blue-50/50 ".concat(e.net_salary<0?"bg-red-50 hover:bg-red-100/50":""),children:[(0,s.jsx)("td",{className:"px-3 py-2.5 font-bold text-gray-900 whitespace-nowrap border border-gray-200",children:e.employee_name}),(0,s.jsx)("td",{className:"px-3 py-2.5 text-gray-600 whitespace-nowrap border border-gray-200",children:e.iqama_number}),"salary"!==G.work_type&&(0,s.jsx)("td",{className:"px-3 py-2.5 text-gray-600 whitespace-nowrap border border-gray-200",children:e.user_code}),(0,s.jsx)("td",{className:"px-3 py-2.5 font-bold text-gray-900 border border-gray-200",children:e.basic_salary.toLocaleString("en-US")}),"salary"===G.work_type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"px-3 py-2.5 text-gray-600 border border-gray-200",children:e.housing_allowance.toLocaleString("en-US")}),(0,s.jsx)("td",{className:"px-3 py-2.5 text-gray-600 border border-gray-200",children:e.nationality})]}),"salary"!==G.work_type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"px-3 py-2.5 text-gray-600 border border-gray-200",children:e.target}),(0,s.jsx)("td",{className:"px-3 py-2.5 text-gray-600 border border-gray-200",children:e.bonus_per_order}),(0,s.jsx)("td",{className:"px-3 py-2.5 border border-gray-200",children:(0,s.jsx)("input",{type:"number",value:e.successful_orders,onChange:e=>ea(r,"successful_orders",parseFloat(e.target.value)||0),className:"w-16 px-2 py-1 rounded-lg border border-gray-200 text-center text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-all",min:"0"})}),(0,s.jsx)("td",{className:"px-3 py-2.5 border border-gray-200",children:(0,s.jsx)("input",{type:"text",value:(Number(e.target_deduction)||0).toFixed(2),readOnly:!0,className:"w-16 px-2 py-1 rounded-lg border border-gray-100 bg-gray-50 text-center text-sm text-red-600"})}),(0,s.jsx)("td",{className:"px-3 py-2.5 border border-gray-200",children:(0,s.jsx)("input",{type:"text",value:(Number(e.monthly_bonus)||0).toFixed(2),readOnly:!0,className:"w-16 px-2 py-1 rounded-lg border border-gray-100 bg-gray-50 text-center text-sm text-emerald-600"})})]}),(0,s.jsx)("td",{className:"px-3 py-2.5 border border-gray-200",children:(0,s.jsx)("input",{type:"number",value:e.operator_deduction,onChange:e=>ea(r,"operator_deduction",parseFloat(e.target.value)||0),className:"w-16 px-2 py-1 rounded-lg border border-gray-200 text-center text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-all",min:"0"})}),(0,s.jsx)("td",{className:"px-3 py-2.5 border border-gray-200",children:(0,s.jsx)("input",{type:"number",value:e.internal_deduction,onChange:e=>ea(r,"internal_deduction",parseFloat(e.target.value)||0),className:"w-16 px-2 py-1 rounded-lg border border-gray-200 text-center text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-all",min:"0"})}),(0,s.jsx)("td",{className:"px-3 py-2.5 border border-gray-200",children:(0,s.jsx)("input",{type:"number",value:e.wallet_deduction,onChange:e=>ea(r,"wallet_deduction",parseFloat(e.target.value)||0),className:"w-16 px-2 py-1 rounded-lg border border-gray-200 text-center text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-all",min:"0"})}),(0,s.jsx)("td",{className:"px-3 py-2.5 border border-gray-200",children:(0,s.jsx)("input",{type:"number",value:e.internal_bonus,onChange:e=>ea(r,"internal_bonus",parseFloat(e.target.value)||0),className:"w-16 px-2 py-1 rounded-lg border border-gray-200 text-center text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-all",min:"0"})}),(0,s.jsx)("td",{className:"px-3 py-2.5 border border-gray-200",children:(0,s.jsx)("input",{type:"text",value:(Number(e.net_salary)||0).toFixed(2),readOnly:!0,className:"w-20 px-2 py-1 rounded-lg border text-center text-sm font-bold ".concat(e.net_salary<0?"bg-red-100 border-red-200 text-red-600":"bg-emerald-50 border-emerald-200 text-emerald-600")})}),(0,s.jsx)("td",{className:"px-3 py-2.5 border border-gray-200",children:(0,s.jsxs)("select",{value:e.payment_method,onChange:e=>ea(r,"payment_method",e.target.value),className:"w-20 px-2 py-1 rounded-lg border border-gray-200 text-sm focus:border-blue-400 focus:ring-1 focus:ring-blue-200 transition-all",children:[(0,s.jsx)("option",{value:"غير محدد",children:"غير محدد"}),(0,s.jsx)("option",{value:"مدد",children:"مدد"}),(0,s.jsx)("option",{value:"كاش",children:"كاش"}),(0,s.jsx)("option",{value:"تحويل",children:"تحويل"})]})})]},r))})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-4 border-t border-gray-100",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100 text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-emerald-600 mb-2",children:[(0,s.jsx)(_.A,{size:18}),(0,s.jsx)("span",{className:"text-sm font-bold",children:"إجمالي الرواتب"})]}),(0,s.jsxs)("p",{className:"text-2xl font-black text-emerald-600",children:[ed.totalSalary.toLocaleString("en-US",{minimumFractionDigits:2})," ريال"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100 text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-blue-600 mb-2",children:[(0,s.jsx)(g.A,{size:18}),(0,s.jsx)("span",{className:"text-sm font-bold",children:"الطلبات الناجحة"})]}),(0,s.jsx)("p",{className:"text-2xl font-black text-blue-600",children:ed.totalOrders})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100 text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-red-600 mb-2",children:[(0,s.jsx)(n.A,{size:18}),(0,s.jsx)("span",{className:"text-sm font-bold",children:"إجمالي الخصومات"})]}),(0,s.jsxs)("p",{className:"text-2xl font-black text-red-600",children:[ed.totalDeductions.toLocaleString("en-US",{minimumFractionDigits:2})," ريال"]})]})]})})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 pb-6",children:[(0,s.jsx)(z(),{href:"/payrolls",children:(0,s.jsxs)("button",{className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-gray-100 text-gray-700 font-bold text-sm hover:bg-gray-200 transition-all",children:[(0,s.jsx)(x.A,{size:16}),(0,s.jsx)("span",{children:"إلغاء"})]})}),(0,s.jsxs)("button",{onClick:()=>eo(!0),disabled:q||0===Y.length,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-amber-500 text-white font-bold text-sm hover:bg-amber-600 transition-all disabled:opacity-50",children:[q?(0,s.jsx)(i.A,{size:16,className:"animate-spin"}):(0,s.jsx)(w.A,{size:16}),(0,s.jsx)("span",{children:"حفظ كمسودة"})]}),(0,s.jsxs)("button",{onClick:()=>eo(!1),disabled:q||0===Y.length,className:"flex items-center gap-2 px-8 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold text-sm hover:from-emerald-600 hover:to-teal-600 transition-all disabled:opacity-50 shadow-lg shadow-emerald-500/25",children:[q?(0,s.jsx)(i.A,{size:16,className:"animate-spin"}):(0,s.jsx)(v.A,{size:16}),(0,s.jsx)("span",{children:"حفظ المسير"})]})]})]}),!G&&!P&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-12 text-center",children:[(0,s.jsx)(p.A,{size:48,className:"mx-auto text-blue-300 mb-4"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-gray-600 mb-2",children:"مرحباً بك في إنشاء مسير الرواتب"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"يرجى تحديد شهر المسير والباقة لبدء إنشاء المسير"})]}),P&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-12 text-center",children:[(0,s.jsx)(i.A,{size:48,className:"mx-auto text-blue-500 mb-4 animate-spin"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-gray-600 mb-2",children:"جاري تحميل البيانات..."})]})]})})]})}}},e=>{e.O(0,[2418,2619,6798,8441,1255,7358],()=>e(e.s=32839)),_N_E=e.O()}]);