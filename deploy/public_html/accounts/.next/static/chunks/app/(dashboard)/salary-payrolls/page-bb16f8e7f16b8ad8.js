(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2466],{11267:(e,t,s)=>{Promise.resolve().then(s.bind(s,79691))},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var l=s(2821),a=s(75889);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,l.$)(t))}},79691:(e,t,s)=>{"use strict";s.d(t,{PayrollsListClient:()=>C});var l=s(95155),a=s(12115),r=s(26497),i=s(34544),n=s(42529),d=s(6132),o=s(35299),c=s(77801),x=s(52056),m=s(91169),b=s(91761),h=s(65229),p=s(71360),u=s(89715),f=s(86651),j=s(6191),g=s(16485),y=s(26983),N=s(57828),w=s(11010),v=s(52619),k=s.n(v),z=s(20063),A=s(64269),_=s(83884);function C(e){let{payrolls:t,stats:s,companyId:v}=e,C=(0,_.c)("financialVouchersPage.salaryPayrollsPage"),P=(0,_.c)("common"),{locale:S}=(0,_.Y)(),M="ar"===S,[L,E]=(0,a.useState)(t),[F,T]=(0,a.useState)(""),[I,D]=(0,a.useState)(null),[O,Q]=(0,a.useState)({show:!1,type:"success",title:"",message:""}),[B,R]=(0,a.useState)({show:!1,payrollId:null,payrollMonth:"",employeeCount:0,totalAmount:0}),V=(0,z.useRouter)(),W=L.filter(e=>{var t,s,l;let a=F.toLowerCase();return(null==(t=e.payroll_month)?void 0:t.toLowerCase().includes(a))||(null==(s=e.package_name)?void 0:s.toLowerCase().includes(a))||(null==(l=e.saved_by)?void 0:l.toLowerCase().includes(a))}),Y=(e,t,s)=>{Q({show:!0,type:e,title:t,message:s}),"loading"!==e&&setTimeout(()=>Q(e=>({...e,show:!1})),5e3)},$=()=>{R({show:!1,payrollId:null,payrollMonth:"",employeeCount:0,totalAmount:0})},q=async()=>{if(!B.payrollId)return;let e=B.payrollId,t=B.payrollMonth;D(e),$(),Y("loading",C("notifications.deleting"),C("notifications.deletingMsg",{month:t}));try{let s=await fetch("/api/payrolls/".concat(e),{method:"DELETE"});if(s.ok)E(t=>t.filter(t=>t.id!==e)),Y("success",C("notifications.deleteSuccess"),C("notifications.deleteSuccessMsg",{month:t})),V.refresh();else{let e=await s.json().catch(()=>({}));Y("error",C("notifications.deleteFailed"),e.error||C("notifications.deleteFailedMsg"))}}catch(e){Y("error",C("notifications.error"),C("notifications.errorMsg"))}finally{D(null)}};return(0,l.jsxs)("div",{className:"min-h-screen p-4 md:p-8",dir:M?"rtl":"ltr",children:[(0,l.jsx)(r.N,{children:O.show&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>"loading"!==O.type&&Q(e=>({...e,show:!1}))}),(0,l.jsx)(i.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md",children:(0,l.jsx)("div",{className:"bg-white rounded-3xl p-8 shadow-2xl border-t-4 ".concat("success"===O.type?"border-emerald-500":"error"===O.type?"border-red-500":"border-blue-500"),children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"h-20 w-20 rounded-full mx-auto mb-6 flex items-center justify-center ".concat("success"===O.type?"bg-emerald-100 text-emerald-500":"error"===O.type?"bg-red-100 text-red-500":"bg-blue-100 text-blue-500"),children:["success"===O.type&&(0,l.jsx)(n.A,{size:40}),"error"===O.type&&(0,l.jsx)(d.A,{size:40}),"loading"===O.type&&(0,l.jsx)(o.A,{size:40,className:"animate-spin"})]}),(0,l.jsx)("h3",{className:"text-2xl font-black text-gray-900 mb-2",children:O.title}),(0,l.jsx)("p",{className:"text-gray-500 mb-6",children:O.message}),"loading"!==O.type&&(0,l.jsx)("button",{onClick:()=>Q(e=>({...e,show:!1})),className:"px-8 py-3 rounded-xl font-bold text-white transition-all ".concat("success"===O.type?"bg-emerald-500 hover:bg-emerald-600":"bg-red-500 hover:bg-red-600"),children:P("ok")})]})})})]})}),(0,l.jsx)(r.N,{children:B.show&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:$}),(0,l.jsx)(i.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md",children:(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-red-500 to-rose-600 p-6 text-white relative overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 blur-2xl"}),(0,l.jsxs)("div",{className:"relative z-10 flex items-center gap-4",children:[(0,l.jsx)("div",{className:"h-16 w-16 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center",children:(0,l.jsx)(c.A,{size:32})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-black",children:C("notifications.deleteConfirm")}),(0,l.jsx)("p",{className:"text-white/70 text-sm",children:C("notifications.deleteQuestion")})]})]})]}),(0,l.jsxs)("div",{className:"p-6 space-y-4",children:[(0,l.jsx)("div",{className:"bg-red-50 border-2 border-red-100 rounded-2xl p-4",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(x.A,{size:24,className:"text-red-500 mt-0.5 flex-shrink-0"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-bold text-red-900 text-sm",children:C("notifications.deleteWarning")}),(0,l.jsx)("p",{className:"text-red-700 font-black text-lg mt-1",children:B.payrollMonth})]})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3 border border-gray-100 text-center",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1.5 text-blue-600 mb-1",children:[(0,l.jsx)(m.A,{size:14}),(0,l.jsx)("span",{className:"text-xs font-bold",children:C("table.employeesCount")})]}),(0,l.jsx)("p",{className:"text-lg font-black text-gray-900",children:B.employeeCount})]}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3 border border-gray-100 text-center",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1.5 text-emerald-600 mb-1",children:[(0,l.jsx)(b.A,{size:14}),(0,l.jsx)("span",{className:"text-xs font-bold",children:C("table.totalSalaries")})]}),(0,l.jsx)("p",{className:"text-lg font-black text-gray-900",children:Number(B.totalAmount||0).toLocaleString(S)})]})]}),(0,l.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:(0,l.jsx)("p",{className:"text-amber-800 text-xs font-bold text-center",children:C("notifications.deleteNote")})}),(0,l.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,l.jsxs)("button",{onClick:$,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gray-100 text-gray-700 font-bold text-sm hover:bg-gray-200 transition-all",children:[(0,l.jsx)(h.A,{size:16}),(0,l.jsx)("span",{children:P("cancel")})]}),(0,l.jsxs)("button",{onClick:q,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-red-500 to-rose-600 text-white font-bold text-sm hover:from-red-600 hover:to-rose-700 transition-all shadow-lg shadow-red-500/25",children:[(0,l.jsx)(p.A,{size:16}),(0,l.jsx)("span",{children:C("notifications.confirmBtn")})]})]})]})]})})]})}),(0,l.jsx)("div",{className:"max-w-[97%] mx-auto",children:(0,l.jsxs)(i.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-br from-[#1e293b] via-[#334155] to-[#1e293b] p-8 text-white shadow-2xl border border-white/10",children:[(0,l.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-emerald-500 via-rose-500 via-amber-500 via-purple-500 to-blue-500 animate-gradient-x"}),(0,l.jsxs)("div",{className:"relative z-10 space-y-8",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-5",children:[(0,l.jsx)("div",{className:"h-14 w-14 rounded-2xl bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-2xl",children:(0,l.jsx)(u.A,{size:28,className:"text-amber-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl md:text-3xl font-black tracking-tight bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent",children:C("title")}),(0,l.jsx)("p",{className:"text-slate-400 font-medium text-sm",children:C("description")})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-3 border border-white/5 text-center",children:[(0,l.jsx)("div",{className:"text-lg font-black text-white",children:s.total}),(0,l.jsx)("div",{className:"text-[9px] text-slate-300 font-bold uppercase tracking-wider",children:C("stats.total")})]}),(0,l.jsxs)("div",{className:"bg-emerald-500/10 backdrop-blur-md rounded-xl p-3 border border-emerald-500/20 text-center",children:[(0,l.jsx)("div",{className:"text-lg font-black text-emerald-400",children:Number(s.total_amount).toLocaleString(S)}),(0,l.jsx)("div",{className:"text-[9px] text-emerald-200/60 font-bold uppercase tracking-wider",children:C("stats.sar")})]}),(0,l.jsxs)("div",{className:"bg-blue-500/10 backdrop-blur-md rounded-xl p-3 border border-blue-500/20 text-center",children:[(0,l.jsx)("div",{className:"text-lg font-black text-blue-400",children:s.confirmed_count}),(0,l.jsx)("div",{className:"text-[9px] text-blue-200/60 font-bold uppercase tracking-wider",children:C("stats.confirmed")})]}),(0,l.jsxs)("div",{className:"bg-amber-500/10 backdrop-blur-md rounded-xl p-3 border border-amber-500/20 text-center",children:[(0,l.jsx)("div",{className:"text-lg font-black text-amber-400",children:s.draft_count}),(0,l.jsx)("div",{className:"text-[9px] text-amber-200/60 font-bold uppercase tracking-wider",children:C("stats.draft")})]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between bg-white/5 rounded-2xl p-4 border border-white/10",children:[(0,l.jsxs)("div",{className:"relative w-full md:w-96",children:[(0,l.jsx)(f.A,{className:(0,A.cn)("absolute top-1/2 -translate-y-1/2 text-slate-400",M?"right-4":"left-4"),size:18}),(0,l.jsx)("input",{type:"text",placeholder:C("searchPlaceholder"),value:F,onChange:e=>T(e.target.value),className:(0,A.cn)("w-full py-3 rounded-xl border border-white/10 bg-white/5 text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none text-sm font-bold transition-all",M?"pr-12 pl-4":"pl-12 pr-4")})]}),(0,l.jsx)(k(),{href:"/salary-payrolls/new",children:(0,l.jsxs)("button",{className:"flex items-center gap-3 px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 text-white font-black text-sm hover:from-blue-600 hover:to-blue-700 transition-all shadow-xl shadow-blue-500/20 active:scale-95",children:[(0,l.jsx)(j.A,{size:18}),(0,l.jsx)("span",{children:C("createNew")})]})})]}),(0,l.jsxs)("div",{className:"bg-white/5 rounded-2xl border border-white/10 overflow-hidden",children:[(0,l.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:(0,l.jsx)(u.A,{size:16,className:"text-blue-400"})}),(0,l.jsx)("h3",{className:"font-black text-white text-sm",children:C("table.title")})]}),(0,l.jsx)("span",{className:"bg-blue-500/20 text-blue-300 px-3 py-1 rounded-lg text-[10px] font-black border border-blue-500/30",children:C("table.count",{count:W.length})})]}),W.length>0?(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:(0,A.cn)("w-full",M?"text-right":"text-left"),children:[(0,l.jsx)("thead",{className:"bg-white/5",children:(0,l.jsxs)("tr",{className:"border-b border-white/10",children:[(0,l.jsx)("th",{className:"px-4 py-3 text-xs font-bold text-slate-400",children:C("table.no")}),(0,l.jsx)("th",{className:"px-4 py-3 text-xs font-bold text-slate-400",children:C("table.payrollMonth")}),(0,l.jsx)("th",{className:"px-4 py-3 text-xs font-bold text-slate-400",children:C("table.package")}),(0,l.jsx)("th",{className:"px-4 py-3 text-xs font-bold text-slate-400",children:C("table.employeesCount")}),(0,l.jsx)("th",{className:"px-4 py-3 text-xs font-bold text-slate-400",children:C("table.totalSalaries")}),(0,l.jsx)("th",{className:"px-4 py-3 text-xs font-bold text-slate-400",children:C("table.status")}),(0,l.jsx)("th",{className:"px-4 py-3 text-xs font-bold text-slate-400 text-center",children:C("table.actions")})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-white/5",children:W.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-slate-400",children:e.id}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"h-8 w-8 rounded-lg bg-blue-500/20 flex items-center justify-center text-blue-400",children:(0,l.jsx)(g.A,{size:14})}),(0,l.jsx)("span",{className:"font-bold text-white text-sm",children:e.payroll_month})]})}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("span",{className:"font-bold text-white text-sm",children:e.package_name||C("table.notSpecified")}),(0,l.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full inline-block w-fit ".concat((e=>{switch(e){case"salary":return"bg-emerald-100 text-emerald-700";case"target":return"bg-blue-100 text-blue-700";case"tiers":return"bg-purple-100 text-purple-700";case"commission":return"bg-amber-100 text-amber-700";default:return"bg-gray-100 text-gray-700"}})(e.work_type)),children:(e=>{switch(e){case"salary":return C("workTypes.salary");case"target":return C("workTypes.target");case"tiers":return C("workTypes.tiers");case"commission":return C("workTypes.commission");default:return e}})(e.work_type)})]})}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,l.jsx)(m.A,{size:14,className:"text-slate-400"}),(0,l.jsx)("span",{className:"font-bold text-white",children:e.employee_count}),(0,l.jsx)("span",{className:"text-slate-400 text-xs",children:C("table.employee")})]})}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-1 text-sm font-bold text-emerald-400",children:[(0,l.jsx)(b.A,{size:14}),Number(e.total_amount||0).toLocaleString(S,{minimumFractionDigits:2}),(0,l.jsx)("span",{className:"text-xs text-slate-400",children:C("stats.sar")})]})}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.is_draft?(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400 text-xs font-bold border border-amber-500/30",children:[(0,l.jsx)(y.A,{size:10}),C("statuses.draft")]}):(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-400 text-xs font-bold border border-emerald-500/30",children:[(0,l.jsx)(n.A,{size:10}),C("statuses.confirmed")]})}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[(0,l.jsx)(k(),{href:"/salary-payrolls/".concat(e.id),children:(0,l.jsxs)("button",{className:"h-7 px-2.5 rounded-lg bg-blue-500/10 text-blue-400 flex items-center gap-1.5 hover:bg-blue-500 hover:text-white transition-all border border-blue-500/30 whitespace-nowrap",title:C("actions.view"),children:[(0,l.jsx)(N.A,{size:12}),(0,l.jsx)("span",{className:"text-[11px] font-black",children:C("actions.view")})]})}),(0,l.jsx)(k(),{href:"/salary-payrolls/".concat(e.id,"/edit"),children:(0,l.jsxs)("button",{className:"h-7 px-2.5 rounded-lg bg-amber-500/10 text-amber-400 flex items-center gap-1.5 hover:bg-amber-500 hover:text-white transition-all border border-amber-500/30 whitespace-nowrap",title:C("actions.edit"),children:[(0,l.jsx)(w.A,{size:12}),(0,l.jsx)("span",{className:"text-[11px] font-black",children:C("actions.edit")})]})}),(0,l.jsx)("button",{onClick:()=>{R({show:!0,payrollId:e.id,payrollMonth:e.payroll_month,employeeCount:e.employee_count,totalAmount:e.total_amount})},disabled:I===e.id,className:"h-7 px-2.5 rounded-lg bg-red-500/10 text-red-400 flex items-center gap-1.5 hover:bg-red-500 hover:text-white transition-all disabled:opacity-50 border border-red-500/30 whitespace-nowrap",title:C("actions.delete"),children:I===e.id?(0,l.jsx)("div",{className:"h-3 w-3 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.A,{size:12}),(0,l.jsx)("span",{className:"text-[11px] font-black",children:C("actions.delete")})]})})]})})]},e.id))})]})}):(0,l.jsxs)("div",{className:"py-16 text-center",children:[(0,l.jsx)(u.A,{size:48,className:"mx-auto text-slate-600 mb-4"}),(0,l.jsx)("h4",{className:"text-lg font-bold text-white mb-2",children:C("noPayrolls.title")}),(0,l.jsx)("p",{className:"text-slate-400 text-sm mb-4",children:C("noPayrolls.desc")}),(0,l.jsx)(k(),{href:"/salary-payrolls/new",children:(0,l.jsxs)("button",{className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-emerald-500 text-white font-bold text-sm hover:bg-emerald-600 transition-all",children:[(0,l.jsx)(j.A,{size:16}),(0,l.jsx)("span",{children:C("createNew")})]})})]})]})]}),(0,l.jsx)("div",{className:"absolute -bottom-12 -right-12 w-48 h-48 bg-blue-500/10 rounded-full blur-3xl"}),(0,l.jsx)("div",{className:"absolute -top-12 -left-12 w-48 h-48 bg-purple-500/10 rounded-full blur-3xl"})]})})]})}}},e=>{e.O(0,[2418,4909,2619,1898,3884,8441,1255,7358],()=>e(e.s=11267)),_N_E=e.O()}]);