(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9805],{1747:(e,t,s)=>{"use strict";s.d(t,{NewInvoiceClient:()=>E});var a=s(95155),l=s(12115),r=s(26497),i=s(34544),c=s(42529),n=s(6132),d=s(35299),o=s(59384),x=s(27937),m=s(89715),p=s(76907),h=s(37107),b=s(53409),u=s(19204),g=s(44274),j=s(19408),f=s(91169),v=s(24033),y=s(78519),N=s(21873),w=s(69141),k=s(10383),_=s(16485),A=s(26983),z=s(95740),S=s(10512),C=s(6191),M=s(71360),D=s(80647),P=s(52987),L=s(42516),T=s(52619),F=s.n(T),I=s(20063),q=s(83884),V=s(64269);function E(e){let{customers:t,invoiceNumber:s,companyId:T,userName:E}=e,H=(0,q.c)("newInvoicePage"),O=(0,q.c)("common"),U=(0,I.useRouter)(),[B,R]=(0,l.useState)(!1),[W,J]=(0,l.useState)({show:!1,type:"success",title:"",message:""}),Q=new Date().toISOString().split("T")[0],Y=new Date(Date.now()+2592e6).toISOString().split("T")[0],$=new Date().toISOString().slice(0,7),[G,K]=(0,l.useState)(0),[X,Z]=(0,l.useState)(Q),[ee,et]=(0,l.useState)(Y),[es,ea]=(0,l.useState)([{id:"1",product_name:"",quantity:0,total_with_vat:0,period_from:"",period_to:"",unit_price:0,before_vat:0,vat_amount:0}]),[el,er]=(0,l.useState)([]),ei=(e,t,s)=>{J({show:!0,type:e,title:t,message:s})},ec=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"total",s=e.total_with_vat,a=e.unit_price,l=e.quantity||0;"unit_price"===t&&(s=a*l*1.15);let r=s/1.15,i=s-r;return"total"===t&&(a=l>0?r/l:0),{...e,before_vat:r,vat_amount:i,unit_price:a,total_with_vat:s}},[]),en=(e,t,s)=>{ea(a=>{let l=[...a];return l[e]={...l[e],[t]:s},l[e]=ec(l[e],"unit_price"===t?"unit_price":"total"),l})},ed=(e,t,s)=>{er(a=>{let l=[...a],r={...l[e],[t]:s},i=0,c=r.amount;if(r.is_taxable&&r.amount>0)if(r.is_inclusive){let e=r.amount/1.15;i=r.amount-e,c=r.amount}else i=.15*r.amount,c=r.amount+i;return l[e]={...r,vat_amount:i,total_with_vat:c},l})},eo=(0,l.useMemo)(()=>{let e=0,t=0,s=0;return es.forEach(a=>{e+=a.before_vat,t+=a.vat_amount,s+=a.total_with_vat}),el.forEach(a=>{"addition"===a.type?(t+=a.vat_amount,s+=a.total_with_vat,e+=a.total_with_vat-a.vat_amount):(t-=a.vat_amount,s-=a.total_with_vat,e-=a.total_with_vat-a.vat_amount)}),{totalBeforeVat:e,totalVat:t,totalWithVat:s}},[es,el]),ex=async e=>{if(G?0!==es.filter(e=>e.product_name.trim()).length||(ei("error",H("error"),H("addItemError")),!1):(ei("error",H("error"),H("selectCustomerError")),!1)){R(!0),ei("loading",H("saving"),H("savingDesc"));try{let t=es.filter(e=>e.product_name.trim()).map(e=>({product_name:e.product_name,quantity:e.quantity,total_with_vat:e.total_with_vat,period_from:e.period_from||null,period_to:e.period_to||null})),a=el.filter(e=>e.title.trim()).map(e=>({title:e.title,type:e.type,amount:e.amount,is_taxable:e.is_taxable,is_inclusive:e.is_inclusive})),l=await fetch("/api/sales-invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoice_number:s,invoice_month:$,client_id:G,issue_date:X,due_date:ee,status:e,items:t,adjustments:a})}),r=await l.json();r.success?(ei("success",H("savedSuccess"),r.message),setTimeout(()=>{U.push("/sales-invoices/".concat(r.invoice_id))},1500)):ei("error",H("error"),r.error||"حدث خطأ")}catch(e){ei("error",H("error"),H("connectionError"))}finally{R(!1)}}},em=t.find(e=>e.id===G);return(0,a.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,a.jsx)(r.N,{children:W.show&&(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:-50,x:"-50%"},animate:{opacity:1,y:0,x:"-50%"},exit:{opacity:0,y:-50,x:"-50%"},className:"fixed top-6 left-1/2 z-50 px-6 py-3 rounded-2xl shadow-2xl ".concat("success"===W.type?"bg-emerald-600":"error"===W.type?"bg-rose-600":"bg-blue-600"," text-white font-bold flex items-center gap-3 border border-white/20 backdrop-blur-md"),children:["success"===W.type&&(0,a.jsx)(c.A,{size:18}),"error"===W.type&&(0,a.jsx)(n.A,{size:18}),"loading"===W.type&&(0,a.jsx)(d.A,{size:18,className:"animate-spin"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-black text-sm",children:W.title}),(0,a.jsx)("p",{className:"text-xs opacity-90",children:W.message})]})]})}),(0,a.jsx)(i.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},initial:"hidden",animate:"visible",className:"max-w-[85%] mx-auto px-4 pt-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-xl shadow-gray-200/50 border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 p-8 text-white relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/10 rounded-full blur-[100px] pointer-events-none"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-blue-500/10 rounded-full blur-[100px] pointer-events-none"}),(0,a.jsxs)("div",{className:"relative z-10 space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-400",children:[(0,a.jsxs)(F(),{href:"/dashboard",className:"hover:text-emerald-400 transition-colors flex items-center gap-1",children:[(0,a.jsx)(o.A,{size:12}),H("breadcrumbDashboard")]}),(0,a.jsx)(x.A,{size:10,className:"rtl:rotate-180"}),(0,a.jsx)(F(),{href:"/sales-invoices",className:"hover:text-emerald-400 transition-colors",children:H("breadcrumbInvoices")}),(0,a.jsx)(x.A,{size:10,className:"rtl:rotate-180"}),(0,a.jsx)("span",{className:"text-emerald-400",children:H("breadcrumbNew")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-2xl bg-emerald-500/20 flex items-center justify-center border border-emerald-500/30",children:(0,a.jsx)(m.A,{className:"text-emerald-400",size:24})}),(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-black tracking-tight",children:H("title")})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-500/10 border border-emerald-500/20 rounded-xl",children:[(0,a.jsx)(p.A,{size:16,className:"text-emerald-400"}),(0,a.jsx)("span",{className:"text-xs font-black text-emerald-400",children:H("zatcaCompliant")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/10 border border-white/10 rounded-xl backdrop-blur-md",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-slate-300",children:H("invoiceNumberLabel")}),(0,a.jsx)("span",{className:"text-xs font-black text-white",children:s})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-4 border border-white/10 group hover:bg-white/10 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-slate-700 rounded-lg text-slate-300",children:(0,a.jsx)(h.A,{size:16})}),(0,a.jsx)("span",{className:"text-[10px] font-black text-slate-400 bg-slate-800 px-2 py-0.5 rounded-full",children:H("newBadge")})]}),(0,a.jsx)("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-wider",children:H("invoiceNumberLabel").replace(":","")}),(0,a.jsx)("p",{className:"text-xl font-black text-white mt-1",children:s}),(0,a.jsx)("p",{className:"text-slate-500 text-[9px] font-bold mt-1",children:H("electronicTaxInvoice")})]}),(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-4 border border-white/10 group hover:bg-white/10 transition-all",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400",children:(0,a.jsx)(b.A,{size:16})})}),(0,a.jsx)("p",{className:"text-emerald-400/70 text-[10px] font-black uppercase tracking-wider",children:H("totalBeforeTax")}),(0,a.jsxs)("p",{className:"text-xl font-black text-white mt-1",children:[eo.totalBeforeVat.toLocaleString("en-US",{minimumFractionDigits:2}),(0,a.jsx)("span",{className:"text-xs text-white/50 mr-1",children:O("sar")})]}),(0,a.jsx)("p",{className:"text-slate-500 text-[9px] font-bold mt-1",children:H("taxableAmount")})]}),(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl p-4 border border-white/10 group hover:bg-white/10 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-amber-500/20 rounded-lg text-amber-400",children:(0,a.jsx)(u.A,{size:16})}),(0,a.jsx)("span",{className:"text-[10px] font-black text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full",children:"15%"})]}),(0,a.jsx)("p",{className:"text-amber-400/70 text-[10px] font-black uppercase tracking-wider",children:H("vatAmount")}),(0,a.jsxs)("p",{className:"text-xl font-black text-white mt-1",children:[eo.totalVat.toLocaleString("en-US",{minimumFractionDigits:2}),(0,a.jsx)("span",{className:"text-xs text-white/50 mr-1",children:O("sar")})]}),(0,a.jsx)("p",{className:"text-slate-500 text-[9px] font-bold mt-1",children:H("vatAmountLabel")})]}),(0,a.jsxs)("div",{className:"bg-emerald-500 rounded-2xl p-4 shadow-lg shadow-emerald-500/20 group hover:bg-emerald-600 transition-all",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-lg text-white",children:(0,a.jsx)(g.A,{size:16})})}),(0,a.jsx)("p",{className:"text-white/70 text-[10px] font-black uppercase tracking-wider",children:H("finalTotal")}),(0,a.jsxs)("p",{className:"text-xl font-black text-white mt-1",children:[eo.totalWithVat.toLocaleString("en-US",{minimumFractionDigits:2}),(0,a.jsx)("span",{className:"text-xs text-white/70 mr-1",children:O("sar")})]}),(0,a.jsx)("p",{className:"text-white/60 text-[9px] font-bold mt-1",children:H("inclusiveTax")})]})]})]})]}),(0,a.jsxs)("div",{className:"p-8 space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-2 border-b border-gray-100",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-blue-50 flex items-center justify-center",children:(0,a.jsx)(j.A,{className:"text-blue-600",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-gray-900 font-black",children:H("customerData")}),(0,a.jsx)("p",{className:"text-black text-xs font-bold",children:H("selectCustomerDesc")})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,a.jsxs)("select",{value:G,onChange:e=>K(parseInt(e.target.value)),className:"w-full h-14 pr-12 pl-4 rounded-xl bg-white border border-gray-200 text-sm font-bold focus:border-blue-500/30 outline-none transition-all appearance-none cursor-pointer",children:[(0,a.jsx)("option",{value:0,children:H("selectCustomerPlaceholder")}),t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.company_name||e.customer_name||e.name," ",e.vat_number?"(".concat(e.vat_number,")"):""]},e.id))]}),(0,a.jsx)(v.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18})]}),em&&(0,a.jsxs)(i.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-6 bg-white rounded-2xl border border-gray-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-blue-50 flex items-center justify-center shadow-sm",children:(0,a.jsx)(j.A,{size:18,className:"text-blue-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[10px] font-bold text-black uppercase block",children:H("companyNameLabel")}),(0,a.jsx)("span",{className:"text-sm font-black text-gray-800",children:em.company_name||em.customer_name||em.name})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-emerald-50 flex items-center justify-center shadow-sm",children:(0,a.jsx)(y.A,{size:18,className:"text-emerald-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[10px] font-bold text-black uppercase block",children:H("vatNumberLabel")}),(0,a.jsx)("span",{className:"text-sm font-black text-emerald-600",children:em.vat_number||O("notSpecified")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-amber-50 flex items-center justify-center shadow-sm",children:(0,a.jsx)(N.A,{size:18,className:"text-amber-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[10px] font-bold text-black uppercase block",children:H("addressLabel")}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-600 truncate block max-w-[200px]",children:em.address||O("notSpecified")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-violet-50 flex items-center justify-center shadow-sm",children:(0,a.jsx)(w.A,{size:18,className:"text-violet-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[10px] font-bold text-black uppercase block",children:H("phoneLabel")}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-600",children:em.phone||O("notSpecified")})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-2 border-b border-gray-100",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-teal-50 flex items-center justify-center",children:(0,a.jsx)(k.A,{className:"text-teal-600",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-gray-900 font-black",children:H("invoiceDates")}),(0,a.jsx)("p",{className:"text-black text-xs font-bold",children:H("datesDesc")})]})]}),(0,a.jsxs)("div",{className:"space-y-5 p-6 bg-white rounded-2xl border border-gray-100 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[10px] font-black text-black uppercase mb-2",children:H("issueDateLabel")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(_.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",size:16}),(0,a.jsx)("input",{type:"date",value:X,onChange:e=>Z(e.target.value),className:"w-full h-12 pr-12 pl-4 rounded-xl bg-white border border-gray-200 text-sm font-bold focus:border-teal-500/30 outline-none transition-all"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[10px] font-black text-black uppercase mb-2",children:H("dueDateLabel")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(A.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",size:16}),(0,a.jsx)("input",{type:"date",value:ee,onChange:e=>et(e.target.value),className:"w-full h-12 pr-12 pl-4 rounded-xl bg-white border border-gray-200 text-sm font-bold focus:border-teal-500/30 outline-none transition-all"})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-teal-50 rounded-xl border border-teal-100 flex items-center gap-2",children:[(0,a.jsx)(z.A,{size:14,className:"text-teal-600"}),(0,a.jsxs)("span",{className:"text-[11px] font-black text-teal-700",children:[H("invoiceMonth")," ",$]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 pb-2 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-emerald-50 flex items-center justify-center",children:(0,a.jsx)(S.A,{className:"text-emerald-600",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-gray-900 font-black",children:H("servicesDetails")}),(0,a.jsx)("p",{className:"text-gray-400 text-xs font-bold",children:H("itemsInInvoice",{count:es.length})})]})]}),(0,a.jsxs)(i.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:()=>{ea(e=>[...e,{id:Date.now().toString(),product_name:"",quantity:0,total_with_vat:0,period_from:"",period_to:"",unit_price:0,before_vat:0,vat_amount:0}])},className:"flex items-center gap-2 px-5 py-2.5 rounded-xl bg-emerald-500 text-white hover:bg-emerald-600 transition-all font-black text-xs shadow-lg shadow-emerald-500/20",children:[(0,a.jsx)(C.A,{size:16}),H("addService")]})]}),(0,a.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-gray-100",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100",children:[(0,a.jsx)("th",{className:"px-4 py-4 text-[10px] font-black text-black uppercase tracking-widest text-right w-12",children:H("itemNo")}),(0,a.jsx)("th",{className:"px-4 py-4 text-[10px] font-black text-black uppercase tracking-widest text-right min-w-[200px]",children:H("serviceName")}),(0,a.jsx)("th",{className:"px-4 py-4 text-[10px] font-black text-black uppercase tracking-widest text-center w-24",children:H("quantity")}),(0,a.jsx)("th",{className:"px-4 py-4 text-[10px] font-black text-black uppercase tracking-widest text-center w-32",children:H("unitPrice")}),(0,a.jsx)("th",{className:"px-4 py-4 text-[10px] font-black text-black uppercase tracking-widest text-center w-36",children:H("totalInclusive")}),(0,a.jsx)("th",{className:"px-4 py-4 text-[10px] font-black text-black uppercase tracking-widest text-center w-32",children:H("fromDate")}),(0,a.jsx)("th",{className:"px-4 py-4 text-[10px] font-black text-black uppercase tracking-widest text-center w-32",children:H("toDate")}),(0,a.jsx)("th",{className:"px-4 py-4 text-[10px] font-black text-black uppercase tracking-widest text-center w-24",children:H("tax")}),(0,a.jsx)("th",{className:"px-4 py-4 text-[10px] font-black text-black uppercase tracking-widest text-center w-12",children:H("delete")})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:es.map((e,t)=>(0,a.jsxs)(i.P.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"group hover:bg-gray-50/50 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("span",{className:"flex items-center justify-center w-6 h-6 rounded-lg bg-gray-100 text-[10px] font-black text-gray-400 group-hover:bg-emerald-100 group-hover:text-emerald-600 transition-colors",children:t+1})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("input",{type:"text",value:e.product_name,onChange:e=>en(t,"product_name",e.target.value),placeholder:H("serviceNamePlaceholder"),className:"w-full px-3 py-2 rounded-xl bg-white border border-gray-200 text-sm font-bold focus:border-emerald-500/30 outline-none transition-all"})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("input",{type:"number",value:e.quantity||"",onChange:e=>en(t,"quantity",parseFloat(e.target.value)||0),className:"w-full px-2 py-2 rounded-xl bg-white border border-gray-200 text-sm font-black text-center focus:border-emerald-500/30 outline-none"})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("div",{className:"w-full px-2 py-2 rounded-xl bg-blue-50/50 border border-blue-100 text-center",children:(0,a.jsx)("span",{className:"text-sm font-black text-blue-600",children:e.unit_price?Number(e.unit_price.toFixed(2)).toLocaleString("en-US",{minimumFractionDigits:2}):"0.00"})})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("input",{type:"number",value:e.total_with_vat||"",onChange:e=>en(t,"total_with_vat",parseFloat(e.target.value)||0),className:"w-full px-2 py-2 rounded-xl bg-emerald-50 border border-emerald-100 text-sm font-black text-center text-emerald-600 focus:border-emerald-400 outline-none"})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("input",{type:"date",value:e.period_from,onChange:e=>en(t,"period_from",e.target.value),className:"w-full px-2 py-2 rounded-xl bg-white border border-gray-200 text-[10px] font-bold focus:border-emerald-500/30 outline-none"})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("input",{type:"date",value:e.period_to,onChange:e=>en(t,"period_to",e.target.value),className:"w-full px-2 py-2 rounded-xl bg-white border border-gray-200 text-[10px] font-bold focus:border-emerald-500/30 outline-none"})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("div",{className:"w-full py-2 rounded-xl bg-amber-50/50 border border-amber-100 text-center",children:(0,a.jsx)("span",{className:"text-[11px] font-black text-amber-600",children:e.vat_amount.toFixed(2)})})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>{es.length>1&&ea(e=>e.filter((e,s)=>s!==t))},className:"w-8 h-8 flex items-center justify-center rounded-xl bg-rose-50 text-rose-400 hover:text-rose-600 hover:bg-rose-100 transition-all mx-auto",children:(0,a.jsx)(M.A,{size:14})})})]},e.id))})]})}),(0,a.jsx)("div",{className:"flex justify-between items-center px-4",children:(0,a.jsx)("span",{className:"text-xs font-black text-black",children:H("totalItems",{count:es.length})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b-2 border-amber-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center shadow-lg shadow-amber-200",children:(0,a.jsx)(u.A,{className:"text-white",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-gray-900 font-black text-lg",children:H("adjustments")}),(0,a.jsx)("p",{className:"text-black text-xs font-bold",children:H("adjustmentsDesc")})]})]}),(0,a.jsxs)(i.P.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},type:"button",onClick:()=>{er(e=>[...e,{id:Date.now().toString(),title:"",type:"discount",amount:0,is_taxable:!0,is_inclusive:!0,vat_amount:0,total_with_vat:0}])},className:"flex items-center gap-2 px-6 py-3 rounded-2xl bg-amber-500 text-white hover:bg-amber-600 transition-all font-black text-sm shadow-lg shadow-amber-200",children:[(0,a.jsx)(C.A,{size:18}),H("addAdjustment")]})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===el.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-[2.5rem] border-2 border-dashed border-gray-200",children:[(0,a.jsx)("div",{className:"h-16 w-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(u.A,{size:32,className:"text-gray-300"})}),(0,a.jsx)("p",{className:"text-black font-black text-sm",children:H("noAdjustments")}),(0,a.jsx)("p",{className:"text-black text-xs mt-1 opacity-60",children:H("addAdjustmentDesc")})]}):el.map((e,t)=>(0,a.jsxs)(i.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-6 bg-white rounded-[2rem] border border-gray-100 shadow-sm space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-black uppercase tracking-wider block mr-2",children:H("adjustmentPlaceholder")}),(0,a.jsx)("input",{type:"text",value:e.title,onChange:e=>ed(t,"title",e.target.value),placeholder:H("adjustmentPlaceholder"),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border border-gray-100 text-sm font-bold focus:bg-white focus:border-amber-300 outline-none transition-all"})]}),(0,a.jsxs)("div",{className:"w-full sm:w-32 space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-black uppercase tracking-wider block mr-2",children:H("type")}),(0,a.jsxs)("select",{value:e.type,onChange:e=>ed(t,"type",e.target.value),className:"w-full h-12 px-3 rounded-xl bg-gray-50 border border-gray-100 text-sm font-black focus:bg-white focus:border-amber-300 outline-none transition-all appearance-none cursor-pointer",children:[(0,a.jsx)("option",{value:"discount",children:H("discount")}),(0,a.jsx)("option",{value:"addition",children:H("addition")})]})]}),(0,a.jsxs)("div",{className:"w-full sm:w-40 space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-black uppercase tracking-wider block mr-2",children:H("amount")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",value:e.amount||"",onChange:e=>ed(t,"amount",parseFloat(e.target.value)||0),className:"w-full h-12 px-4 rounded-xl bg-amber-50 border border-amber-100 text-sm font-black text-amber-600 focus:bg-white focus:border-amber-300 outline-none transition-all"}),(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[10px] text-amber-400 font-black uppercase",children:O("sar")})]})]}),(0,a.jsx)("div",{className:"flex items-end pb-1",children:(0,a.jsx)("button",{type:"button",onClick:()=>{er(e=>e.filter((e,s)=>s!==t))},className:"w-12 h-12 flex items-center justify-center rounded-xl bg-rose-50 text-rose-400 hover:text-rose-600 hover:bg-rose-100 transition-all shadow-sm",children:(0,a.jsx)(M.A,{size:20})})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-6 pt-5 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer group",children:[(0,a.jsx)("div",{className:"relative flex items-center",children:(0,a.jsx)("input",{type:"checkbox",checked:e.is_taxable,onChange:e=>ed(t,"is_taxable",e.target.checked),className:"peer h-5 w-5 rounded-lg border-gray-300 text-amber-500 focus:ring-amber-500 transition-all"})}),(0,a.jsx)("span",{className:"text-xs font-black text-black",children:H("taxable")})]}),e.is_taxable&&(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-xl border border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:()=>ed(t,"is_inclusive",!0),className:(0,V.cn)("px-4 py-1.5 rounded-lg text-[10px] font-black transition-all",e.is_inclusive?"bg-white text-amber-600 shadow-sm":"text-gray-400 hover:text-gray-600"),children:H("inclusive")}),(0,a.jsx)("button",{type:"button",onClick:()=>ed(t,"is_inclusive",!1),className:(0,V.cn)("px-4 py-1.5 rounded-lg text-[10px] font-black transition-all",e.is_inclusive?"text-gray-400 hover:text-gray-600":"bg-white text-amber-600 shadow-sm"),children:H("exclusive")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 bg-gray-50 px-6 py-2.5 rounded-2xl border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"text-[9px] font-black text-black/40 uppercase",children:H("taxLabel")}),(0,a.jsx)("span",{className:"text-xs font-black text-amber-600",children:e.vat_amount.toFixed(2)})]}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-200"}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"text-[9px] font-black text-black/40 uppercase",children:H("totalLabel")}),(0,a.jsx)("span",{className:"text-xs font-black text-emerald-600",children:e.total_with_vat.toFixed(2)})]})]})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-2 border-b border-gray-100",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-slate-100 flex items-center justify-center",children:(0,a.jsx)(D.A,{className:"text-slate-600",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-gray-900 font-black",children:H("taxSummary")}),(0,a.jsx)("p",{className:"text-gray-400 text-xs font-bold",children:H("automaticTax")})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900 rounded-[2rem] p-8 text-white relative overflow-hidden shadow-2xl",children:[(0,a.jsx)("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-emerald-500/10 rounded-full blur-3xl pointer-events-none"}),(0,a.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center pb-4 border-b border-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-slate-400",children:[(0,a.jsx)(b.A,{size:16}),(0,a.jsx)("span",{className:"text-xs font-bold",children:H("amountBeforeTax")})]}),(0,a.jsxs)("span",{className:"font-black text-lg",children:[eo.totalBeforeVat.toLocaleString("en-US",{minimumFractionDigits:2}),(0,a.jsx)("span",{className:"text-slate-500 text-[10px] mr-1 uppercase",children:O("sar")})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pb-4 border-b border-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-amber-400",children:[(0,a.jsx)(u.A,{size:16}),(0,a.jsx)("span",{className:"text-xs font-bold",children:H("vat15")})]}),(0,a.jsxs)("span",{className:"font-black text-lg text-amber-400",children:[eo.totalVat.toLocaleString("en-US",{minimumFractionDigits:2}),(0,a.jsx)("span",{className:"text-amber-500/50 text-[10px] mr-1 uppercase",children:O("sar")})]})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsxs)("div",{className:"p-6 bg-emerald-500/10 rounded-[1.5rem] border border-emerald-500/20 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-emerald-500/20 flex items-center justify-center",children:(0,a.jsx)(g.A,{size:20,className:"text-emerald-400"})}),(0,a.jsx)("span",{className:"text-emerald-400 font-black text-sm",children:H("finalTotal")})]}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("span",{className:"text-3xl font-black text-white tracking-tight",children:eo.totalWithVat.toLocaleString("en-US",{minimumFractionDigits:2})}),(0,a.jsx)("span",{className:"text-xs font-bold text-emerald-500/50 mr-2 uppercase",children:O("sar")})]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 rounded-xl border border-white/5",children:[(0,a.jsx)(p.A,{size:14,className:"text-emerald-500"}),(0,a.jsx)("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-wider",children:H("zatcaRequirement")})]})]})]})]})]}),(0,a.jsx)("div",{className:"pt-10 mt-10 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-8",children:[(0,a.jsx)(F(),{href:"/sales-invoices",children:(0,a.jsxs)(i.P.button,{whileHover:{x:-5},whileTap:{scale:.98},className:"flex items-center gap-2 text-black hover:opacity-70 transition-all font-black text-sm uppercase tracking-widest",children:[(0,a.jsx)(P.A,{size:20,className:"rtl:rotate-180"}),H("cancelAndReturn")]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[(0,a.jsxs)(i.P.button,{whileHover:{y:-2},whileTap:{scale:.98},onClick:()=>ex("draft"),disabled:B,className:"flex-1 sm:flex-none flex items-center justify-center gap-3 px-10 py-4 rounded-2xl bg-slate-800 text-white hover:bg-slate-900 font-black transition-all disabled:opacity-50 text-sm shadow-xl shadow-slate-200",children:[B?(0,a.jsx)(d.A,{size:18,className:"animate-spin"}):(0,a.jsx)(A.A,{size:18}),H("saveAsDraft")]}),(0,a.jsxs)(i.P.button,{whileHover:{y:-3,scale:1.02},whileTap:{scale:.98},onClick:()=>ex("due"),disabled:B,className:"flex-1 sm:flex-none flex items-center justify-center gap-3 px-12 py-4 rounded-2xl bg-emerald-500 hover:bg-emerald-600 text-white font-black transition-all disabled:opacity-50 text-sm shadow-xl shadow-emerald-500/20",children:[B?(0,a.jsx)(d.A,{size:18,className:"animate-spin"}):(0,a.jsx)(L.A,{size:18}),H("saveAndIssue")]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50/50 px-8 py-4 border-t border-gray-100 flex flex-col md:flex-row justify-between items-center gap-4 text-[10px] font-black text-gray-300 uppercase tracking-[0.2em]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z.A,{size:12,className:"text-emerald-500"}),(0,a.jsx)("span",{children:H("systemName")})]}),(0,a.jsx)("span",{children:H("rightsReserved",{year:new Date().getFullYear()})})]})]})})]})}},6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},10383:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},10512:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},16485:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},21873:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},26983:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},27937:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},42516:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]])},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2821),l=s(75889);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}},65184:(e,t,s)=>{Promise.resolve().then(s.bind(s,1747))},69141:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},71360:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},76907:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},78519:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},91169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{e.O(0,[2418,4909,2619,4565,3884,8441,1255,7358],()=>e(e.s=65184)),_N_E=e.O()}]);