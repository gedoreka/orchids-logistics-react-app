(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2638],{42256:(e,t,s)=>{"use strict";s.d(t,{CreditNotesListClient:()=>T});var a=s(95155),r=s(12115),l=s(87763),i=s(59384),n=s(52987),c=s(6191),d=s(26921),x=s(61362),o=s(19204),h=s(78435),p=s(54485),m=s(38392),b=s(95740),w=s(89715),g=s(86651),u=s(66955),j=s(39867),f=s(57828),N=s(77676),v=s(78874),y=s(52619),k=s.n(y),A=s(8751),z=s(26497),_=s(18720),S=s(64269),P=s(86550),C=s(48003),L=s(8574),R=s(83884);function T(e){let{creditNotes:t}=e,s=(0,R.c)("creditNotes"),{locale:y}=(0,R.Y)(),[T,E]=(0,r.useState)(t),[F,H]=(0,r.useState)(""),O=T.filter(e=>e.credit_note_number.toLowerCase().includes(F.toLowerCase())||e.client_name.toLowerCase().includes(F.toLowerCase())||e.invoice_number.toLowerCase().includes(F.toLowerCase())),U=T.filter(e=>"active"===e.status),Y=U.reduce((e,t)=>e+parseFloat(String(t.total_amount)),0),I=U.reduce((e,t)=>e+parseFloat(String(t.vat_amount)),0),M=async e=>{if(confirm(s("new.confirmCancel")))try{let t=await fetch("/api/credit-notes/".concat(e),{method:"DELETE"}),a=await t.json();a.success?(_.oR.success(s("new.cancelSuccess")),E(t=>t.map(t=>t.id===e?{...t,status:"cancelled"}:t))):_.oR.error(a.error||s("new.cancelError"))}catch(e){_.oR.error(s("new.connectionError"))}},G={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},Q="ar"===y?C.ar:L.c;return(0,a.jsx)("div",{className:"min-h-screen pb-20 bg-transparent",children:(0,a.jsxs)(A.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},initial:"hidden",animate:"visible",className:"max-w-[98%] mx-auto px-4 pt-6",children:[(0,a.jsxs)("div",{className:"bg-slate-900 rounded-3xl border border-white/5 shadow-2xl overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"p-8 space-y-8 bg-slate-900 border-b border-white/5",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-14 w-14 rounded-2xl bg-gradient-to-br from-rose-500 to-pink-600 flex items-center justify-center shadow-lg shadow-rose-500/30 border border-white/10",children:(0,a.jsx)(l.A,{className:"text-white",size:28})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:[(0,a.jsxs)(k(),{href:"/dashboard",className:"hover:text-rose-400 transition-colors flex items-center gap-1",children:[(0,a.jsx)(i.A,{size:12}),"ar"===y?"لوحة التحكم":"Dashboard"]}),(0,a.jsx)(n.A,{size:10,className:(0,S.cn)("ar"===y&&"rotate-180")}),(0,a.jsx)("span",{className:"text-rose-500",children:s("breadcrumb")})]}),(0,a.jsx)("h1",{className:"text-2xl font-black text-white tracking-tight",children:s("title")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-2 px-5 py-2.5 bg-white/5 border border-white/10 rounded-2xl",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-rose-500 animate-pulse shadow-[0_0_10px_rgba(244,63,94,0.5)]"}),(0,a.jsx)("span",{className:"text-xs font-black text-rose-400 tracking-wide uppercase",children:s("zatcaCompliant")})]}),(0,a.jsx)(k(),{href:"/credit-notes/new",children:(0,a.jsxs)(A.P.button,{whileHover:{scale:1.02,translateY:-2},whileTap:{scale:.98},className:"flex items-center gap-2.5 px-6 py-3.5 rounded-2xl bg-gradient-to-r from-rose-600 to-pink-600 text-white hover:from-rose-700 hover:to-pink-700 transition-all font-black text-sm shadow-xl shadow-rose-500/25",children:[(0,a.jsx)(c.A,{size:20}),s("createNew")]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 pt-2",children:[(0,a.jsx)(A.P.div,{variants:G,className:"relative group",children:(0,a.jsxs)("div",{className:"h-full rounded-2xl bg-gradient-to-br from-rose-500 to-pink-600 p-6 shadow-lg shadow-rose-500/20 transition-all group-hover:shadow-rose-500/30",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2.5 bg-white/15 rounded-xl text-white backdrop-blur-md",children:(0,a.jsx)(d.A,{size:20})}),(0,a.jsxs)("span",{className:"text-[10px] font-black text-white/90 bg-white/10 px-3 py-1 rounded-full border border-white/10",children:[U.length," ",s("activeReturns")]})]}),(0,a.jsx)("p",{className:"text-white/70 text-[10px] font-black uppercase tracking-widest",children:s("totalReturns")}),(0,a.jsxs)("p",{className:"text-2xl font-black text-white mt-1.5 flex items-baseline gap-1",children:[Y.toLocaleString("en-US",{minimumFractionDigits:2}),(0,a.jsx)("span",{className:"text-xs text-white/60 font-bold",children:"ar"===y?"ريال":"SAR"})]}),(0,a.jsxs)("p",{className:"text-white/50 text-[10px] font-bold mt-2 flex items-center gap-1",children:[(0,a.jsx)(x.A,{size:12}),s("refundedAmounts")]})]})}),(0,a.jsx)(A.P.div,{variants:G,className:"relative group",children:(0,a.jsxs)("div",{className:"h-full rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 p-6 shadow-lg shadow-amber-500/20 transition-all group-hover:shadow-amber-500/30",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2.5 bg-white/15 rounded-xl text-white backdrop-blur-md",children:(0,a.jsx)(o.A,{size:20})}),(0,a.jsx)("span",{className:"text-[10px] font-black text-white/90 bg-white/10 px-3 py-1 rounded-full border border-white/10",children:"15%"})]}),(0,a.jsx)("p",{className:"text-white/70 text-[10px] font-black uppercase tracking-widest",children:s("refundedTax")}),(0,a.jsxs)("p",{className:"text-2xl font-black text-white mt-1.5 flex items-baseline gap-1",children:[I.toLocaleString("en-US",{minimumFractionDigits:2}),(0,a.jsx)("span",{className:"text-xs text-white/60 font-bold",children:"ar"===y?"ريال":"SAR"})]}),(0,a.jsxs)("p",{className:"text-white/50 text-[10px] font-bold mt-2 flex items-center gap-1",children:[(0,a.jsx)(h.A,{size:12}),s("new.vatRefund")]})]})}),(0,a.jsx)(A.P.div,{variants:G,className:"relative group",children:(0,a.jsxs)("div",{className:"h-full rounded-2xl bg-gradient-to-br from-violet-500 to-purple-600 p-6 shadow-lg shadow-violet-500/20 transition-all group-hover:shadow-violet-500/30",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"p-2.5 bg-white/15 rounded-xl text-white backdrop-blur-md",children:(0,a.jsx)(p.A,{size:20})}),(0,a.jsxs)("span",{className:"text-[10px] font-black text-white/90 bg-white/10 px-3 py-1 rounded-full border border-white/10",children:["#",T.length]})]}),(0,a.jsx)("p",{className:"text-white/70 text-[10px] font-black uppercase tracking-widest",children:s("totalNotes")}),(0,a.jsx)("p",{className:"text-2xl font-black text-white mt-1.5",children:T.length}),(0,a.jsxs)("p",{className:"text-white/50 text-[10px] font-bold mt-2 flex items-center gap-1",children:[(0,a.jsx)(m.A,{size:12}),T.length-U.length," ",s("cancelledNotes")]})]})}),(0,a.jsx)(A.P.div,{variants:G,className:"relative group",children:(0,a.jsxs)("div",{className:"h-full rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-600 p-6 shadow-lg shadow-emerald-500/20 transition-all group-hover:shadow-emerald-500/30",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"p-2.5 bg-white/15 rounded-xl text-white backdrop-blur-md",children:(0,a.jsx)(h.A,{size:20})})}),(0,a.jsx)("p",{className:"text-white/70 text-[10px] font-black uppercase tracking-widest",children:s("taxStatus")}),(0,a.jsx)("p",{className:"text-2xl font-black text-white mt-1.5",children:s("compliant")}),(0,a.jsxs)("p",{className:"text-white/50 text-[10px] font-bold mt-2 flex items-center gap-1",children:[(0,a.jsx)(b.A,{size:12}),s("zatcaSystem")]})]})})]})]}),(0,a.jsxs)("div",{className:"p-0",children:[(0,a.jsxs)("div",{className:"bg-slate-900 px-8 py-5 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-2xl bg-white/10 flex items-center justify-center border border-white/10",children:(0,a.jsx)(w.A,{className:"text-white",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-black tracking-tight",children:s("listTitle")}),(0,a.jsxs)("p",{className:"text-slate-400 text-xs font-bold tracking-wide uppercase",children:[O.length," ",s("notesInList")]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4 flex-1 lg:max-w-3xl",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(g.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),(0,a.jsx)("input",{type:"text",placeholder:s("searchPlaceholder"),className:"w-full pr-12 pl-4 py-3 bg-white/5 border border-white/10 rounded-2xl text-sm font-bold text-white placeholder-slate-500 focus:outline-none focus:ring-4 focus:ring-rose-500/20 focus:bg-white/10 transition-all border-dashed",value:F,onChange:e=>H(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(A.P.button,{whileHover:{scale:1.05,backgroundColor:"rgba(255,255,255,0.15)"},whileTap:{scale:.95},className:"flex items-center gap-2 px-5 py-3 rounded-2xl bg-white/5 text-white transition-all font-black text-xs border border-white/10",children:[(0,a.jsx)(u.A,{size:16}),"ar"===y?"تصفية":"Filter"]}),(0,a.jsxs)(A.P.button,{whileHover:{scale:1.05,backgroundColor:"rgba(255,255,255,0.15)"},whileTap:{scale:.95},className:"flex items-center gap-2 px-5 py-3 rounded-2xl bg-white/5 text-white transition-all font-black text-xs border border-white/10",children:[(0,a.jsx)(j.A,{size:16}),"ar"===y?"تصدير":"Export"]})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto bg-slate-900/50",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-white/5 border-b border-white/5",children:[(0,a.jsx)("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-right",children:s("noteNumber")}),(0,a.jsx)("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-right",children:s("invoice")}),(0,a.jsx)("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-right",children:s("client")}),(0,a.jsx)("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-right",children:s("reason")}),(0,a.jsx)("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-center",children:s("amount")}),(0,a.jsx)("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-center",children:s("date")}),(0,a.jsx)("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-center",children:s("status")}),(0,a.jsx)("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-center",children:s("actions")})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-white/5",children:[(0,a.jsx)(z.N,{children:O.map((e,t)=>(0,a.jsxs)(A.P.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{delay:.03*t},className:"hover:bg-white/5 transition-all group border-l-4 border-l-transparent hover:border-l-rose-500",children:[(0,a.jsx)("td",{className:"px-8 py-5 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl bg-rose-500/10 flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm border border-rose-500/20",children:(0,a.jsx)(l.A,{size:16,className:"text-rose-400"})}),(0,a.jsx)("span",{className:"font-black text-white text-sm tracking-tight",children:e.credit_note_number})]})}),(0,a.jsx)("td",{className:"px-8 py-5 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-bold text-slate-200 text-sm",children:e.invoice_number}),(0,a.jsx)("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-wide",children:e.invoice_status})]})}),(0,a.jsx)("td",{className:"px-8 py-5 whitespace-nowrap",children:(0,a.jsx)("span",{className:"font-bold text-slate-200 text-sm",children:e.client_name})}),(0,a.jsx)("td",{className:"px-8 py-5 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-slate-400 text-xs truncate max-w-[180px] block font-medium",title:e.reason,children:e.reason})}),(0,a.jsx)("td",{className:"px-8 py-5 whitespace-nowrap text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("span",{className:"font-black text-rose-400 text-sm",children:[parseFloat(String(e.total_amount)).toLocaleString("en-US",{minimumFractionDigits:2})," ","ar"===y?"ريال":"SAR"]}),(0,a.jsx)("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-tighter opacity-70",children:s("includingTax")})]})}),(0,a.jsx)("td",{className:"px-8 py-5 whitespace-nowrap text-center",children:(0,a.jsx)("span",{className:"text-slate-400 font-bold text-xs bg-white/5 px-3 py-1.5 rounded-full border border-white/5",children:e.created_at?(0,P.GP)(new Date(e.created_at),"yyyy-MM-dd",{locale:Q}):"-"})}),(0,a.jsx)("td",{className:"px-8 py-5 whitespace-nowrap text-center",children:(0,a.jsx)(D,{status:e.status,t:s})}),(0,a.jsx)("td",{className:"px-8 py-5 whitespace-nowrap text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(k(),{href:"/credit-notes/".concat(e.id),children:(0,a.jsx)(A.P.button,{whileHover:{scale:1.15,rotate:5},whileTap:{scale:.9},className:"p-2.5 text-blue-400 hover:bg-blue-500/10 rounded-xl transition-all border border-transparent hover:border-blue-500/20",title:s("viewDetails"),children:(0,a.jsx)(f.A,{size:18})})}),(0,a.jsx)(A.P.button,{whileHover:{scale:1.15,rotate:-5},whileTap:{scale:.9},className:"p-2.5 text-amber-400 hover:bg-amber-500/10 rounded-xl transition-all border border-transparent hover:border-amber-500/20",title:s("downloadPdf"),children:(0,a.jsx)(N.A,{size:18})}),"active"===e.status&&(0,a.jsx)(A.P.button,{whileHover:{scale:1.15,rotate:10},whileTap:{scale:.9},onClick:()=>M(e.id),className:"p-2.5 text-rose-400 hover:bg-rose-500/10 rounded-xl transition-all border border-transparent hover:border-rose-500/20",title:s("cancelNote"),children:(0,a.jsx)(v.A,{size:18})})]})})]},e.id))}),0===O.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-8 py-24 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"h-24 w-24 rounded-3xl bg-white/5 flex items-center justify-center border-2 border-dashed border-white/10",children:(0,a.jsx)(w.A,{size:48,className:"text-slate-700"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-slate-400 font-black text-base",children:s("noData")}),(0,a.jsx)("p",{className:"text-slate-500 text-sm font-bold",children:s("noDataSub")})]}),(0,a.jsx)(k(),{href:"/credit-notes/new",children:(0,a.jsxs)(A.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-4 flex items-center gap-2.5 px-6 py-3 rounded-2xl bg-white/5 text-rose-400 hover:bg-white/10 transition-all font-black text-sm border border-white/10",children:[(0,a.jsx)(c.A,{size:18}),s("new.breadcrumb")]})})]})})})]})]})}),(0,a.jsx)("div",{className:"bg-slate-900 px-8 py-5 border-t border-white/5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-black text-slate-500 uppercase tracking-widest",children:[(0,a.jsxs)("span",{className:"bg-white/5 px-4 py-2 rounded-xl border border-white/5 shadow-sm",children:[s("totalItems"),": ",O.length]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-xl border border-white/5 shadow-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),U.length," ",s("active")]}),(0,a.jsxs)("span",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-xl border border-white/5 shadow-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-slate-700"}),T.length-U.length," ",s("cancelled")]})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] pt-8 opacity-70",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-6 w-6 rounded-lg bg-gray-200 flex items-center justify-center",children:(0,a.jsx)(b.A,{size:12,className:"text-rose-500"})}),(0,a.jsx)("span",{children:s("systemName")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-1 w-1 rounded-full bg-gray-300"}),(0,a.jsxs)("span",{children:[s("allRightsReserved")," \xa9 ",new Date().getFullYear()]})]})]})]})})}function D(e){let{status:t,t:s}=e;return"active"===t?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-4 py-2 bg-gradient-to-r from-emerald-50 to-teal-50 text-emerald-700 rounded-2xl text-[10px] font-black border border-emerald-200/50 shadow-sm ring-1 ring-emerald-500/10",children:[(0,a.jsx)(x.A,{size:12}),s("active")]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-4 py-2 bg-gray-100 text-gray-500 rounded-2xl text-[10px] font-black border border-gray-200 shadow-sm ring-1 ring-gray-400/10",children:[(0,a.jsx)(m.A,{size:12}),s("cancelled")]})}},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2821),r=s(75889);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},83630:(e,t,s)=>{Promise.resolve().then(s.bind(s,42256))}},e=>{e.O(0,[977,4909,2619,8720,6550,5670,3884,8441,1255,7358],()=>e(e.s=83630)),_N_E=e.O()}]);