(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{81142:(e,t,s)=>{Promise.resolve().then(s.bind(s,87277))},87277:(e,t,s)=>{"use strict";s.d(t,{CustomersClient:()=>C});var l=s(95155),a=s(12115),r=s(26497),i=s(8751),d=s(35299),c=s(42529),n=s(6132),o=s(91169),x=s(86651),m=s(96583),h=s(24722),b=s(19408),u=s(23664),p=s(69141),g=s(78874),j=s(57828),f=s(11010),v=s(71360),N=s(21786),y=s(19985),w=s(52619),k=s.n(w),z=s(20063),A=s(83884);function C(e){let{customers:t,stats:s,companyId:w}=e,[C,_]=(0,a.useState)(t),[E,L]=(0,a.useState)(""),[S,P]=(0,a.useState)(null),[D,F]=(0,a.useState)({show:!1,type:"success",title:"",message:""}),O=(0,z.useRouter)(),{isRTL:R}=(0,A.Y)(),T=(0,A.c)("customers"),H=(0,A.c)("common"),M=C.filter(e=>{var t,s,l,a,r;let i=E.toLowerCase();return(null==(t=e.customer_name)?void 0:t.toLowerCase().includes(i))||(null==(s=e.company_name)?void 0:s.toLowerCase().includes(i))||(null==(l=e.vat_number)?void 0:l.toLowerCase().includes(i))||(null==(a=e.email)?void 0:a.toLowerCase().includes(i))||(null==(r=e.phone)?void 0:r.includes(i))}),Y=(e,t,s)=>{F({show:!0,type:e,title:t,message:s}),"loading"!==e&&setTimeout(()=>F(e=>({...e,show:!1})),3e3)},q=async(e,t)=>{if(confirm(T("confirmDelete").replace("{name}",t))){P(e),Y("loading",T("deleteLoading"),T("deletingCustomer"));try{(await fetch("/api/customers/".concat(e,"?company_id=").concat(w),{method:"DELETE"})).ok?(_(t=>t.filter(t=>t.id!==e)),Y("success",T("deleteSuccess"),T("customerDeleted")),O.refresh()):Y("error",T("deleteFailed"),T("deleteFailedMessage"))}catch(e){Y("error",T("errorOccurred"),T("deleteError"))}finally{P(null)}}};return(0,l.jsxs)("div",{className:"h-full flex flex-col",dir:R?"rtl":"ltr",children:[(0,l.jsx)(r.N,{children:D.show&&(0,l.jsx)(i.P.div,{initial:{opacity:0,y:-20,x:R?20:-20},animate:{opacity:1,y:0,x:0},exit:{opacity:0,scale:.95},className:"fixed top-8 ".concat(R?"left-8":"right-8"," z-[100] min-w-[320px]"),children:(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl border border-slate-100 p-6 flex items-center gap-5",children:[(0,l.jsx)("div",{className:"h-14 w-14 rounded-2xl flex items-center justify-center shrink-0 ".concat("success"===D.type?"bg-emerald-50 text-emerald-600":"error"===D.type?"bg-rose-50 text-rose-600":"bg-blue-50 text-blue-600"),children:"loading"===D.type?(0,l.jsx)(d.A,{className:"animate-spin",size:28}):"success"===D.type?(0,l.jsx)(c.A,{size:28}):(0,l.jsx)(n.A,{size:28})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-black text-slate-900 text-lg",children:D.title}),(0,l.jsx)("p",{className:"text-slate-500 font-medium",children:D.message})]})]})})}),(0,l.jsx)("div",{className:"flex-1 overflow-auto p-6 md:p-8",children:(0,l.jsx)("div",{className:"max-w-[1600px] mx-auto",children:(0,l.jsxs)(i.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-b from-slate-800 via-slate-700 to-slate-600 rounded-3xl shadow-2xl overflow-hidden border border-slate-500/30",children:[(0,l.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-r from-slate-900 to-slate-800 p-8 text-white border-b border-slate-600/50",children:[(0,l.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-emerald-500 via-rose-500 via-amber-500 via-purple-500 to-blue-500 animate-gradient-x"}),(0,l.jsx)("div",{className:"relative z-10",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-6",children:[(0,l.jsx)("div",{className:"h-16 w-16 rounded-[2rem] bg-white/10 backdrop-blur-md border border-white/10 flex items-center justify-center shadow-2xl group-hover:scale-110 transition-transform",children:(0,l.jsx)(o.A,{size:32,className:"text-blue-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl md:text-4xl font-black tracking-tight bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent",children:T("management")}),(0,l.jsx)("p",{className:"text-slate-300 font-medium",children:T("subtitle")})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/5 text-center shadow-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-black text-white",children:s.total}),(0,l.jsx)("div",{className:"text-[10px] text-slate-300 font-bold tracking-wider",children:H("total")})]}),(0,l.jsxs)("div",{className:"bg-emerald-500/10 backdrop-blur-md rounded-2xl p-4 border border-emerald-500/20 text-center shadow-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-black text-emerald-400",children:s.active}),(0,l.jsx)("div",{className:"text-[10px] text-emerald-200/60 font-bold tracking-wider",children:H("active")})]}),(0,l.jsxs)("div",{className:"bg-rose-500/10 backdrop-blur-md rounded-2xl p-4 border border-rose-500/20 text-center shadow-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-black text-rose-400",children:s.inactive}),(0,l.jsx)("div",{className:"text-[10px] text-rose-200/60 font-bold tracking-wider",children:H("inactive")})]})]})]})}),(0,l.jsx)("div",{className:"absolute -bottom-12 -right-12 w-48 h-48 bg-blue-500/10 rounded-full blur-3xl"}),(0,l.jsx)("div",{className:"absolute -top-12 -left-12 w-48 h-48 bg-purple-500/10 rounded-full blur-3xl"})]}),(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsx)(i.P.div,{className:"bg-white/95 backdrop-blur-xl rounded-2xl border border-white/50 p-6 shadow-lg",whileHover:{y:-2},children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-center justify-between",children:[(0,l.jsxs)("div",{className:"relative w-full md:w-96",children:[(0,l.jsx)(x.A,{className:"absolute ".concat(R?"right-5":"left-5"," top-1/2 -translate-y-1/2 text-slate-400"),size:20}),(0,l.jsx)("input",{type:"text",placeholder:T("searchPlaceholder"),value:E,onChange:e=>L(e.target.value),className:"w-full ".concat(R?"pr-14 pl-6":"pl-14 pr-6"," py-4 rounded-2xl border border-slate-200 bg-slate-50/50 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none text-sm font-bold transition-all shadow-sm")})]}),(0,l.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,l.jsx)(k(),{href:"/customers/new",children:(0,l.jsxs)("button",{className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-blue-600 text-white font-black text-sm hover:bg-blue-700 transition-all shadow-xl shadow-blue-500/20 active:scale-95",children:[(0,l.jsx)(m.A,{size:18}),(0,l.jsx)("span",{children:T("addCustomer")})]})}),(0,l.jsxs)("button",{className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-white text-slate-700 font-black text-sm border border-slate-200 hover:bg-slate-50 transition-all shadow-lg active:scale-95",children:[(0,l.jsx)(h.A,{size:18,className:"text-emerald-600"}),(0,l.jsx)("span",{children:H("export")})]})]})]})}),(0,l.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/95 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-slate-50/50 px-8 py-5 border-b border-slate-100 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,l.jsx)(o.A,{size:18,className:"text-blue-600"})}),(0,l.jsx)("h3",{className:"font-black text-slate-800 text-sm",children:T("customersList")})]}),(0,l.jsxs)("span",{className:"bg-blue-600 text-white px-4 py-1.5 rounded-xl text-[10px] font-black shadow-lg shadow-blue-500/20",children:[M.length," ",T("customer")]})]}),M.length>0?(0,l.jsx)("div",{className:"overflow-x-auto max-h-[calc(100vh-550px)]",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"sticky top-0 bg-gray-50 z-10",children:(0,l.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,l.jsx)("th",{className:"".concat(R?"text-right":"text-left"," px-4 py-3 text-xs font-bold text-gray-600"),children:T("customer")}),(0,l.jsx)("th",{className:"".concat(R?"text-right":"text-left"," px-4 py-3 text-xs font-bold text-gray-600"),children:T("facility")}),(0,l.jsx)("th",{className:"".concat(R?"text-right":"text-left"," px-4 py-3 text-xs font-bold text-gray-600"),children:T("taxNumber")}),(0,l.jsx)("th",{className:"".concat(R?"text-right":"text-left"," px-4 py-3 text-xs font-bold text-gray-600"),children:T("emailCol")}),(0,l.jsx)("th",{className:"".concat(R?"text-right":"text-left"," px-4 py-3 text-xs font-bold text-gray-600"),children:T("phoneCol")}),(0,l.jsx)("th",{className:"".concat(R?"text-right":"text-left"," px-4 py-3 text-xs font-bold text-gray-600"),children:T("statusCol")}),(0,l.jsx)("th",{className:"text-center px-4 py-3 text-xs font-bold text-gray-600",children:T("actionsCol")})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-50",children:M.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"h-8 w-8 rounded-lg bg-blue-50 flex items-center justify-center text-blue-500",children:(0,l.jsx)(o.A,{size:14})}),(0,l.jsx)("span",{className:"font-bold text-gray-900 text-sm",children:e.customer_name||T("notSpecified")})]})}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(b.A,{size:12,className:"text-gray-400"}),(0,l.jsx)("span",{className:"text-sm text-gray-700",children:e.company_name})]})}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsx)("code",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs font-mono",children:e.vat_number})}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.email?(0,l.jsxs)("a",{href:"mailto:".concat(e.email),className:"flex items-center gap-1 text-xs text-blue-600 hover:underline",children:[(0,l.jsx)(u.A,{size:10}),e.email]}):(0,l.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.phone?(0,l.jsxs)("a",{href:"tel:".concat(e.phone),className:"flex items-center gap-1 text-xs text-gray-700",children:[(0,l.jsx)(p.A,{size:10}),e.phone]}):(0,l.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.is_active?(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-xs font-bold",children:[(0,l.jsx)(c.A,{size:10}),T("activeStatus")]}):(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-50 text-red-600 text-xs font-bold",children:[(0,l.jsx)(g.A,{size:10}),T("inactiveStatus")]})}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,l.jsx)(k(),{href:"/customers/".concat(e.id),children:(0,l.jsx)("button",{className:"h-7 w-7 rounded-lg bg-blue-50 text-blue-500 flex items-center justify-center hover:bg-blue-500 hover:text-white transition-all",title:H("view"),children:(0,l.jsx)(j.A,{size:14})})}),(0,l.jsx)(k(),{href:"/customers/".concat(e.id,"/edit"),children:(0,l.jsx)("button",{className:"h-7 w-7 rounded-lg bg-amber-50 text-amber-500 flex items-center justify-center hover:bg-amber-500 hover:text-white transition-all",title:H("edit"),children:(0,l.jsx)(f.A,{size:14})})}),(0,l.jsx)("button",{onClick:()=>q(e.id,e.customer_name||e.company_name),disabled:S===e.id,className:"h-7 w-7 rounded-lg bg-red-50 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-all disabled:opacity-50",title:H("delete"),children:S===e.id?(0,l.jsx)("div",{className:"h-3 w-3 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,l.jsx)(v.A,{size:14})})]})})]},e.id))})]})}):(0,l.jsxs)("div",{className:"py-16 text-center",children:[(0,l.jsx)(o.A,{size:48,className:"mx-auto text-gray-200 mb-4"}),(0,l.jsx)("h4",{className:"text-lg font-bold text-gray-600 mb-2",children:T("noCustomers")}),(0,l.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:T("startAddingCustomer")}),(0,l.jsx)(k(),{href:"/customers/new",children:(0,l.jsxs)("button",{className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-emerald-500 text-white font-bold text-sm hover:bg-emerald-600 transition-all",children:[(0,l.jsx)(m.A,{size:16}),(0,l.jsx)("span",{children:T("addCustomer")})]})})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsx)(k(),{href:"/customers/new",children:(0,l.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/50 p-5 shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all text-center group cursor-pointer",children:[(0,l.jsx)("div",{className:"h-12 w-12 rounded-xl bg-blue-500 flex items-center justify-center text-white mx-auto mb-3 group-hover:scale-105 transition-transform",children:(0,l.jsx)(m.A,{size:20})}),(0,l.jsx)("h4",{className:"font-bold text-gray-900 text-sm mb-1",children:T("addCustomer")}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:T("registerNewCustomer")})]})}),(0,l.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/50 p-5 shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all text-center group cursor-pointer",children:[(0,l.jsx)("div",{className:"h-12 w-12 rounded-xl bg-emerald-500 flex items-center justify-center text-white mx-auto mb-3 group-hover:scale-105 transition-transform",children:(0,l.jsx)(N.A,{size:20})}),(0,l.jsx)("h4",{className:"font-bold text-gray-900 text-sm mb-1",children:H("import")}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:T("importFromExcel")})]}),(0,l.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl border border-white/50 p-5 shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all text-center group cursor-pointer",children:[(0,l.jsx)("div",{className:"h-12 w-12 rounded-xl bg-purple-500 flex items-center justify-center text-white mx-auto mb-3 group-hover:scale-105 transition-transform",children:(0,l.jsx)(y.A,{size:20})}),(0,l.jsx)("h4",{className:"font-bold text-gray-900 text-sm mb-1",children:T("reports")}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:T("customerReports")})]})]})]})]})})})]})}}},e=>{e.O(0,[977,2619,3676,3884,8441,1255,7358],()=>e(e.s=81142)),_N_E=e.O()}]);