(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7633],{3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var s=a(95155);a(12115);var r=a(32467),l=a(83101),n=a(64269);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:l,asChild:o=!1,...i}=e,c=o?r.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,n.cn)(d({variant:a,size:l,className:t})),...i})}},11186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>x,eb:()=>u,gC:()=>m,l6:()=>i,yv:()=>c});var s=a(95155);a(12115);var r=a(14744),l=a(24033),n=a(5917),d=a(12108),o=a(64269);function i(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"select",...t})}function c(e){let{...t}=e;return(0,s.jsx)(r.WT,{"data-slot":"select-value",...t})}function x(e){let{className:t,size:a="default",children:n,...d}=e;return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":a,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...d,children:[n,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:a,position:l="popper",align:n="center",...d}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,align:n,...d,children:[(0,s.jsx)(h,{}),(0,s.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(b,{})]})})}function u(e){let{className:t,children:a,...l}=e;return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...l,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(n.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:a})]})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(d.A,{className:"size-4"})})}function b(e){let{className:t,...a}=e;return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(l.A,{className:"size-4"})})}},11647:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var s=a(95155);a(12115);var r=a(32467),l=a(83101),n=a(64269);let d=(0,l.F)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,asChild:l=!1,...o}=e,i=l?r.DX:"span";return(0,s.jsx)(i,{"data-slot":"badge",className:(0,n.cn)(d({variant:a}),t),...o})}},31132:(e,t,a)=>{Promise.resolve().then(a.bind(a,71079))},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2821),r=a(75889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},65142:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(95155);a(12115);var r=a(64269);function l(e){let{className:t,type:a,...l}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}},71079:(e,t,a)=>{"use strict";a.d(t,{GeneralLedgerClient:()=>Y});var s=a(95155),r=a(12115),l=a(47937),n=a(65229),d=a(19408),o=a(50906),i=a(61362),c=a(89559),x=a(80534),m=a(24722),u=a(309),h=a(1524),b=a(26921),g=a(85843),p=a(79397),f=a(87454),v=a(86651),j=a(66955),N=a(12108),w=a(24033),y=a(89715),k=a(16485),C=a(37107),L=a(71871),A=a(7013),_=a(67840),z=a(21796),D=a(57828),S=a(86948),F=a(3998),B=a(65142),E=a(11647),I=a(83884),T=a(11186),Z=a(26991),$=a(73850),R=a(68425),W=a(47734),M=a(73697),K=a(23508),O=a(77568),V=a(78765),q=a(12235),P=a(69386),U=a(7620),G=a(98128),Q=a(16533);let X=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16"];function Y(e){let{companyId:t,companyInfo:a}=e,{t:Y,locale:H}=(0,I.Y)(),[J,ee]=(0,r.useState)([]),[et,ea]=(0,r.useState)(!0),[es,er]=(0,r.useState)(!1),[el,en]=(0,r.useState)({totalDebit:0,totalCredit:0,finalBalance:0,entriesCount:0,activeAccounts:0}),[ed,eo]=(0,r.useState)({monthlyTrend:[],topAccounts:[],costCenterDistribution:[]}),[ei,ec]=(0,r.useState)({accounts:[],costCenters:[]}),[ex,em]=(0,r.useState)({fromDate:"",toDate:"",accountId:"",costCenterId:"",search:"",entryType:"all"}),[eu,eh]=(0,r.useState)(!1),[eb,eg]=(0,r.useState)(null),[ep,ef]=(0,r.useState)(!1),[ev,ej]=(0,r.useState)(1),[eN,ew]=(0,r.useState)(20),[ey,ek]=(0,r.useState)({key:"date",direction:"desc"}),[eC,eL]=(0,r.useState)(null),eA=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e?er(!0):ea(!0),eL(null);let t=new URLSearchParams;ex.fromDate&&t.set("from_date",ex.fromDate),ex.toDate&&t.set("to_date",ex.toDate),ex.accountId&&t.set("account_id",ex.accountId),ex.costCenterId&&t.set("cost_center_id",ex.costCenterId),ex.search&&t.set("search",ex.search),"all"!==ex.entryType&&t.set("entry_type",ex.entryType);let a=await fetch("/api/general-ledger?".concat(t.toString()));if(!a.ok)throw Error("Failed to fetch: ".concat(a.statusText));let s=await a.json();if(s.error)return void eL(s.error);ee(s.entries||[]),en(s.stats||{totalDebit:0,totalCredit:0,finalBalance:0,entriesCount:0,activeAccounts:0}),eo(s.chartData||{monthlyTrend:[],topAccounts:[],costCenterDistribution:[]}),ec(s.metadata||{accounts:[],costCenters:[]})}catch(e){console.error("Error fetching ledger data:",e),eL(Y("generalLedger.errorLoading"))}finally{ea(!1),er(!1)}},[ex,Y]);(0,r.useEffect)(()=>{eA()},[eA]),(0,r.useEffect)(()=>{let e=setInterval(()=>{eA(!0)},3e4);return()=>clearInterval(e)},[eA]);let e_=(0,r.useMemo)(()=>[...J].sort((e,t)=>{let a=e[ey.key],s=t[ey.key];if("number"==typeof a&&"number"==typeof s)return"asc"===ey.direction?a-s:s-a;let r=String(a||""),l=String(s||"");return"asc"===ey.direction?r.localeCompare(l):l.localeCompare(r)}),[J,ey]),ez=(0,r.useMemo)(()=>{let e=(ev-1)*eN;return e_.slice(e,e+eN)},[e_,ev,eN]),eD=Math.ceil(J.length/eN),eS=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return et?(0,s.jsx)("div",{className:"min-h-[80vh] flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full border-4 border-blue-500/30 border-t-blue-500 animate-spin"}),(0,s.jsx)(l.A,{className:"w-8 h-8 text-blue-500 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]}),(0,s.jsx)("p",{className:"text-slate-600 font-bold text-lg",children:Y("generalLedger.loading")})]})}):eC?(0,s.jsx)("div",{className:"min-h-[80vh] flex items-center justify-center p-6",children:(0,s.jsxs)(S.Zp,{className:"max-w-md w-full border-none shadow-2xl rounded-[2rem] bg-white p-8 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-rose-100 rounded-3xl flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(n.A,{className:"w-10 h-10 text-rose-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:Y("generalLedger.errorLoading")}),(0,s.jsx)("p",{className:"text-slate-600 mb-8",children:eC}),(0,s.jsx)(F.$,{onClick:()=>eA(),className:"w-full h-12 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-bold",children:Y("profitLoss.retry")})]})}):(0,s.jsx)("div",{className:"p-4 md:p-6",dir:"ar"===H?"rtl":"ltr",children:(0,s.jsxs)(S.Zp,{className:"border-none shadow-2xl rounded-[2rem] overflow-hidden bg-[#1a2234] p-4 md:p-8 space-y-8",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-[2rem] bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#0f172a] text-white shadow-2xl border border-white/10 print:hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-emerald-500/20 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-emerald-500 to-purple-500"}),(0,s.jsxs)("div",{className:"relative z-10 p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-5",children:[(0,s.jsxs)("div",{className:"relative",children:[a.logo_path?(0,s.jsx)("img",{src:a.logo_path,alt:"Logo",className:"w-16 h-16 md:w-20 md:h-20 rounded-2xl border-2 border-white/20 object-cover shadow-2xl"}):(0,s.jsx)("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center shadow-2xl",children:(0,s.jsx)(d.A,{className:"w-8 h-8 md:w-10 md:h-10 text-white"})}),(0,s.jsx)("div",{className:"absolute -bottom-2 -right-2 w-7 h-7 md:w-8 md:h-8 bg-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,s.jsx)(l.A,{className:"w-3 h-3 md:w-4 md:h-4 text-white"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl md:text-4xl font-black tracking-tight bg-gradient-to-r from-white via-blue-200 to-white bg-clip-text text-transparent",children:Y("generalLedger.title")}),(0,s.jsx)("p",{className:"text-white/60 font-medium mt-1 text-sm md:text-base",children:a.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsxs)(E.E,{className:"bg-blue-500/20 text-blue-300 border-blue-500/30 font-bold text-xs",children:[(0,s.jsx)(o.A,{className:"w-3 h-3 ml-1"}),Y("common.active")]}),(0,s.jsxs)(E.E,{className:"bg-emerald-500/20 text-emerald-300 border-emerald-500/30 font-bold text-xs",children:[(0,s.jsx)(i.A,{className:"w-3 h-3 ml-1"}),J.length," ",Y("common.records")]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3",children:[(0,s.jsxs)(F.$,{onClick:()=>eA(!0),variant:"outline",size:"sm",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 font-bold rounded-xl",disabled:es,children:[(0,s.jsx)(c.A,{className:"w-4 h-4 ".concat("ar"===H?"ml-2":"mr-2"," ").concat(es?"animate-spin":"")}),Y("generalLedger.update")]}),(0,s.jsxs)(F.$,{onClick:()=>ef(!ep),variant:"outline",size:"sm",className:"bg-purple-500/20 border-purple-500/30 text-purple-300 hover:bg-purple-500/30 font-bold rounded-xl",children:[(0,s.jsx)(x.A,{className:"w-4 h-4 ".concat("ar"===H?"ml-2":"mr-2")}),Y("generalLedger.analytics")]}),(0,s.jsxs)(F.$,{onClick:()=>{let e=new Blob(["\uFEFF"+[[Y("generalLedger.date"),Y("generalLedger.docNumber"),Y("generalLedger.description"),Y("accounts.accountCode"),Y("accounts.accountName"),Y("costCenters.centerCode"),Y("generalLedger.debit"),Y("generalLedger.credit"),Y("generalLedger.balance")].join(","),...J.map(e=>[e.date,e.document_number,'"'.concat(e.description,'"'),e.account_code,'"'.concat(e.account_name,'"'),e.cost_center_code,e.debit.toFixed(2),e.credit.toFixed(2),e.balance.toFixed(2)].join(","))].join("\n")],{type:"text/csv;charset=utf-8"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="general_ledger_".concat(new Date().toISOString().split("T")[0],".csv"),a.click()},variant:"outline",size:"sm",className:"bg-emerald-500/20 border-emerald-500/30 text-emerald-300 hover:bg-emerald-500/30 font-bold rounded-xl",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 ".concat("ar"===H?"ml-2":"mr-2")}),Y("generalLedger.excel")]}),(0,s.jsxs)(F.$,{onClick:()=>{window.print()},variant:"outline",size:"sm",className:"bg-amber-500/20 border-amber-500/30 text-amber-300 hover:bg-amber-500/30 font-bold rounded-xl",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 ".concat("ar"===H?"ml-2":"mr-2")}),Y("generalLedger.print")]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mt-6 md:mt-8",children:[{label:Y("generalLedger.totalDebit"),value:el.totalDebit,icon:h.A,color:"from-rose-500 to-red-600",iconBg:"bg-rose-500/20"},{label:Y("generalLedger.totalCredit"),value:el.totalCredit,icon:b.A,color:"from-emerald-500 to-green-600",iconBg:"bg-emerald-500/20"},{label:Y("generalLedger.finalBalance"),value:el.finalBalance,icon:g.A,color:"from-blue-500 to-indigo-600",iconBg:"bg-blue-500/20"},{label:Y("generalLedger.entriesCount"),value:el.entriesCount,icon:o.A,color:"from-purple-500 to-violet-600",iconBg:"bg-purple-500/20",isCount:!0},{label:Y("generalLedger.activeAccounts"),value:el.activeAccounts,icon:p.A,color:"from-amber-500 to-orange-600",iconBg:"bg-amber-500/20",isCount:!0}].map((e,t)=>(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10 p-3 md:p-4 group hover:bg-white/10 transition-all",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 group-hover:opacity-10 transition-opacity")}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col items-center text-center gap-2",children:[(0,s.jsx)("div",{className:"p-2 md:p-2.5 rounded-xl ".concat(e.iconBg),children:(0,s.jsx)(e.icon,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),(0,s.jsx)("span",{className:"text-lg md:text-2xl font-black text-white tabular-nums",children:e.isCount?e.value:eS(e.value)}),(0,s.jsx)("span",{className:"text-[10px] md:text-xs font-medium text-white/50",children:e.label})]})]},t))})]})]}),ep&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 print:hidden",children:[(0,s.jsxs)(S.Zp,{className:"lg:col-span-2 border-none shadow-xl rounded-[2rem] overflow-hidden bg-white/80 backdrop-blur-xl",children:[(0,s.jsx)(S.aR,{className:"border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,s.jsxs)(S.ZB,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"w-5 h-5 text-blue-600"}),Y("generalLedger.monthlyTrend")]})}),(0,s.jsx)(S.Wu,{className:"p-6",children:(0,s.jsx)(Z.u,{width:"100%",height:300,children:(0,s.jsxs)($.Q,{data:ed.monthlyTrend,children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorAmount",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),(0,s.jsx)(R.d,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,s.jsx)(W.W,{dataKey:"month",stroke:"#64748b",fontSize:12}),(0,s.jsx)(M.h,{stroke:"#64748b",fontSize:12,tickFormatter:e=>"".concat((e/1e3).toFixed(0),"K")}),(0,s.jsx)(K.m,{contentStyle:{background:"#1e293b",border:"none",borderRadius:"12px",color:"white"},formatter:e=>[eS(e)+" "+Y("common.sar"),Y("common.amount")]}),(0,s.jsx)(O.G,{type:"monotone",dataKey:"amount",stroke:"#3b82f6",strokeWidth:3,fill:"url(#colorAmount)"})]})})})]}),(0,s.jsxs)(S.Zp,{className:"border-none shadow-xl rounded-[2rem] overflow-hidden bg-white/80 backdrop-blur-xl",children:[(0,s.jsx)(S.aR,{className:"border-b border-slate-100 bg-gradient-to-r from-purple-50 to-pink-50",children:(0,s.jsxs)(S.ZB,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"w-5 h-5 text-purple-600"}),Y("generalLedger.costCenterDistribution")]})}),(0,s.jsx)(S.Wu,{className:"p-6",children:ed.costCenterDistribution.length>0?(0,s.jsx)(Z.u,{width:"100%",height:300,children:(0,s.jsxs)(V.r,{children:[(0,s.jsx)(q.F,{data:ed.costCenterDistribution,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"total",nameKey:"name",children:ed.costCenterDistribution.map((e,t)=>(0,s.jsx)(P.f,{fill:X[t%X.length]},"cell-".concat(t)))}),(0,s.jsx)(K.m,{contentStyle:{background:"#1e293b",border:"none",borderRadius:"12px",color:"white"},formatter:e=>eS(e)+" "+Y("common.sar")}),(0,s.jsx)(U.s,{})]})}):(0,s.jsx)("div",{className:"h-[300px] flex items-center justify-center text-slate-400",children:Y("common.noData")})})]}),(0,s.jsxs)(S.Zp,{className:"lg:col-span-3 border-none shadow-xl rounded-[2rem] overflow-hidden bg-white/80 backdrop-blur-xl",children:[(0,s.jsx)(S.aR,{className:"border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-teal-50",children:(0,s.jsxs)(S.ZB,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"w-5 h-5 text-emerald-600"}),Y("generalLedger.topAccounts")]})}),(0,s.jsx)(S.Wu,{className:"p-6",children:ed.topAccounts.length>0?(0,s.jsx)(Z.u,{width:"100%",height:300,children:(0,s.jsxs)(G.E,{data:ed.topAccounts,layout:"vertical",children:[(0,s.jsx)(R.d,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,s.jsx)(W.W,{type:"number",stroke:"#64748b",fontSize:12,tickFormatter:e=>"".concat((e/1e3).toFixed(0),"K")}),(0,s.jsx)(M.h,{type:"category",dataKey:"name",stroke:"#64748b",fontSize:11,width:150}),(0,s.jsx)(K.m,{contentStyle:{background:"#1e293b",border:"none",borderRadius:"12px",color:"white"},formatter:e=>[eS(e)+" "+Y("common.sar"),Y("common.total")]}),(0,s.jsx)(Q.y,{dataKey:"total",fill:"#10b981",radius:[0,8,8,0]})]})}):(0,s.jsx)("div",{className:"h-[300px] flex items-center justify-center text-slate-400",children:Y("common.noData")})})]})]}),(0,s.jsx)(S.Zp,{className:"border-none shadow-xl rounded-[2rem] overflow-hidden bg-white/80 backdrop-blur-xl print:hidden",children:(0,s.jsxs)(S.Wu,{className:"p-4 md:p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,s.jsx)(v.A,{className:"absolute ".concat("ar"===H?"right-4":"left-4"," top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400")}),(0,s.jsx)(B.p,{placeholder:Y("generalLedger.searchPlaceholder"),value:ex.search,onChange:e=>em(t=>({...t,search:e.target.value})),className:"".concat("ar"===H?"pr-12 text-right":"pl-12 text-left"," h-12 rounded-xl border-slate-200 focus:border-blue-500 font-medium")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,s.jsxs)(F.$,{variant:"outline",onClick:()=>eh(!eu),className:"rounded-xl font-bold h-12 ".concat(eu?"bg-blue-50 border-blue-300 text-blue-700":""),children:[(0,s.jsx)(j.A,{className:"w-4 h-4 ".concat("ar"===H?"ml-2":"mr-2")}),Y("generalLedger.advancedFilters"),eu?(0,s.jsx)(N.A,{className:"w-4 h-4 ".concat("ar"===H?"mr-2":"ml-2")}):(0,s.jsx)(w.A,{className:"w-4 h-4 ".concat("ar"===H?"mr-2":"ml-2")})]}),(0,s.jsxs)(T.l6,{value:ex.entryType,onValueChange:e=>em(t=>({...t,entryType:e})),children:[(0,s.jsx)(T.bq,{className:"w-40 h-12 rounded-xl font-bold",children:(0,s.jsx)(T.yv,{placeholder:Y("generalLedger.entryType")})}),(0,s.jsxs)(T.gC,{children:[(0,s.jsx)(T.eb,{value:"all",children:Y("generalLedger.allEntries")}),(0,s.jsx)(T.eb,{value:"debit",children:Y("generalLedger.debitOnly")}),(0,s.jsx)(T.eb,{value:"credit",children:Y("generalLedger.creditOnly")})]})]})]})]}),eu&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4 pt-4 border-t border-slate-100",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:Y("generalLedger.fromDate")}),(0,s.jsx)(B.p,{type:"date",value:ex.fromDate,onChange:e=>em(t=>({...t,fromDate:e.target.value})),className:"h-11 rounded-xl"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:Y("generalLedger.toDate")}),(0,s.jsx)(B.p,{type:"date",value:ex.toDate,onChange:e=>em(t=>({...t,toDate:e.target.value})),className:"h-11 rounded-xl"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:Y("generalLedger.account")}),(0,s.jsxs)(T.l6,{value:ex.accountId,onValueChange:e=>em(t=>({...t,accountId:e})),children:[(0,s.jsx)(T.bq,{className:"h-11 rounded-xl",children:(0,s.jsx)(T.yv,{placeholder:Y("generalLedger.allAccounts")})}),(0,s.jsxs)(T.gC,{children:[(0,s.jsx)(T.eb,{value:"",children:Y("generalLedger.allAccounts")}),ei.accounts.map(e=>(0,s.jsxs)(T.eb,{value:String(e.id),children:[e.account_code," - ",e.account_name]},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:Y("generalLedger.costCenter")}),(0,s.jsxs)(T.l6,{value:ex.costCenterId,onValueChange:e=>em(t=>({...t,costCenterId:e})),children:[(0,s.jsx)(T.bq,{className:"h-11 rounded-xl",children:(0,s.jsx)(T.yv,{placeholder:Y("generalLedger.allCenters")})}),(0,s.jsxs)(T.gC,{children:[(0,s.jsx)(T.eb,{value:"",children:Y("generalLedger.allCenters")}),ei.costCenters.map(e=>(0,s.jsxs)(T.eb,{value:String(e.id),children:[e.center_code," - ",e.center_name]},e.id))]})]})]}),(0,s.jsx)("div",{className:"md:col-span-4 flex justify-end",children:(0,s.jsxs)(F.$,{variant:"outline",onClick:()=>em({fromDate:"",toDate:"",accountId:"",costCenterId:"",search:"",entryType:"all"}),className:"rounded-xl font-bold",children:[(0,s.jsx)(n.A,{className:"w-4 h-4 ".concat("ar"===H?"ml-2":"mr-2")}),Y("generalLedger.clearFilters")]})})]})]})}),(0,s.jsxs)(S.Zp,{className:"border-none shadow-xl rounded-[2rem] overflow-hidden bg-white/90 backdrop-blur-xl print:shadow-none print:rounded-none",children:[(0,s.jsx)(S.aR,{className:"border-b border-slate-100 bg-gradient-to-r from-slate-50 to-blue-50 print:bg-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(S.ZB,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[(0,s.jsx)(y.A,{className:"w-5 h-5 text-blue-600"}),Y("generalLedger.financialLog")]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 print:hidden",children:[(0,s.jsxs)("span",{className:"text-sm text-slate-500 font-medium",children:[Y("common.view"),":"]}),(0,s.jsxs)(T.l6,{value:String(eN),onValueChange:e=>{ew(Number(e)),ej(1)},children:[(0,s.jsx)(T.bq,{className:"w-20 h-9 rounded-lg",children:(0,s.jsx)(T.yv,{})}),(0,s.jsxs)(T.gC,{children:[(0,s.jsx)(T.eb,{value:"10",children:"10"}),(0,s.jsx)(T.eb,{value:"20",children:"20"}),(0,s.jsx)(T.eb,{value:"50",children:"50"}),(0,s.jsx)(T.eb,{value:"100",children:"100"})]})]})]})]})}),(0,s.jsxs)(S.Wu,{className:"p-0",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gradient-to-r from-slate-800 to-slate-900 text-white",children:[[{key:"date",label:Y("generalLedger.date"),icon:k.A},{key:"document_number",label:Y("generalLedger.docNumber"),icon:C.A},{key:"description",label:Y("generalLedger.description"),icon:y.A},{key:"account_code",label:Y("generalLedger.account"),icon:p.A},{key:"cost_center_code",label:Y("generalLedger.costCenter"),icon:L.A},{key:"debit",label:Y("generalLedger.debit"),icon:A.A},{key:"credit",label:Y("generalLedger.credit"),icon:_.A},{key:"balance",label:Y("generalLedger.balance"),icon:g.A},{key:"source_type",label:Y("generalLedger.source"),icon:z.A}].map(e=>(0,s.jsx)("th",{onClick:()=>{var t;return t=e.key,void ek(e=>({key:t,direction:e.key===t&&"desc"===e.direction?"asc":"desc"}))},className:"px-3 md:px-4 py-4 ".concat("ar"===H?"text-right":"text-left"," text-xs font-bold cursor-pointer hover:bg-white/10 transition-colors whitespace-nowrap"),children:(0,s.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,s.jsx)(e.icon,{className:"w-3 h-3 md:w-4 md:h-4 opacity-70"}),(0,s.jsx)("span",{className:"hidden md:inline",children:e.label}),(0,s.jsx)("span",{className:"md:hidden",children:e.label.substring(0,6)}),ey.key===e.key&&("desc"===ey.direction?(0,s.jsx)(w.A,{className:"w-3 h-3"}):(0,s.jsx)(N.A,{className:"w-3 h-3"}))]})},e.key)),(0,s.jsx)("th",{className:"px-3 md:px-4 py-4 text-center text-xs font-bold print:hidden",children:Y("generalLedger.view")})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100",children:ez.length>0?ez.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-blue-50/50 transition-colors group ".concat(t%2==0?"bg-white":"bg-slate-50/50"),children:[(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-xs md:text-sm font-medium text-slate-700 whitespace-nowrap",children:new Date(e.date).toLocaleDateString("en-US")}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-xs md:text-sm",children:(0,s.jsx)(E.E,{variant:"outline",className:"font-bold bg-slate-100 text-slate-700 text-xs",children:e.document_number})}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-xs md:text-sm text-slate-600 max-w-[150px] md:max-w-[200px] truncate",title:e.description,children:e.description}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-xs md:text-sm",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-bold text-slate-800 text-xs",children:e.account_code||"-"}),(0,s.jsx)("span",{className:"text-[10px] md:text-xs text-slate-500 truncate max-w-[100px] md:max-w-[120px]",children:e.account_name})]})}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-xs md:text-sm",children:e.cost_center_code?(0,s.jsx)(E.E,{variant:"secondary",className:"font-medium bg-purple-100 text-purple-700 text-xs",children:e.cost_center_code}):(0,s.jsx)("span",{className:"text-slate-300",children:"-"})}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-xs md:text-sm",children:e.debit>0?(0,s.jsx)("span",{className:"font-bold text-rose-600 tabular-nums",children:eS(e.debit)}):(0,s.jsx)("span",{className:"text-slate-300",children:"-"})}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-xs md:text-sm",children:e.credit>0?(0,s.jsx)("span",{className:"font-bold text-emerald-600 tabular-nums",children:eS(e.credit)}):(0,s.jsx)("span",{className:"text-slate-300",children:"-"})}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-xs md:text-sm",children:(0,s.jsx)("span",{className:"font-black tabular-nums ".concat(e.balance>=0?"text-blue-600":"text-rose-600"),children:eS(e.balance)})}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-xs md:text-sm",children:(0,s.jsx)(E.E,{className:"font-bold text-xs ".concat("expense"===e.source?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"),children:e.source_type})}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-3 text-center print:hidden",children:(0,s.jsx)(F.$,{variant:"ghost",size:"sm",onClick:()=>eg(e),className:"opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:(0,s.jsx)(D.A,{className:"w-4 h-4 text-blue-600"})})})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:10,className:"px-4 py-16 text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(y.A,{className:"w-10 h-10 text-slate-300"})}),(0,s.jsx)("p",{className:"text-slate-400 font-bold text-lg",children:Y("generalLedger.noMatching")})]})})})}),(0,s.jsx)("tfoot",{children:(0,s.jsxs)("tr",{className:"bg-gradient-to-r from-slate-100 to-blue-100 font-bold",children:[(0,s.jsx)("td",{colSpan:5,className:"px-3 md:px-4 py-4 text-xs md:text-sm text-slate-700",children:Y("common.total")}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-4 text-xs md:text-sm text-rose-600 font-black tabular-nums",children:eS(el.totalDebit)}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-4 text-xs md:text-sm text-emerald-600 font-black tabular-nums",children:eS(el.totalCredit)}),(0,s.jsx)("td",{className:"px-3 md:px-4 py-4 text-xs md:text-sm text-blue-700 font-black tabular-nums",children:eS(el.finalBalance)}),(0,s.jsx)("td",{colSpan:2})]})})]})}),eD>1&&(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between p-4 border-t border-slate-100 print:hidden gap-3",children:[(0,s.jsx)("div",{className:"text-sm text-slate-500 font-medium",children:"ar"===H?(0,s.jsxs)(s.Fragment,{children:["عرض ",(ev-1)*eN+1," إلى ",Math.min(ev*eN,J.length)," من ",J.length," حركة"]}):(0,s.jsxs)(s.Fragment,{children:["Showing ",(ev-1)*eN+1," to ",Math.min(ev*eN,J.length)," of ",J.length," records"]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(F.$,{variant:"outline",size:"sm",onClick:()=>ej(1),disabled:1===ev,className:"rounded-lg font-bold",children:Y("common.previous")}),(0,s.jsx)(F.$,{variant:"outline",size:"sm",onClick:()=>ej(e=>Math.max(1,e-1)),disabled:1===ev,className:"rounded-lg font-bold",children:Y("common.previous")}),(0,s.jsxs)("span",{className:"px-4 py-2 bg-blue-50 rounded-lg text-blue-700 font-bold text-sm",children:[ev," / ",eD]}),(0,s.jsx)(F.$,{variant:"outline",size:"sm",onClick:()=>ej(e=>Math.min(eD,e+1)),disabled:ev===eD,className:"rounded-lg font-bold",children:Y("common.next")}),(0,s.jsx)(F.$,{variant:"outline",size:"sm",onClick:()=>ej(eD),disabled:ev===eD,className:"rounded-lg font-bold",children:Y("common.next")})]})]})]})]})]})})}},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>i,ZB:()=>d,Zp:()=>l,aR:()=>n});var s=a(95155);a(12115);var r=a(64269);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}}},e=>{e.O(0,[4909,315,477,6663,825,3415,2976,3884,8441,1255,7358],()=>e(e.s=31132)),_N_E=e.O()}]);