(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7799],{32848:(e,t,a)=>{"use strict";a.d(t,{EmployeeDetailsClient:()=>en});var l=a(95155),s=a(12115),r=a(8751),i=a(26497),o=a(20508),n=a(52139),d=a(76907),c=a(89715),x=a(11233),b=a(80534),u=a(23664),h=a(29633),m=a(931),p=a(39068),g=a(52987),f=a(24127),v=a(61362),j=a(95740),w=a(90799),y=a(46826),N=a(37107),_=a(69141),k=a(24947),z=a(16485),S=a(78519),A=a(71871),C=a(46046),P=a(5917),R=a(37135),H=a(39324),M=a(10383),L=a(23327),q=a(52056),T=a(91169),D=a(65229),U=a(86651),E=a(57828),G=a(86550),I=a(50316),B=a(26467),O=a(18720),V=a(30926);let W=(0,V.createServerReference)("6037b9d8a10fec2d3b6d20fe22b61b5899a071b31a",V.callServer,void 0,V.findSourceMapURL,"updateEmployeePersonalInfo");V.callServer,V.findSourceMapURL;let F=(0,V.createServerReference)("6055c0ccbb9a0f63f316658817e652b60f2fbc609d",V.callServer,void 0,V.findSourceMapURL,"toggleEmployeeStatus"),J=(0,V.createServerReference)("409dcbbe8a3f1247c567148160bbfb5dbde9d2d2ae",V.callServer,void 0,V.findSourceMapURL,"addViolation"),K=(0,V.createServerReference)("6085fdcacc07001613e988c57d576d6d71053a5999",V.callServer,void 0,V.findSourceMapURL,"deleteViolation"),Q=(0,V.createServerReference)("708e7e89f7cf02d0c9214e88af6fa789eee0583e64",V.callServer,void 0,V.findSourceMapURL,"updateViolation"),X=(0,V.createServerReference)("40d731db50ba4ba2bf1552737e3d635ee749b6cd71",V.callServer,void 0,V.findSourceMapURL,"addLetter"),Y=(0,V.createServerReference)("6058c5efd3b5069e72eb05e699d600f32bcb7babdd",V.callServer,void 0,V.findSourceMapURL,"deleteLetter"),Z=(0,V.createServerReference)("7061fb6a4d7aa31d33bb8b7aa72625328f2fedae39",V.callServer,void 0,V.findSourceMapURL,"updateLetter");var $=a(55075);let ee=(0,V.createServerReference)("407c56610ce78d26989e3e750ace494f851fb068b5",V.callServer,void 0,V.findSourceMapURL,"addBankAccount"),et=(0,V.createServerReference)("70be7a59e3d8329fb33710e17f399463b9c1c56b54",V.callServer,void 0,V.findSourceMapURL,"updateBankAccount"),ea=(0,V.createServerReference)("605299543100bcdffb0a848908a7b372bca1f4afcb",V.callServer,void 0,V.findSourceMapURL,"deleteBankAccount"),el=(0,V.createServerReference)("60e3c5fa73e5a0e097cb2f6df9547c40daa35c708b",V.callServer,void 0,V.findSourceMapURL,"setPrimaryBankAccount");var es=a(52619),er=a.n(es),ei=a(20063);function eo(e){if(!e)return null;if(e.startsWith("http"))return e;let t=e.startsWith("/")?e.slice(1):e;if(e.includes("supabase"))return e;if(e.startsWith("employees/")){let t=e.replace("employees/","");return"https://xaexoopjqkrzhbochbef.supabase.co/storage/v1/object/public/employees/".concat(t)}return"https://accounts.zoolspeed.com/".concat(t)}function en(e){let{employee:t,allEmployees:a,violations:E,letters:V,stats:es,monthlyData:en,bankAccounts:eb}=e,eu={general:{icon:o.A,label:"البيانات الشخصية",bg:"from-blue-600 to-indigo-600",color:"blue",light:"bg-blue-500/10",text:"text-blue-400",glow:"shadow-blue-500/20"},bank:{icon:n.A,label:"البيانات البنكية",bg:"from-emerald-600 to-teal-600",color:"emerald",light:"bg-emerald-500/10",text:"text-emerald-400",glow:"shadow-emerald-500/20"},status:{icon:d.A,label:"حالة الإقامة",bg:"from-purple-600 to-violet-600",color:"purple",light:"bg-purple-500/10",text:"text-purple-400",glow:"shadow-purple-500/20"},documents:{icon:c.A,label:"المستندات والملفات",bg:"from-indigo-600 to-blue-600",color:"indigo",light:"bg-indigo-500/10",text:"text-indigo-400",glow:"shadow-indigo-500/20"},violations:{icon:x.A,label:"المخالفات المرورية",bg:"from-red-600 to-rose-600",color:"red",light:"bg-red-500/10",text:"text-red-400",glow:"shadow-red-500/20"},stats:{icon:b.A,label:"الإحصائيات والأداء",bg:"from-slate-700 to-slate-800",color:"slate",light:"bg-slate-500/10",text:"text-slate-400",glow:"shadow-slate-500/20"},letters:{icon:u.A,label:"الخطابات والإجازات",bg:"from-rose-600 to-pink-600",color:"rose",light:"bg-rose-500/10",text:"text-rose-400",glow:"shadow-rose-500/20"}},[eh,em]=(0,s.useState)("general"),[ep,eg]=(0,s.useState)(!1),[ef,ev]=(0,s.useState)(!1),[ej,ew]=(0,s.useState)(!1),[ey,eN]=(0,s.useState)(""),[e_,ek]=(0,s.useState)(!1),[ez,eS]=(0,s.useState)(!1),eA=(0,ei.useRouter)(),eC=a.findIndex(e=>e.id===t.id);eC>0&&a[eC-1],eC<a.length-1&&a[eC+1];let eP=(0,s.useMemo)(()=>a.filter(e=>{var t;return e.name.toLowerCase().includes(ey.toLowerCase())||(null==(t=e.iqama_number)?void 0:t.includes(ey))}),[a,ey]),[eR,eH]=(0,s.useState)({iqama_number:t.iqama_number||"",identity_number:t.identity_number||"",job_title:t.job_title||"",user_code:t.user_code||"",nationality:t.nationality||"",phone:t.phone||"",email:t.email||"",vehicle_plate:t.vehicle_plate||"",birth_date:t.birth_date?(()=>{let e=new Date(t.birth_date);return isNaN(e.getTime())?"":e.toISOString().split("T")[0]})():"",passport_number:t.passport_number||"",operation_card_number:t.operation_card_number||"",basic_salary:t.basic_salary||"",housing_allowance:t.housing_allowance||""}),[eM,eL]=(0,s.useState)({bank_account:t.bank_account||"",iban:t.iban||"",bank_name:t.bank_name||""}),[eq,eT]=(0,s.useState)({violation_type:"traffic",violation_date:(0,G.GP)(new Date,"yyyy-MM-dd"),violation_amount:0,deducted_amount:0,status:"pending",violation_description:""}),[eD,eU]=(0,s.useState)({letter_type:"annual_leave",start_date:(0,G.GP)(new Date,"yyyy-MM-dd"),end_date:(0,G.GP)(new Date,"yyyy-MM-dd"),duration_days:0,violation_amount:0,letter_details:""}),[eE,eG]=(0,s.useState)(t.iqama_expiry||""),[eI,eB]=(0,s.useState)(null),[eO,eV]=(0,s.useState)(null),[eW,eF]=(0,s.useState)(!1),[eJ,eK]=(0,s.useState)(null),[eQ,eX]=(0,s.useState)({bank_name:"",account_number:"",iban:"",is_primary:!1});if((0,s.useEffect)(()=>{ev(!0)},[]),!ef)return(0,l.jsxs)("div",{className:"flex h-[calc(100vh-100px)] max-w-[94%] mx-auto animate-pulse gap-5",children:[(0,l.jsx)("div",{className:"w-80 bg-muted/50 rounded-3xl shrink-0 backdrop-blur-xl"}),(0,l.jsx)("div",{className:"flex-1 bg-muted/50 rounded-3xl backdrop-blur-xl"})]});let eY=async e=>{e.preventDefault();let a=await W(t.id,eR);a.success?(O.oR.success("تم تحديث المعلومات الشخصية"),eg(!1),eA.refresh()):O.oR.error(a.error)},eZ=async()=>{(await F(t.id,t.is_active)).success&&(O.oR.success(1===t.is_active?"تم تعيين الموظف في إجازة":"تم تفعيل الموظف"),eA.refresh())},e$=async e=>{e.preventDefault();let a=await J({employee_id:t.id,...eq});a.success?(O.oR.success("تم إضافة المخالفة بنجاح"),eT({violation_type:"traffic",violation_date:(0,G.GP)(new Date,"yyyy-MM-dd"),violation_amount:0,deducted_amount:0,status:"pending",violation_description:""}),ek(!1),eA.refresh()):O.oR.error(a.error)},e0=async e=>{if(confirm("هل أنت متأكد من حذف هذه المخالفة؟")){let a=await K(e,t.id);a.success?(O.oR.success("تم حذف المخالفة"),eA.refresh()):O.oR.error(a.error)}},e1=async e=>{if(e.preventDefault(),!eI)return;let a=await Q(eI.id,t.id,eI);a.success?(O.oR.success("تم تحديث المخالفة"),eB(null),eA.refresh()):O.oR.error(a.error)},e5=async e=>{e.preventDefault();let a=await X({employee_id:t.id,...eD});a.success?(O.oR.success("تم إضافة الخطاب بنجاح"),eU({letter_type:"annual_leave",start_date:(0,G.GP)(new Date,"yyyy-MM-dd"),end_date:(0,G.GP)(new Date,"yyyy-MM-dd"),duration_days:0,violation_amount:0,letter_details:""}),eS(!1),eA.refresh()):O.oR.error(a.error)},e2=async e=>{if(confirm("هل أنت متأكد من حذف هذا الخطاب؟")){let a=await Y(e,t.id);a.success?(O.oR.success("تم حذف الخطاب"),eA.refresh()):O.oR.error(a.error)}},e4=async e=>{if(e.preventDefault(),!eO)return;let a=await Z(eO.id,t.id,eO);a.success?(O.oR.success("تم تحديث الخطاب"),eV(null),eA.refresh()):O.oR.error(a.error)},e3=async e=>{e.preventDefault();let a=await (0,$.C)(t.id,eE);a.success?(O.oR.success("تم تحديث تاريخ انتهاء الإقامة"),eA.refresh()):O.oR.error(a.error)},e6=async e=>{e.preventDefault();let a=await ee({employee_id:t.id,...eQ});a.success?(O.oR.success("تم إضافة الحساب البنكي"),eX({bank_name:"",account_number:"",iban:"",is_primary:!1}),eF(!1),eA.refresh()):O.oR.error(a.error)},e9=async e=>{if(e.preventDefault(),!eJ)return;let a=await et(eJ.id,t.id,eJ);a.success?(O.oR.success("تم تحديث الحساب البنكي"),eK(null),eA.refresh()):O.oR.error(a.error)},e7=async e=>{if(confirm("هل أنت متأكد من حذف هذا الحساب البنكي؟")){let a=await ea(e,t.id);a.success?(O.oR.success("تم حذف الحساب البنكي"),eA.refresh()):O.oR.error(a.error)}},e8=async e=>{let a=await el(e,t.id);a.success?(O.oR.success("تم تعيين الحساب كأساسي"),eA.refresh()):O.oR.error(a.error)},te=eu[eh]||eu.general,tt={text:"غير محددة",color:"gray",days:null};if(t.iqama_expiry){let e=(0,I.c)((0,B.H)(t.iqama_expiry),new Date);tt=e<0?{text:"منتهية منذ ".concat(Math.abs(e)," يوم"),color:"red",days:e}:e<=30?{text:"تنتهي خلال ".concat(e," يوم"),color:"orange",days:e}:{text:"سارية (".concat(e," يوم متبقي)"),color:"green",days:e}}return(0,l.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex h-[calc(100vh-100px)] max-w-[94%] mx-auto gap-5 overflow-hidden",children:[(0,l.jsxs)("div",{className:"w-[320px] shrink-0 flex flex-col gap-4",children:[(0,l.jsxs)(r.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},className:"relative overflow-hidden rounded-3xl",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 to-indigo-700 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"}),(0,l.jsx)("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -mr-20 -mt-20 blur-3xl"}),(0,l.jsxs)("div",{className:"relative z-10 p-6",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center text-center mb-5",children:[(0,l.jsxs)(r.P.div,{whileHover:{scale:1.05},className:"relative mb-4",children:[(0,l.jsx)("div",{className:"h-32 w-32 rounded-3xl border-4 border-white/20 overflow-hidden bg-white/10 shadow-2xl backdrop-blur-md",children:eo(t.personal_photo)?(0,l.jsx)("img",{src:eo(t.personal_photo),alt:t.name,className:"h-full w-full object-cover"}):(0,l.jsx)("div",{className:"h-full w-full flex items-center justify-center text-white/50",children:(0,l.jsx)(o.A,{size:48})})}),(0,l.jsx)("div",{className:"absolute bottom-1 right-1 h-6 w-6 rounded-full border-4 border-indigo-700 dark:border-slate-900 ".concat(1===t.is_active?"bg-emerald-400":"bg-orange-400"," shadow-lg animate-pulse")})]}),(0,l.jsx)("h1",{className:"text-xl font-black text-white mb-1 leading-tight",children:t.name}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-xs font-bold text-white/60 bg-white/10 px-3 py-1 rounded-full",children:["#",t.user_code||"---"]}),(0,l.jsx)("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-full bg-white/20 text-white",children:1===t.is_active?"نشط":"إجازة"})]})]}),(0,l.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 border border-white/10 hover:border-white/20 transition-all",children:[(0,l.jsxs)("span",{className:"text-white/60 flex items-center gap-2",children:[(0,l.jsx)(h.A,{size:14,className:"text-white/80"})," الباقة"]}),(0,l.jsx)("span",{className:"text-white font-bold truncate max-w-[140px]",children:t.group_name})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 border border-white/10 hover:border-white/20 transition-all",children:[(0,l.jsxs)("span",{className:"text-white/60 flex items-center gap-2",children:[(0,l.jsx)(m.A,{size:14,className:"text-white/80"})," الإقامة"]}),(0,l.jsx)("span",{className:"text-white font-bold font-mono",children:t.iqama_number||"---"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 border border-white/10 hover:border-white/20 transition-all",children:[(0,l.jsxs)("span",{className:"text-white/60 flex items-center gap-2",children:[(0,l.jsx)(p.A,{size:14,className:"text-white/80"})," الجنسية"]}),(0,l.jsx)("span",{className:"text-white font-bold",children:t.nationality||"---"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 mt-5",children:[(0,l.jsx)(er(),{href:"/hr/packages/".concat(t.package_id),className:"flex-1",children:(0,l.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white px-4 py-3 rounded-xl text-xs font-black flex items-center justify-center gap-2 transition-all shadow-lg shadow-blue-500/20",children:[(0,l.jsx)(g.A,{size:14}),"عرض الباقة"]})}),(0,l.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:eZ,className:"flex-1 px-4 py-3 rounded-xl text-xs font-black flex items-center justify-center gap-2 transition-all shadow-lg ".concat(1===t.is_active?"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-400 hover:to-amber-400 text-white shadow-orange-500/20":"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-400 hover:to-teal-400 text-white shadow-emerald-500/20"),children:[1===t.is_active?(0,l.jsx)(f.A,{size:14}):(0,l.jsx)(v.A,{size:14}),1===t.is_active?"إجازة":"تفعيل"]})]})]})]}),(0,l.jsxs)(r.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white/70 dark:bg-white/5 backdrop-blur-xl rounded-2xl p-4 border border-slate-200 dark:border-white/10 flex-1 overflow-auto shadow-xl shadow-slate-200/50 dark:shadow-none",children:[(0,l.jsxs)("p",{className:"text-xs font-black text-slate-500 dark:text-white/60 mb-3 flex items-center gap-2",children:[(0,l.jsx)(j.A,{size:14,className:"text-blue-500 dark:text-yellow-400"}),"الأقسام والتبويبات"]}),(0,l.jsx)("div",{className:"space-y-2",children:Object.entries(eu).map((e,t)=>{let[a,s]=e;return(0,l.jsxs)(r.P.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},whileHover:{scale:1.02,x:3},whileTap:{scale:.98},onClick:()=>em(a),className:"w-full flex items-center gap-4 px-5 py-4 rounded-xl transition-all text-right ".concat(eh===a?"bg-gradient-to-r ".concat(s.bg," text-white shadow-lg ").concat(s.glow):"bg-slate-100/50 dark:bg-white/5 hover:bg-slate-200/50 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white border border-slate-200/50 dark:border-white/5 hover:border-slate-300 dark:hover:border-white/10"),children:[(0,l.jsx)("div",{className:"p-2.5 rounded-xl ".concat(eh===a?"bg-white/20":s.light),children:(0,l.jsx)(s.icon,{size:18,className:eh===a?"text-white":s.text})}),(0,l.jsx)("span",{className:"text-sm font-black flex-1",children:s.label}),"status"===a&&(0,l.jsx)("span",{className:"text-[9px] font-black px-2 py-1 rounded-full ".concat("red"===tt.color?"bg-red-500/20 text-red-400":"orange"===tt.color?"bg-orange-500/20 text-orange-400":"bg-emerald-500/20 text-emerald-400"),children:"green"===tt.color?"سارية":"orange"===tt.color?"على وشك":"منتهية"}),eh===a&&(0,l.jsx)(r.P.div,{layoutId:"activeIndicator",className:"h-2.5 w-2.5 rounded-full bg-white shadow-lg shadow-white/50"})]},a)})})]})]}),(0,l.jsxs)(r.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{delay:.2},className:"flex-1 bg-white/70 dark:bg-white/5 backdrop-blur-xl rounded-3xl border border-slate-200 dark:border-white/10 overflow-hidden flex flex-col min-w-0 shadow-2xl shadow-slate-200/50 dark:shadow-none",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r ".concat(te.bg," px-6 py-6 flex items-center justify-between shrink-0"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 text-white",children:[(0,l.jsx)("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm shadow-inner",children:(0,l.jsx)(te.icon,{size:24})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-black tracking-tight",children:te.label}),(0,l.jsx)("p",{className:"text-xs font-bold opacity-80",children:"عرض وتعديل كافة التفاصيل والمستندات"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:["general"===eh&&(0,l.jsxs)(r.P.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>eg(!ep),className:"relative bg-white/95 hover:bg-white text-slate-900 px-6 py-3 rounded-xl text-xs font-black flex items-center gap-2 transition-all shadow-xl shadow-black/10 group overflow-visible",children:[(0,l.jsx)("span",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 opacity-0 group-hover:opacity-100 blur-md transition-opacity duration-500 -z-10 animate-pulse"}),(0,l.jsx)("span",{className:"absolute -inset-1 rounded-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-75 blur-sm -z-10 animate-[spin_3s_linear_infinite]",style:{background:"conic-gradient(from var(--angle, 0deg), #3b82f6, #8b5cf6, #ec4899, #3b82f6)"}}),(0,l.jsx)(w.A,{size:15,className:"relative z-10"}),(0,l.jsx)("span",{className:"relative z-10",children:ep?"إلغاء التعديل":"تعديل البيانات"})]}),"violations"===eh&&(0,l.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ek(!e_),className:"relative bg-white/90 hover:bg-white text-gray-900 px-5 py-2.5 rounded-xl text-xs font-black flex items-center gap-2 transition-all shadow-lg group overflow-visible",children:[(0,l.jsx)("span",{className:"absolute -inset-0.5 rounded-xl opacity-75 blur-sm -z-10",style:{background:"linear-gradient(90deg, #ef4444, #f97316, #ef4444)",backgroundSize:"200% 100%",animation:"shimmer 2s linear infinite"}}),(0,l.jsx)(y.A,{size:14,className:"relative z-10"}),(0,l.jsx)("span",{className:"relative z-10",children:e_?"إلغاء":"إضافة مخالفة"})]}),"letters"===eh&&(0,l.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>eS(!ez),className:"relative bg-white/90 hover:bg-white text-gray-900 px-5 py-2.5 rounded-xl text-xs font-black flex items-center gap-2 transition-all shadow-lg group overflow-visible",children:[(0,l.jsx)("span",{className:"absolute -inset-0.5 rounded-xl opacity-75 blur-sm -z-10",style:{background:"linear-gradient(90deg, #ec4899, #f472b6, #ec4899)",backgroundSize:"200% 100%",animation:"shimmer 2s linear infinite"}}),(0,l.jsx)(y.A,{size:14,className:"relative z-10"}),(0,l.jsx)("span",{className:"relative z-10",children:ez?"إلغاء":"إضافة خطاب"})]}),"bank"===eh&&(0,l.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>eF(!eW),className:"relative bg-white/90 hover:bg-white text-gray-900 px-5 py-2.5 rounded-xl text-xs font-black flex items-center gap-2 transition-all shadow-lg group overflow-visible",children:[(0,l.jsx)("span",{className:"absolute -inset-0.5 rounded-xl opacity-75 blur-sm -z-10",style:{background:"linear-gradient(90deg, #10b981, #34d399, #10b981)",backgroundSize:"200% 100%",animation:"shimmer 2s linear infinite"}}),(0,l.jsx)(y.A,{size:14,className:"relative z-10"}),(0,l.jsx)("span",{className:"relative z-10",children:eW?"إلغاء":"إضافة حساب"})]})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-auto p-6",children:(0,l.jsx)(i.N,{mode:"wait",children:(0,l.jsxs)(r.P.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.2},className:"h-full",children:["general"===eh&&(0,l.jsxs)("form",{onSubmit:eY,children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[(0,l.jsx)(ed,{label:"رقم الإقامة",value:eR.iqama_number,onChange:e=>eH({...eR,iqama_number:e}),editable:ep,icon:(0,l.jsx)(m.A,{size:14})}),(0,l.jsx)(ed,{label:"رقم الهوية",value:eR.identity_number,onChange:e=>eH({...eR,identity_number:e}),editable:ep,icon:(0,l.jsx)(m.A,{size:14})}),(0,l.jsx)(ed,{label:"رقم المستخدم",value:eR.user_code,onChange:e=>eH({...eR,user_code:e}),editable:ep,icon:(0,l.jsx)(N.A,{size:14})}),(0,l.jsx)(ed,{label:"المسمى الوظيفي",value:eR.job_title,onChange:e=>eH({...eR,job_title:e}),editable:ep,icon:(0,l.jsx)(h.A,{size:14})}),(0,l.jsx)(ed,{label:"الجنسية",value:eR.nationality,onChange:e=>eH({...eR,nationality:e}),editable:ep,icon:(0,l.jsx)(p.A,{size:14})}),(0,l.jsx)(ed,{label:"رقم الهاتف",value:eR.phone,onChange:e=>eH({...eR,phone:e}),editable:ep,icon:(0,l.jsx)(_.A,{size:14})}),(0,l.jsx)(ed,{label:"البريد الإلكتروني",value:eR.email,onChange:e=>eH({...eR,email:e}),editable:ep,type:"email",icon:(0,l.jsx)(u.A,{size:14})}),(0,l.jsx)(ed,{label:"لوحة المركبة",value:eR.vehicle_plate,onChange:e=>eH({...eR,vehicle_plate:e}),editable:ep,icon:(0,l.jsx)(k.A,{size:14})}),(0,l.jsx)(ed,{label:"تاريخ الميلاد",value:eR.birth_date,onChange:e=>eH({...eR,birth_date:e}),editable:ep,type:"date",icon:(0,l.jsx)(z.A,{size:14})}),(0,l.jsx)(ed,{label:"رقم الجواز",value:eR.passport_number,onChange:e=>eH({...eR,passport_number:e}),editable:ep,icon:(0,l.jsx)(c.A,{size:14})}),(0,l.jsx)(ed,{label:"كرت التشغيل",value:eR.operation_card_number,onChange:e=>eH({...eR,operation_card_number:e}),editable:ep,icon:(0,l.jsx)(m.A,{size:14})}),(0,l.jsx)(ed,{label:"الراتب الأساسي",value:eR.basic_salary,onChange:e=>eH({...eR,basic_salary:e}),editable:ep,icon:(0,l.jsx)(S.A,{size:14})}),(0,l.jsx)(ed,{label:"بدل السكن",value:eR.housing_allowance,onChange:e=>eH({...eR,housing_allowance:e}),editable:ep,icon:(0,l.jsx)(A.A,{size:14})})]}),ep&&(0,l.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 flex justify-center",children:(0,l.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white px-10 py-3 rounded-xl font-black text-sm flex items-center gap-3 shadow-lg shadow-blue-500/30",children:[(0,l.jsx)(C.A,{size:18}),"حفظ جميع التغييرات"]})})]}),"bank"===eh&&(0,l.jsxs)("div",{className:"space-y-5",children:[(0,l.jsx)(i.N,{children:(eW||eJ)&&(0,l.jsx)(r.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-slate-100 backdrop-blur-xl p-5 rounded-2xl border border-slate-200 overflow-hidden",children:(0,l.jsxs)("form",{onSubmit:eJ?e9:e6,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"اسم البنك",value:eJ?eJ.bank_name:eQ.bank_name,onChange:e=>eJ?eK({...eJ,bank_name:e.target.value}):eX({...eQ,bank_name:e.target.value}),className:"bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 placeholder-slate-400 focus:border-emerald-500 outline-none",required:!0}),(0,l.jsx)("input",{type:"text",placeholder:"رقم الحساب",value:eJ?eJ.account_number:eQ.account_number,onChange:e=>eJ?eK({...eJ,account_number:e.target.value}):eX({...eQ,account_number:e.target.value}),className:"bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 placeholder-slate-400 focus:border-emerald-500 outline-none"}),(0,l.jsx)("input",{type:"text",placeholder:"رقم الآيبان",value:eJ?eJ.iban:eQ.iban,onChange:e=>eJ?eK({...eJ,iban:e.target.value}):eX({...eQ,iban:e.target.value}),className:"bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 placeholder-slate-400 focus:border-emerald-500 outline-none"}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm font-black text-slate-700 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:eJ?eJ.is_primary:eQ.is_primary,onChange:e=>eJ?eK({...eJ,is_primary:e.target.checked}):eX({...eQ,is_primary:e.target.checked}),className:"w-4 h-4 rounded accent-emerald-500"}),"أساسي"]}),(0,l.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3 rounded-xl text-sm font-black shadow-lg shadow-emerald-500/30",children:eJ?"تحديث":"إضافة"}),(0,l.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:()=>{eK(null),eF(!1)},className:"px-4 bg-slate-200 rounded-xl text-sm font-bold text-slate-700 hover:bg-slate-300",children:"✕"})]})]})})}),eb.length>0?(0,l.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:eb.map((e,t)=>(0,l.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{scale:1.01},className:"p-5 rounded-2xl backdrop-blur-xl border transition-all group relative overflow-hidden ".concat(e.is_primary?"bg-emerald-50 border-emerald-500/30":"bg-slate-50 border-slate-200 hover:border-emerald-500/30"),children:[e.is_primary&&(0,l.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full bg-gradient-to-b from-emerald-500 to-teal-500 rounded-r-xl"}),(0,l.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-12 w-12 rounded-xl flex items-center justify-center ".concat(e.is_primary?"bg-emerald-500/20 text-emerald-600":"bg-slate-200 text-slate-600"),children:(0,l.jsx)(n.A,{size:22})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-base font-black text-slate-900",children:e.bank_name||"بدون اسم"}),e.is_primary&&(0,l.jsx)("span",{className:"text-[10px] font-black px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-600",children:"الحساب الأساسي"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[!e.is_primary&&(0,l.jsx)(r.P.button,{whileHover:{scale:1.1},onClick:()=>e8(e.id),className:"p-2 text-emerald-600 hover:bg-emerald-500/20 rounded-lg",title:"تعيين كأساسي",children:(0,l.jsx)(P.A,{size:14})}),(0,l.jsx)(r.P.button,{whileHover:{scale:1.1},onClick:()=>eK(e),className:"p-2 text-blue-600 hover:bg-blue-500/20 rounded-lg",children:(0,l.jsx)(w.A,{size:14})}),(0,l.jsx)(r.P.button,{whileHover:{scale:1.1},onClick:()=>e7(e.id),className:"p-2 text-red-600 hover:bg-red-500/20 rounded-lg",children:(0,l.jsx)(R.A,{size:14})})]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between bg-slate-100 rounded-xl px-4 py-3",children:[(0,l.jsxs)("span",{className:"text-xs font-bold text-slate-600 flex items-center gap-2",children:[(0,l.jsx)(N.A,{size:12})," رقم الحساب"]}),(0,l.jsx)("span",{className:"text-sm font-black text-slate-900 font-mono",children:e.account_number||"---"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between bg-slate-100 rounded-xl px-4 py-3",children:[(0,l.jsxs)("span",{className:"text-xs font-bold text-slate-600 flex items-center gap-2",children:[(0,l.jsx)(S.A,{size:12})," رقم الآيبان"]}),(0,l.jsx)("span",{className:"text-sm font-black text-slate-900 font-mono",children:e.iban||"---"})]})]})]},e.id))}):(0,l.jsxs)("div",{className:"py-16 text-center text-slate-600 font-black bg-slate-100 backdrop-blur-xl rounded-2xl border-2 border-dashed border-slate-300",children:[(0,l.jsx)(n.A,{size:40,className:"mx-auto mb-3 opacity-50"}),"لا توجد حسابات بنكية مسجلة",(0,l.jsx)("p",{className:"text-sm mt-2 text-slate-500",children:'اضغط على "إضافة حساب" لإضافة حساب بنكي جديد'})]})]}),"documents"===eh&&(0,l.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:[(0,l.jsx)(ec,{label:"الصورة الشخصية",path:t.personal_photo}),(0,l.jsx)(ec,{label:"صورة الإقامة",path:t.iqama_file}),(0,l.jsx)(ec,{label:"رخصة القيادة",path:t.license_file}),(0,l.jsx)(ec,{label:"استمارة المركبة",path:t.vehicle_file}),(0,l.jsx)(ec,{label:"تصريح أجير",path:t.agir_permit_file}),(0,l.jsx)(ec,{label:"عقد العمل",path:t.work_contract_file}),(0,l.jsx)(ec,{label:"بطاقة التشغيل",path:t.vehicle_operation_card}),(0,l.jsx)(ec,{label:"بطاقة السائق",path:t.driver_card})]}),"status"===eh&&(0,l.jsxs)("div",{className:"space-y-5",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[(0,l.jsxs)(r.P.div,{whileHover:{scale:1.02},className:"p-6 rounded-2xl border backdrop-blur-xl ".concat("red"===tt.color?"bg-red-500/10 border-red-500/20":"orange"===tt.color?"bg-orange-500/10 border-orange-500/20":"bg-emerald-500/10 border-emerald-500/20"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,l.jsx)("div",{className:"p-3 rounded-xl ".concat("red"===tt.color?"bg-red-500/20 text-red-400":"orange"===tt.color?"bg-orange-500/20 text-orange-400":"bg-emerald-500/20 text-emerald-400"),children:(0,l.jsx)(H.A,{size:22})}),(0,l.jsx)("span",{className:"text-xs font-black text-slate-700 uppercase",children:"الأيام المتبقية"})]}),(0,l.jsx)("div",{className:"text-5xl font-black text-center ".concat("red"===tt.color?"text-red-400":"orange"===tt.color?"text-orange-400":"text-emerald-400"),children:null!==tt.days?Math.abs(tt.days):"--"}),(0,l.jsx)("p",{className:"text-sm font-bold text-center mt-3 ".concat("red"===tt.color?"text-red-400/70":"orange"===tt.color?"text-orange-400/70":"text-emerald-400/70"),children:tt.text})]}),(0,l.jsxs)(r.P.div,{whileHover:{scale:1.02},className:"p-6 rounded-2xl border border-blue-500/20 bg-blue-500/10 backdrop-blur-xl",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,l.jsx)("div",{className:"p-3 rounded-xl bg-blue-500/20 text-blue-400",children:(0,l.jsx)(d.A,{size:22})}),(0,l.jsx)("span",{className:"text-xs font-black text-slate-700 uppercase",children:"حالة الصلاحية"})]}),(0,l.jsx)("div",{className:"text-2xl font-black text-blue-400 text-center",children:null!==tt.days&&tt.days<0?"منتهية":"سارية"}),(0,l.jsx)("div",{className:"flex justify-center mt-3",children:(0,l.jsxs)("span",{className:"flex items-center gap-2 text-xs font-bold ".concat(null!==tt.days&&tt.days<0?"text-red-400":"text-emerald-400"),children:[(0,l.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(null!==tt.days&&tt.days<0?"bg-red-500":"bg-emerald-500"," animate-pulse")}),"مراقب تلقائياً"]})})]}),(0,l.jsxs)(r.P.div,{whileHover:{scale:1.02},className:"p-6 rounded-2xl border border-purple-500/20 bg-purple-500/10 backdrop-blur-xl",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,l.jsx)("div",{className:"p-3 rounded-xl bg-purple-500/20 text-purple-400",children:(0,l.jsx)(M.A,{size:22})}),(0,l.jsx)("span",{className:"text-xs font-black text-slate-700 uppercase",children:"تحديث التاريخ"})]}),(0,l.jsxs)("form",{onSubmit:e3,className:"space-y-3",children:[(0,l.jsx)("input",{type:"date",value:eE,onChange:e=>eG(e.target.value),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 focus:border-purple-500 outline-none transition-all",required:!0}),(0,l.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-violet-600 text-white py-3 rounded-xl text-sm font-black flex items-center justify-center gap-2 shadow-lg shadow-purple-500/30",children:[(0,l.jsx)(C.A,{size:16}),"حفظ التاريخ الجديد"]})]})]})]}),(0,l.jsxs)(r.P.div,{whileHover:{scale:1.01},className:"bg-gradient-to-r from-slate-800 to-slate-900 p-6 rounded-2xl text-white flex items-center gap-6 border border-white/10",children:[(0,l.jsx)("div",{className:"bg-yellow-500/20 p-4 rounded-xl text-yellow-400",children:(0,l.jsx)(L.A,{size:28})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h4",{className:"text-base font-black mb-1",children:"نظام مراقبة الإقامة الذكي"}),(0,l.jsx)("p",{className:"text-sm text-white/50",children:"يتم إرسال تنبيهات قبل 30 يوماً من انتهاء الصلاحية عبر البريد والتطبيق"})]}),(0,l.jsxs)("div",{className:"bg-white/5 px-5 py-3 rounded-xl text-center border border-white/10",children:[(0,l.jsx)("span",{className:"text-2xl font-black text-yellow-400",children:"30"}),(0,l.jsx)("p",{className:"text-[10px] text-white/40 font-bold",children:"يوم تنبيه"})]})]})]}),"violations"===eh&&(0,l.jsxs)("div",{className:"space-y-5",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsx)(ex,{label:"إجمالي المخالفات",value:E.reduce((e,t)=>e+Number(t.violation_amount),0),color:"red"}),(0,l.jsx)(ex,{label:"تم خصمه",value:E.reduce((e,t)=>e+Number(t.deducted_amount),0),color:"green"}),(0,l.jsx)(ex,{label:"المتبقي",value:E.reduce((e,t)=>e+Number(t.remaining_amount),0),color:"blue"})]}),(0,l.jsx)(i.N,{children:(e_||eI)&&(0,l.jsxs)(r.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-slate-100 backdrop-blur-xl p-5 rounded-2xl border border-slate-200 overflow-hidden",children:[(0,l.jsxs)("h3",{className:"text-lg font-black text-slate-900 mb-4 flex items-center gap-2",children:[(0,l.jsx)(q.A,{size:20,className:"text-red-500"}),eI?"تعديل مخالفة":"إضافة مخالفة جديدة"]}),(0,l.jsxs)("form",{onSubmit:eI?e1:e$,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"نوع المخالفة"}),(0,l.jsxs)("select",{value:eI?eI.violation_type:eq.violation_type,onChange:e=>eI?eB({...eI,violation_type:e.target.value}):eT({...eq,violation_type:e.target.value}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 focus:border-red-500 outline-none",children:[(0,l.jsx)("option",{value:"traffic",className:"bg-white",children:"مرورية"}),(0,l.jsx)("option",{value:"general",className:"bg-white",children:"عامة"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"تاريخ المخالفة"}),(0,l.jsx)("input",{type:"date",value:eI?eI.violation_date:eq.violation_date,onChange:e=>eI?eB({...eI,violation_date:e.target.value}):eT({...eq,violation_date:e.target.value}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 focus:border-red-500 outline-none",required:!0})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"مبلغ المخالفة (ر.س)"}),(0,l.jsx)("input",{type:"number",placeholder:"أدخل مبلغ المخالفة الكامل",value:eI?eI.violation_amount:eq.violation_amount,onChange:e=>eI?eB({...eI,violation_amount:Number(e.target.value)}):eT({...eq,violation_amount:Number(e.target.value)}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 placeholder-slate-400 focus:border-red-500 outline-none",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"المبلغ المخصوم من الراتب (ر.س)"}),(0,l.jsx)("input",{type:"number",placeholder:"المبلغ الذي سيخصم من الراتب",value:eI?eI.deducted_amount:eq.deducted_amount,onChange:e=>eI?eB({...eI,deducted_amount:Number(e.target.value)}):eT({...eq,deducted_amount:Number(e.target.value)}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 placeholder-slate-400 focus:border-red-500 outline-none",required:!0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"وصف المخالفة"}),(0,l.jsx)("input",{type:"text",placeholder:"وصف تفصيلي للمخالفة (اختياري)",value:eI?eI.violation_description:eq.violation_description,onChange:e=>eI?eB({...eI,violation_description:e.target.value}):eT({...eq,violation_description:e.target.value}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 placeholder-slate-400 focus:border-red-500 outline-none"})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,l.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"flex-1 bg-gradient-to-r from-red-600 to-rose-600 text-white py-3 rounded-xl text-sm font-black shadow-lg shadow-red-500/30",children:eI?"تحديث المخالفة":"إضافة المخالفة"}),(0,l.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:()=>{eB(null),ek(!1)},className:"px-6 bg-slate-200 rounded-xl text-sm font-bold text-slate-700 hover:bg-slate-300",children:"إلغاء"})]})]})]})}),(0,l.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-slate-50 backdrop-blur-xl",children:(0,l.jsxs)("table",{className:"w-full text-right text-sm",children:[(0,l.jsx)("thead",{className:"bg-slate-100 border-b border-slate-200",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"التاريخ"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"النوع"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"المبلغ"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"المخصوم"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"المتبقي"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"الوصف"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase text-center",children:"إجراءات"})]})}),(0,l.jsxs)("tbody",{className:"divide-y divide-slate-200",children:[E.map((e,t)=>(0,l.jsxs)(r.P.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"hover:bg-slate-100 transition-all",children:[(0,l.jsx)("td",{className:"px-5 py-4 font-bold text-slate-700",children:e.violation_date}),(0,l.jsx)("td",{className:"px-5 py-4",children:(0,l.jsx)("span",{className:"px-3 py-1 rounded-lg text-xs font-black ".concat("traffic"===e.violation_type?"bg-red-500/20 text-red-600":"bg-orange-500/20 text-orange-600"),children:"traffic"===e.violation_type?"مرورية":"عامة"})}),(0,l.jsxs)("td",{className:"px-5 py-4 font-black text-red-600",children:[Number(e.violation_amount).toLocaleString()," ر.س"]}),(0,l.jsxs)("td",{className:"px-5 py-4 font-black text-emerald-600",children:[Number(e.deducted_amount).toLocaleString()," ر.س"]}),(0,l.jsxs)("td",{className:"px-5 py-4 font-black text-blue-600",children:[Number(e.remaining_amount).toLocaleString()," ر.س"]}),(0,l.jsx)("td",{className:"px-5 py-4 text-xs text-slate-500 font-bold max-w-[200px] truncate",title:e.violation_description,children:e.violation_description||"-"}),(0,l.jsx)("td",{className:"px-5 py-4",children:(0,l.jsx)("div",{className:"flex justify-center gap-2",children:"traffic_expense"!==e.violation_type&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.P.button,{whileHover:{scale:1.1},onClick:()=>eB(e),className:"p-2 text-blue-500 hover:bg-blue-500/20 rounded-lg",children:(0,l.jsx)(w.A,{size:14})}),(0,l.jsx)(r.P.button,{whileHover:{scale:1.1},onClick:()=>e0(e.id),className:"p-2 text-red-500 hover:bg-red-500/20 rounded-lg",children:(0,l.jsx)(R.A,{size:14})})]})})})]},e.id)),0===E.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:7,className:"px-5 py-12 text-center text-slate-500 font-black",children:"لا توجد مخالفات مسجلة"})})]})]})})]}),"stats"===eh&&(0,l.jsxs)("div",{className:"space-y-5",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsx)(ex,{label:"إجمالي الطلبات",value:es.total_orders,color:"blue"}),(0,l.jsx)(ex,{label:"إجمالي الرواتب",value:es.total_salary,color:"green",unit:"ر.س"}),(0,l.jsx)(ex,{label:"متوسط الطلبات",value:Math.round(es.avg_orders),color:"purple"}),(0,l.jsx)(ex,{label:"عدد الشهور",value:es.total_months,color:"orange"})]}),(0,l.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-slate-50 backdrop-blur-xl",children:(0,l.jsxs)("table",{className:"w-full text-right text-sm",children:[(0,l.jsx)("thead",{className:"bg-slate-100 border-b border-slate-200",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"الشهر"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"الطلبات"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"التارجت"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"البونص"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"الخصومات"}),(0,l.jsx)("th",{className:"px-5 py-4 text-xs font-black text-slate-700 uppercase",children:"صافي الراتب"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-slate-200",children:en.map((e,t)=>(0,l.jsxs)(r.P.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"hover:bg-slate-100",children:[(0,l.jsx)("td",{className:"px-5 py-4 font-black text-slate-900",children:e.payroll_month}),(0,l.jsx)("td",{className:"px-5 py-4 font-black text-blue-600",children:e.successful_orders}),(0,l.jsx)("td",{className:"px-5 py-4 font-bold text-slate-600",children:e.target}),(0,l.jsxs)("td",{className:"px-5 py-4 font-black text-emerald-600",children:["+",e.bonus]}),(0,l.jsxs)("td",{className:"px-5 py-4 font-black text-red-600",children:["-",e.total_deduction]}),(0,l.jsxs)("td",{className:"px-5 py-4 font-black text-slate-900 bg-slate-100",children:[Number(e.net_salary).toLocaleString()," ر.س"]})]},t))})]})})]}),"letters"===eh&&(0,l.jsxs)("div",{className:"space-y-5",children:[(0,l.jsx)(i.N,{children:(ez||eO)&&(0,l.jsxs)(r.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-slate-100 backdrop-blur-xl p-5 rounded-2xl border border-slate-200 overflow-hidden",children:[(0,l.jsxs)("h3",{className:"text-lg font-black text-slate-900 mb-4 flex items-center gap-2",children:[(0,l.jsx)(u.A,{size:20,className:"text-rose-500"}),eO?"تعديل خطاب / إجازة":"إضافة خطاب / إجازة جديدة"]}),(0,l.jsxs)("form",{onSubmit:eO?e4:e5,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"نوع الخطاب / الإجازة"}),(0,l.jsxs)("select",{value:eO?eO.letter_type:eD.letter_type,onChange:e=>eO?eV({...eO,letter_type:e.target.value}):eU({...eD,letter_type:e.target.value}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 focus:border-rose-500 outline-none",children:[(0,l.jsx)("option",{value:"annual_leave",className:"bg-white",children:"إجازة سنوية"}),(0,l.jsx)("option",{value:"sick_leave",className:"bg-white",children:"إجازة مرضية"}),(0,l.jsx)("option",{value:"personal_leave",className:"bg-white",children:"إجازة شخصية"}),(0,l.jsx)("option",{value:"absence",className:"bg-white",children:"غياب"}),(0,l.jsx)("option",{value:"other",className:"bg-white",children:"أخرى"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"عدد الأيام"}),(0,l.jsx)("input",{type:"number",placeholder:"أدخل عدد أيام الإجازة",value:eO?eO.duration_days:eD.duration_days,onChange:e=>eO?eV({...eO,duration_days:Number(e.target.value)}):eU({...eD,duration_days:Number(e.target.value)}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 placeholder-slate-400 focus:border-rose-500 outline-none",required:!0})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"تاريخ البداية"}),(0,l.jsx)("input",{type:"date",value:eO?eO.start_date:eD.start_date,onChange:e=>eO?eV({...eO,start_date:e.target.value}):eU({...eD,start_date:e.target.value}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 focus:border-rose-500 outline-none",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"تاريخ النهاية"}),(0,l.jsx)("input",{type:"date",value:eO?eO.end_date:eD.end_date,onChange:e=>eO?eV({...eO,end_date:e.target.value}):eU({...eD,end_date:e.target.value}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 focus:border-rose-500 outline-none",required:!0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"مبلغ الخصم / المخالفة (ر.س) - اختياري"}),(0,l.jsx)("input",{type:"number",placeholder:"المبلغ الذي سيخصم بسبب هذا الخطاب (إن وجد)",value:eO?eO.violation_amount:eD.violation_amount,onChange:e=>eO?eV({...eO,violation_amount:Number(e.target.value)}):eU({...eD,violation_amount:Number(e.target.value)}),className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 placeholder-slate-400 focus:border-rose-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-black text-slate-700 mb-2",children:"التفاصيل والملاحظات"}),(0,l.jsx)("textarea",{placeholder:"أدخل تفاصيل إضافية أو ملاحظات (اختياري)",value:eO?eO.letter_details:eD.letter_details,onChange:e=>eO?eV({...eO,letter_details:e.target.value}):eU({...eD,letter_details:e.target.value}),rows:2,className:"w-full bg-white border border-slate-300 rounded-xl py-3 px-4 text-sm font-bold text-slate-900 placeholder-slate-400 focus:border-rose-500 outline-none"})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,l.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"flex-1 bg-gradient-to-r from-rose-600 to-pink-600 text-white py-3 rounded-xl text-sm font-black shadow-lg shadow-rose-500/30",children:eO?"تحديث الخطاب":"إضافة الخطاب"}),(0,l.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:()=>{eV(null),eS(!1)},className:"px-6 bg-slate-200 rounded-xl text-sm font-bold text-slate-700 hover:bg-slate-300",children:"إلغاء"})]})]})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[V.map((e,t)=>(0,l.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{scale:1.01},className:"p-5 rounded-2xl bg-slate-50 backdrop-blur-xl border border-slate-200 hover:border-rose-500/30 transition-all group relative overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full bg-gradient-to-b from-rose-500 to-pink-500 rounded-r-xl"}),(0,l.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-10 w-10 rounded-xl bg-rose-500/20 flex items-center justify-center text-rose-500",children:(0,l.jsx)(u.A,{size:18})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-base font-black text-slate-900",children:"annual_leave"===e.letter_type?"إجازة سنوية":"sick_leave"===e.letter_type?"إجازة مرضية":"personal_leave"===e.letter_type?"إجازة شخصية":"absence"===e.letter_type?"غياب":"أخرى"}),(0,l.jsx)("span",{className:"text-[11px] font-bold text-slate-500",children:e.created_at})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(r.P.button,{whileHover:{scale:1.1},onClick:()=>eV(e),className:"p-2 text-blue-500 hover:bg-blue-500/20 rounded-lg",children:(0,l.jsx)(w.A,{size:14})}),(0,l.jsx)(r.P.button,{whileHover:{scale:1.1},onClick:()=>e2(e.id),className:"p-2 text-red-500 hover:bg-red-500/20 rounded-lg",children:(0,l.jsx)(R.A,{size:14})})]})]}),e.letter_details&&(0,l.jsx)("p",{className:"text-xs font-bold text-slate-600 mb-3 bg-slate-100 p-3 rounded-xl",children:e.letter_details}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,l.jsxs)("span",{className:"flex items-center gap-2 text-slate-600",children:[(0,l.jsx)(z.A,{size:14,className:"text-rose-500"})," ",e.start_date," - ",e.end_date," (",e.duration_days," أيام)"]}),e.violation_amount>0&&(0,l.jsxs)("span",{className:"text-rose-600 font-bold bg-rose-500/10 px-3 py-1 rounded-lg",children:["مخالفة: ",Number(e.violation_amount).toLocaleString()," ر.س"]})]})]},e.id)),0===V.length&&(0,l.jsxs)("div",{className:"col-span-full py-16 text-center text-slate-600 font-black bg-slate-100 backdrop-blur-xl rounded-2xl border-2 border-dashed border-slate-300",children:[(0,l.jsx)(u.A,{size:40,className:"mx-auto mb-3 opacity-50"}),"لا يوجد خطابات مسجلة"]})]})]})]},eh)})})]}),(0,l.jsx)(i.N,{children:ej&&(0,l.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,l.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>ew(!1),className:"absolute inset-0 bg-black/70 backdrop-blur-md"}),(0,l.jsxs)(r.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-xl bg-slate-900 rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[75vh] border border-white/10",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 flex items-center justify-between shrink-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 text-white",children:[(0,l.jsx)(T.A,{size:20}),(0,l.jsxs)("span",{className:"text-base font-black",children:["قائمة الموظفين (",a.length,")"]})]}),(0,l.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>ew(!1),className:"text-white/60 hover:text-white bg-white/10 p-2 rounded-lg",children:(0,l.jsx)(D.A,{size:18})})]}),(0,l.jsx)("div",{className:"p-4 border-b border-white/10",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(U.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/40",size:16}),(0,l.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو رقم الإقامة...",value:ey,onChange:e=>eN(e.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl py-3 pr-11 pl-4 text-sm font-bold text-white placeholder-white/30 focus:border-blue-400 outline-none"})]})}),(0,l.jsx)("div",{className:"flex-1 overflow-auto p-3 space-y-2",children:eP.map((e,a)=>(0,l.jsx)(er(),{href:"/hr/employees/".concat(e.id),onClick:()=>ew(!1),children:(0,l.jsxs)(r.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.02*a},whileHover:{scale:1.01,x:5},className:"p-4 rounded-xl flex items-center justify-between transition-all ".concat(e.id===t.id?"bg-blue-500/20 border border-blue-500/30":"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-10 w-10 rounded-xl flex items-center justify-center ".concat(e.id===t.id?"bg-blue-600 text-white":"bg-white/10 text-white/50"),children:(0,l.jsx)(o.A,{size:16})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-black text-white",children:e.name}),(0,l.jsxs)("p",{className:"text-xs font-bold text-white/40",children:["#",e.user_code||"---"]})]})]}),e.id===t.id&&(0,l.jsx)(P.A,{size:16,className:"text-blue-400"})]})},e.id))})]})]})})]})}function ed(e){let{label:t,value:a,onChange:s,editable:i,type:o="text",icon:n}=e;return(0,l.jsxs)(r.P.div,{whileHover:{scale:1.01},className:"bg-white/60 dark:bg-white/5 backdrop-blur-xl p-4 rounded-xl border border-slate-200 dark:border-white/10 hover:border-blue-500/30 transition-all group shadow-sm hover:shadow-md",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("div",{className:"text-slate-400 dark:text-white/40 group-hover:text-blue-500 transition-colors",children:n}),(0,l.jsx)("label",{className:"text-[10px] font-black text-slate-500 dark:text-white/40 uppercase tracking-wide",children:t})]}),i?(0,l.jsx)("input",{type:o,value:a,onChange:e=>s(e.target.value),className:"w-full bg-slate-100/50 dark:bg-white/10 border border-slate-200 dark:border-white/10 rounded-lg py-2.5 px-3 text-sm font-bold text-slate-900 dark:text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"}):(0,l.jsx)("div",{className:"text-sm font-bold text-slate-900 dark:text-white min-h-[38px] flex items-center",children:a||"---"})]})}function ec(e){let{label:t,path:a}=e,s=eo(a);return(0,l.jsxs)(r.P.div,{whileHover:{scale:1.02},className:"group",children:[(0,l.jsx)("div",{onClick:()=>s&&window.open(s,"_blank"),className:"relative overflow-hidden rounded-2xl border border-slate-200 dark:border-white/10 bg-white/60 dark:bg-white/5 backdrop-blur-xl aspect-video cursor-pointer hover:border-indigo-500/30 transition-all shadow-sm hover:shadow-lg",children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{src:s,alt:t,className:"h-full w-full object-cover group-hover:scale-110 transition-transform duration-500"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-indigo-900/90 via-indigo-900/50 to-transparent opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center",children:(0,l.jsx)(E.A,{size:24,className:"text-white"})})]}):(0,l.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center text-slate-400 dark:text-white/30",children:[(0,l.jsx)(c.A,{size:28,className:"opacity-30"}),(0,l.jsx)("span",{className:"text-[11px] font-bold mt-2",children:"لم يُرفع بعد"})]})}),(0,l.jsx)("p",{className:"text-xs font-black text-slate-600 dark:text-white/70 mt-2 text-center",children:t})]})}function ex(e){let{label:t,value:a,color:s,unit:i=""}=e;return(0,l.jsxs)(r.P.div,{whileHover:{scale:1.02},className:"p-5 rounded-2xl border bg-gradient-to-br backdrop-blur-xl text-center shadow-sm ".concat({blue:"from-blue-600/10 to-indigo-600/10 border-blue-500/20 text-blue-600 dark:text-blue-400",green:"from-emerald-600/10 to-teal-600/10 border-emerald-500/20 text-emerald-600 dark:text-emerald-400",red:"from-red-600/10 to-rose-600/10 border-red-500/20 text-red-600 dark:text-red-400",purple:"from-purple-600/10 to-violet-600/10 border-purple-500/20 text-purple-600 dark:text-purple-400",orange:"from-orange-600/10 to-amber-600/10 border-orange-500/20 text-orange-600 dark:text-orange-400"}[s]),children:[(0,l.jsx)("p",{className:"text-[10px] font-black uppercase tracking-wide opacity-70 mb-2",children:t}),(0,l.jsxs)("div",{className:"text-2xl font-black",children:[a.toLocaleString(),i&&(0,l.jsx)("span",{className:"text-sm mr-1 font-bold opacity-70",children:i})]})]})}},38154:(e,t,a)=>{Promise.resolve().then(a.bind(a,32848))},55075:(e,t,a)=>{"use strict";a.d(t,{C:()=>s});var l=a(30926);let s=(0,l.createServerReference)("60206cc857a1a75bc9446a28b2c84d0b55777a1486",l.callServer,void 0,l.findSourceMapURL,"updateIqamaExpiry")}},e=>{e.O(0,[977,2619,8720,6550,616,4742,8441,1255,7358],()=>e(e.s=38154)),_N_E=e.O()}]);