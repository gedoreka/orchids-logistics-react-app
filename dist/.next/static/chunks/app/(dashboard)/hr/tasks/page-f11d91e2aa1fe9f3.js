(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5152],{17856:(e,t,s)=>{Promise.resolve().then(s.bind(s,82850))},82850:(e,t,s)=>{"use strict";s.d(t,{TasksClient:()=>J});var l=s(95155),a=s(12115),i=s(8751),r=s(26497),n=s(56154),o=s(30814),c=s(24589),d=s(26983),x=s(39324),m=s(61362),h=s(65229),p=s(59384),u=s(52987),b=s(80298),g=s(6191),v=s(95740),f=s(52056),j=s(86651),w=s(66955),N=s(24033),y=s(35299),k=s(46046),A=s(91169),C=s(57828),_=s(16485),S=s(20508),z=s(309),P=s(18085),D=s(18756),T=s(39347),R=s(71360),E=s(86550),M=s(48003),O=s(18720),q=s(30926);let L=(0,q.createServerReference)("403c9dc84024fe3ea91ace706537d03c1f83c4504a",q.callServer,void 0,q.findSourceMapURL,"createTask"),F=(0,q.createServerReference)("605501f1ddb09c1566db7235706401ebf20f435138",q.callServer,void 0,q.findSourceMapURL,"updateTaskStatus"),H=(0,q.createServerReference)("405e0141f64eee1e490a1ca8fcd39641a50a7a9835",q.callServer,void 0,q.findSourceMapURL,"deleteTask");var U=s(20063),G=s(52619),Y=s.n(G),B=s(83884);function J(e){var t,s,T,R,q,G,J;let{initialTasks:Q,stats:V,employees:W,companyId:X,userId:Z,activeFilter:ee,searchQuery:et}=e,es=(0,B.c)("hr.tasksPage"),[el,ea]=(0,a.useState)(Q),ei={high:{label:es("high"),color:"from-red-500 to-rose-600",bg:"bg-red-500/10",text:"text-red-500",icon:n.A},medium:{label:es("medium"),color:"from-amber-500 to-orange-600",bg:"bg-amber-500/10",text:"text-amber-500",icon:o.A},low:{label:es("low"),color:"from-emerald-500 to-green-600",bg:"bg-emerald-500/10",text:"text-emerald-500",icon:c.A}},er={pending:{label:es("pending"),color:"from-orange-500 to-amber-600",bg:"bg-orange-500/10",text:"text-orange-500",icon:d.A},in_progress:{label:es("inProgress"),color:"from-blue-500 to-indigo-600",bg:"bg-blue-500/10",text:"text-blue-500",icon:x.A},completed:{label:es("completed"),color:"from-emerald-500 to-green-600",bg:"bg-emerald-500/10",text:"text-emerald-500",icon:m.A},cancelled:{label:es("cancelled"),color:"from-slate-500 to-gray-600",bg:"bg-slate-500/10",text:"text-slate-500",icon:h.A}},[en,eo]=(0,a.useState)(!1),[ec,ed]=(0,a.useState)(!1),[ex,em]=(0,a.useState)(et),[eh,ep]=(0,a.useState)(null),[eu,eb]=(0,a.useState)(!1),[eg,ev]=(0,a.useState)(!1),[ef,ej]=(0,a.useState)(null),[ew,eN]=(0,a.useState)(""),[ey,ek]=(0,a.useState)(!1),[eA,eC]=(0,a.useState)(!1),[e_,eS]=(0,a.useState)(""),[ez,eP]=(0,a.useState)(!1),eD=(0,U.useRouter)();(0,a.useRef)(null);let[eT,eR]=(0,a.useState)({title:"",description:"",assigned_to:"",due_date:(0,E.GP)(new Date,"yyyy-MM-dd"),priority:"medium",status:"pending"}),eE=()=>{eR({title:"",description:"",assigned_to:"",due_date:(0,E.GP)(new Date,"yyyy-MM-dd"),priority:"medium",status:"pending"}),eP(!1),ep(null)},eM=async e=>{e.preventDefault(),ed(!0);try{let e=await L({...eT,company_id:X,created_by:Z});e.success?(O.oR.success(es("taskCreatedSuccess")),eo(!1),eE(),eD.refresh()):O.oR.error(e.error)}catch(e){O.oR.error(es("errorOccurred"))}finally{ed(!1)}},eO=async(e,t)=>{let s=await F(e,t);s.success?(O.oR.success(es("statusUpdatedSuccess")),ea(s=>s.map(s=>s.id===e?{...s,status:t}:s)),eD.refresh()):O.oR.error(s.error)},eq=async e=>{if(!confirm(es("deleteConfirm")))return;let t=await H(e);t.success?(O.oR.success(es("taskDeletedSuccess")),ea(t=>t.filter(t=>t.id!==e))):O.oR.error(t.error)},eL=e=>{eD.push("/hr/tasks?search=".concat(ex,"&filter=").concat(e))},eF=e=>{ej(e),eN(""),ev(!0)},eH=async()=>{if(!ef||!ew)return void O.oR.error(es("emailRequired"));if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ew))return void O.oR.error(es("invalidEmail"));ek(!0);try{let e=await fetch("/api/tasks/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:ew,task:ef})}),t=await e.json();t.success?(O.oR.success(es("emailSentSuccess",{email:ew})),ev(!1),ej(null),eN("")):O.oR.error(t.error||es("errorOccurred"))}catch(e){console.error("Error sending email:",e),O.oR.error(es("errorOccurred"))}finally{ek(!1)}},eU=e=>{var t,s;let l='\n      <!DOCTYPE html>\n      <html dir="rtl" lang="ar">\n      <head>\n        <meta charset="UTF-8">\n        <title>مهمة - '.concat(e.title,'</title>\n        <style>\n          @import url(\'https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap\');\n          * { margin: 0; padding: 0; box-sizing: border-box; }\n          body { font-family: \'Tajawal\', sans-serif; direction: rtl; background: #f8fafc; padding: 40px; }\n          .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 24px; overflow: hidden; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.1); }\n          .header { background: linear-gradient(135deg, #8b5cf6, #6366f1); padding: 40px; text-align: center; color: white; }\n          .header h1 { font-size: 28px; font-weight: 800; margin-bottom: 8px; }\n          .header p { opacity: 0.9; }\n          .content { padding: 40px; }\n          .task-title { font-size: 24px; font-weight: 800; color: #1e293b; margin-bottom: 16px; text-align: center; }\n          .task-desc { color: #64748b; line-height: 1.8; margin-bottom: 32px; text-align: center; padding: 20px; background: #f8fafc; border-radius: 16px; }\n          .details { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }\n          .detail-item { padding: 16px 20px; background: #f8fafc; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; }\n          .detail-label { color: #64748b; font-weight: 600; }\n          .detail-value { color: #1e293b; font-weight: 700; }\n          .priority-high { color: #ef4444; }\n          .priority-medium { color: #f59e0b; }\n          .priority-low { color: #22c55e; }\n          .footer { padding: 24px 40px; background: #0f172a; text-align: center; color: #64748b; font-size: 12px; }\n          @media print { body { padding: 0; } .container { box-shadow: none; } }\n        </style>\n      </head>\n      <body>\n        <div class="container">\n          <div class="header">\n            <h1>\uD83D\uDCCB تفاصيل المهمة</h1>\n            <p>نظام إدارة المهام</p>\n          </div>\n          <div class="content">\n            <h2 class="task-title">').concat(e.title,"</h2>\n            ").concat(e.description?'<div class="task-desc">'.concat(e.description,"</div>"):"",'\n            <div class="details">\n              <div class="detail-item">\n                <span class="detail-label">\uD83C\uDFAF الأولوية</span>\n                <span class="detail-value priority-').concat(e.priority,'">').concat((null==(t=ei[e.priority])?void 0:t.label)||e.priority,'</span>\n              </div>\n              <div class="detail-item">\n                <span class="detail-label">\uD83D\uDCCA الحالة</span>\n                <span class="detail-value">').concat((null==(s=er[e.status])?void 0:s.label)||e.status,'</span>\n              </div>\n              <div class="detail-item">\n                <span class="detail-label">\uD83D\uDCC5 تاريخ الاستحقاق</span>\n                <span class="detail-value">').concat(e.due_date,'</span>\n              </div>\n              <div class="detail-item">\n                <span class="detail-label">\uD83D\uDC64 الموظف المعني</span>\n                <span class="detail-value">').concat(e.employee_name||"غير معين",'</span>\n              </div>\n              <div class="detail-item">\n                <span class="detail-label">✍️ أنشئت بواسطة</span>\n                <span class="detail-value">').concat(e.created_by_name||"غير معروف",'</span>\n              </div>\n              <div class="detail-item">\n                <span class="detail-label">\uD83D\uDCC6 تاريخ الإنشاء</span>\n                <span class="detail-value">').concat(e.created_at?(0,E.GP)(new Date(e.created_at),"yyyy-MM-dd",{locale:M.ar}):"-",'</span>\n              </div>\n            </div>\n          </div>\n          <div class="footer">\n            <p>تم الطباعة من نظام إدارة اللوجستيات \xa9 ').concat(new Date().getFullYear(),"</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    "),a=window.open("","_blank");a&&(a.document.write(l),a.document.close(),a.onload=()=>{a.print()})},eG=W.filter(e=>{var t,s;return e.name.toLowerCase().includes(e_.toLowerCase())||(null==(t=e.iqama_number)?void 0:t.includes(e_))||(null==(s=e.user_code)?void 0:s.includes(e_))}),eY=W.find(e=>e.id===Number(eT.assigned_to));return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,l.jsxs)("div",{className:"max-w-[1800px] mx-auto p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm font-bold text-slate-400 mb-2",children:[(0,l.jsxs)(Y(),{href:"/hr",className:"hover:text-violet-400 transition-colors flex items-center gap-1",children:[(0,l.jsx)(p.A,{size:14}),es("hrAffairs")]}),(0,l.jsx)(u.A,{size:14}),(0,l.jsx)("span",{className:"text-violet-400",children:es("title")})]}),(0,l.jsxs)("h1",{className:"text-3xl font-black text-white flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-3 bg-gradient-to-br from-violet-500 to-indigo-600 rounded-2xl shadow-lg shadow-violet-500/30",children:(0,l.jsx)(b.A,{className:"w-8 h-8 text-white"})}),es("title")]})]}),(0,l.jsxs)(i.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{eE(),eo(!0)},className:"flex items-center justify-center gap-3 bg-gradient-to-r from-violet-500 to-indigo-600 text-white px-8 py-4 rounded-2xl text-sm font-black shadow-lg shadow-violet-500/30 transition-all hover:shadow-xl hover:shadow-violet-500/40",children:[(0,l.jsx)(g.A,{size:20}),(0,l.jsx)("span",{children:es("createNewTask")}),(0,l.jsx)(v.A,{size:16,className:"opacity-70"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,l.jsx)($,{label:es("totalTasks"),value:V.total,icon:b.A,gradient:"from-slate-500 to-slate-600",onClick:()=>eL("all"),active:"all"===ee}),(0,l.jsx)($,{label:es("pending"),value:V.pending,icon:d.A,gradient:"from-orange-500 to-amber-600",onClick:()=>eL("pending"),active:"pending"===ee}),(0,l.jsx)($,{label:es("inProgress"),value:V.inProgress,icon:x.A,gradient:"from-blue-500 to-indigo-600",onClick:()=>eL("in_progress"),active:"in_progress"===ee}),(0,l.jsx)($,{label:es("completed"),value:V.completed,icon:m.A,gradient:"from-emerald-500 to-green-600",onClick:()=>eL("completed"),active:"completed"===ee}),(0,l.jsx)($,{label:es("overdue"),value:V.overdue,icon:f.A,gradient:"from-red-500 to-rose-600",onClick:()=>eL("overdue"),active:"overdue"===ee})]}),(0,l.jsx)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-3xl border border-white/10 p-6 shadow-xl",children:(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),eD.push("/hr/tasks?search=".concat(ex,"&filter=").concat(ee))},className:"flex gap-4",children:[(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)(j.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),(0,l.jsx)("input",{type:"text",value:ex,onChange:e=>em(e.target.value),placeholder:es("searchPlaceholder"),className:"w-full h-14 pr-12 pl-4 rounded-2xl bg-slate-700/50 border border-slate-600/50 text-white placeholder-slate-400 text-sm font-bold focus:border-violet-500/50 focus:ring-4 focus:ring-violet-500/10 outline-none transition-all"})]}),(0,l.jsxs)("button",{type:"submit",className:"h-14 px-8 rounded-2xl bg-gradient-to-r from-violet-500 to-indigo-600 text-white text-sm font-black hover:shadow-lg hover:shadow-violet-500/30 transition-all flex items-center gap-2",children:[(0,l.jsx)(w.A,{size:18}),(0,l.jsx)("span",{children:es("search")})]})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[(0,l.jsx)(r.N,{mode:"popLayout",children:el.map(e=>(0,l.jsx)(I,{task:e,onStatusChange:eO,onDelete:eq,onEmail:eF,onPrint:eU,onPreview:()=>{ep(e),eb(!0)},statusConfig:er,priorityConfig:ei,t:es},e.id))}),0===el.length&&(0,l.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"col-span-full py-20 flex flex-col items-center gap-6",children:[(0,l.jsx)("div",{className:"p-6 bg-slate-800/50 rounded-3xl",children:(0,l.jsx)(b.A,{size:80,className:"text-slate-600"})}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-2xl font-black text-slate-400",children:es("noTasks")}),(0,l.jsx)("p",{className:"text-slate-500 mt-2",children:es("noTasksDesc")})]})]})]}),(0,l.jsx)(r.N,{children:en&&(0,l.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>e.target===e.currentTarget&&eo(!1),children:(0,l.jsxs)(i.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-2xl bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-white/10",children:[(0,l.jsx)("div",{className:"bg-gradient-to-r from-violet-500 to-indigo-600 p-8 text-white",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"p-3 bg-white/20 rounded-2xl",children:(0,l.jsx)(b.A,{size:28})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-2xl font-black",children:ez?es("editTask"):es("createNewTask")}),(0,l.jsx)("p",{className:"text-white/70 font-bold text-sm mt-1",children:es("taskDistribution")})]})]}),(0,l.jsx)("button",{onClick:()=>{eo(!1),eE()},className:"h-12 w-12 rounded-2xl bg-white/10 flex items-center justify-center hover:bg-white/20 transition-all",children:(0,l.jsx)(h.A,{size:24})})]})}),(0,l.jsxs)("form",{onSubmit:eM,className:"p-8 space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mr-1",children:es("taskTitle")}),(0,l.jsx)("input",{type:"text",required:!0,value:eT.title,onChange:e=>eR({...eT,title:e.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-2xl py-4 px-5 font-bold text-white placeholder-slate-400 focus:border-violet-500/50 focus:ring-4 focus:ring-violet-500/10 outline-none transition-all",placeholder:es("taskTitlePlaceholder")})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mr-1",children:es("description")}),(0,l.jsx)("textarea",{rows:3,value:eT.description,onChange:e=>eR({...eT,description:e.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-2xl py-4 px-5 font-bold text-white placeholder-slate-400 focus:border-violet-500/50 focus:ring-4 focus:ring-violet-500/10 outline-none transition-all resize-none",placeholder:es("descriptionPlaceholder")})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mr-1",children:es("assignedEmployee")}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("button",{type:"button",onClick:()=>eC(!0),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-2xl py-4 px-5 font-bold text-right flex items-center justify-between hover:border-violet-500/50 transition-all",children:[eY?(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white font-bold",children:eY.name.charAt(0)}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("p",{className:"text-white font-bold",children:eY.name}),(0,l.jsx)("p",{className:"text-slate-400 text-xs",children:eY.iqama_number||eY.user_code})]})]}):(0,l.jsx)("span",{className:"text-slate-400",children:es("selectEmployee")}),(0,l.jsx)(N.A,{className:"text-slate-400",size:20})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mr-1",children:es("dueDate")}),(0,l.jsx)("input",{type:"date",required:!0,value:eT.due_date,onChange:e=>eR({...eT,due_date:e.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-2xl py-4 px-5 font-bold text-white focus:border-violet-500/50 outline-none transition-all"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mr-1",children:es("priority")}),(0,l.jsxs)("select",{value:eT.priority,onChange:e=>eR({...eT,priority:e.target.value}),className:"w-full bg-slate-700/50 border border-slate-600/50 rounded-2xl py-4 px-5 font-bold text-white focus:border-violet-500/50 outline-none appearance-none cursor-pointer",children:[(0,l.jsx)("option",{value:"low",children:es("low")}),(0,l.jsx)("option",{value:"medium",children:es("medium")}),(0,l.jsx)("option",{value:"high",children:es("high")})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,l.jsx)(i.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:ec,className:"flex-1 flex items-center justify-center gap-3 bg-gradient-to-r from-violet-500 to-indigo-600 text-white py-4 rounded-2xl font-black shadow-lg shadow-violet-500/30 disabled:opacity-50 transition-all",children:ec?(0,l.jsx)(y.A,{className:"w-5 h-5 animate-spin"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k.A,{size:20}),(0,l.jsx)("span",{children:es("saveTask")})]})}),(0,l.jsx)(i.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:()=>{eo(!1),eE()},className:"px-8 bg-slate-700 text-slate-300 py-4 rounded-2xl font-black hover:bg-slate-600 transition-all",children:es("cancel")})]})]})]})})}),(0,l.jsx)(r.N,{children:eA&&(0,l.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:e=>e.target===e.currentTarget&&eC(!1),children:(0,l.jsxs)(i.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-xl bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-white/10 max-h-[80vh] flex flex-col",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-violet-500 to-indigo-600 p-6 text-white",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,l.jsx)(A.A,{size:24})}),(0,l.jsx)("h3",{className:"text-xl font-black",children:es("selectEmployeeModalTitle")})]}),(0,l.jsx)("button",{onClick:()=>eC(!1),className:"h-10 w-10 rounded-xl bg-white/10 flex items-center justify-center hover:bg-white/20 transition-all",children:(0,l.jsx)(h.A,{size:20})})]}),(0,l.jsxs)("div",{className:"mt-4 relative",children:[(0,l.jsx)(j.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/50",size:18}),(0,l.jsx)("input",{type:"text",value:e_,onChange:e=>eS(e.target.value),placeholder:es("employeeSearchPlaceholder"),className:"w-full h-12 pr-12 pl-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50 text-sm font-bold focus:border-white/40 outline-none transition-all"})]})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto p-4 space-y-2",children:[(0,l.jsxs)("button",{onClick:()=>{eR({...eT,assigned_to:""}),eC(!1)},className:"w-full p-4 rounded-2xl bg-slate-700/50 hover:bg-slate-700 border border-slate-600/50 hover:border-violet-500/50 transition-all flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-xl bg-slate-600 flex items-center justify-center",children:(0,l.jsx)(h.A,{className:"text-slate-400",size:20})}),(0,l.jsx)("span",{className:"text-slate-300 font-bold",children:es("unassigned")})]}),eG.map(e=>(0,l.jsxs)(i.P.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>{eR({...eT,assigned_to:String(e.id)}),eC(!1)},className:"w-full p-4 rounded-2xl transition-all flex items-center gap-4 ".concat(eT.assigned_to===String(e.id)?"bg-gradient-to-r from-violet-500/20 to-indigo-500/20 border-2 border-violet-500/50":"bg-slate-700/50 hover:bg-slate-700 border border-slate-600/50 hover:border-violet-500/50"),children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white font-bold text-lg shadow-lg",children:e.personal_photo?(0,l.jsx)("img",{src:e.personal_photo,alt:e.name,className:"w-full h-full object-cover rounded-xl"}):e.name.charAt(0)}),(0,l.jsxs)("div",{className:"flex-1 text-right",children:[(0,l.jsx)("p",{className:"text-white font-bold",children:e.name}),(0,l.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[e.iqama_number&&(0,l.jsx)("span",{className:"text-slate-400 text-xs",children:e.iqama_number}),e.job_title&&(0,l.jsx)("span",{className:"text-violet-400 text-xs bg-violet-500/10 px-2 py-0.5 rounded-lg",children:e.job_title})]})]}),eT.assigned_to===String(e.id)&&(0,l.jsx)("div",{className:"p-2 bg-violet-500 rounded-lg",children:(0,l.jsx)(m.A,{className:"text-white",size:16})})]},e.id)),0===eG.length&&(0,l.jsxs)("div",{className:"py-12 text-center",children:[(0,l.jsx)(A.A,{className:"mx-auto text-slate-600 mb-4",size:48}),(0,l.jsx)("p",{className:"text-slate-400 font-bold",children:es("noMatchingEmployees")})]})]})]})})}),(0,l.jsx)(r.N,{children:eu&&eh&&(0,l.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>e.target===e.currentTarget&&eb(!1),children:(0,l.jsxs)(i.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-2xl bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-white/10",children:[(0,l.jsx)("div",{className:"bg-gradient-to-r ".concat((null==(t=ei[eh.priority])?void 0:t.color)||"from-violet-500 to-indigo-600"," p-8 text-white"),children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"p-3 bg-white/20 rounded-2xl",children:(0,l.jsx)(C.A,{size:28})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-2xl font-black",children:es("taskDetails")}),(0,l.jsx)("p",{className:"text-white/70 font-bold text-sm mt-1",children:es("fullPreview")})]})]}),(0,l.jsx)("button",{onClick:()=>eb(!1),className:"h-12 w-12 rounded-2xl bg-white/10 flex items-center justify-center hover:bg-white/20 transition-all",children:(0,l.jsx)(h.A,{size:24})})]})}),(0,l.jsxs)("div",{className:"p-8 space-y-6",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-black text-white mb-2",children:eh.title}),eh.description&&(0,l.jsx)("p",{className:"text-slate-400 leading-relaxed",children:eh.description})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)(K,{icon:o.A,label:es("priority"),value:(null==(s=ei[eh.priority])?void 0:s.label)||eh.priority,color:null==(T=ei[eh.priority])?void 0:T.text}),(0,l.jsx)(K,{icon:(null==(R=er[eh.status])?void 0:R.icon)||d.A,label:es("status"),value:(null==(q=er[eh.status])?void 0:q.label)||eh.status,color:null==(G=er[eh.status])?void 0:G.text}),(0,l.jsx)(K,{icon:_.A,label:es("dueDate"),value:eh.due_date}),(0,l.jsx)(K,{icon:S.A,label:es("assignedEmployee"),value:eh.employee_name||es("unassigned")})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsxs)("button",{onClick:()=>eU(eh),className:"flex-1 flex items-center justify-center gap-2 bg-slate-700 text-white py-3 rounded-xl font-bold hover:bg-slate-600 transition-all",children:[(0,l.jsx)(z.A,{size:18}),(0,l.jsx)("span",{children:es("print")})]}),(0,l.jsxs)("button",{onClick:()=>{eb(!1),eF(eh)},className:"flex-1 flex items-center justify-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white py-3 rounded-xl font-bold hover:shadow-lg transition-all",children:[(0,l.jsx)(P.A,{size:18}),(0,l.jsx)("span",{children:es("sendEmail")})]})]})]})]})})}),(0,l.jsx)(r.N,{children:eg&&ef&&(0,l.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>e.target===e.currentTarget&&!ey&&ev(!1),children:(0,l.jsxs)(i.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-slate-800 rounded-3xl p-8 w-full max-w-lg shadow-2xl border border-white/10",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-3 bg-emerald-500/20 rounded-xl",children:(0,l.jsx)(P.A,{className:"w-6 h-6 text-emerald-400"})}),es("sendEmailTitle")]}),(0,l.jsx)("button",{onClick:()=>!ey&&ev(!1),className:"text-slate-400 hover:text-white p-2 rounded-lg hover:bg-white/10 transition-all",disabled:ey,children:(0,l.jsx)(h.A,{className:"w-6 h-6"})})]}),(0,l.jsx)("div",{className:"bg-slate-700/30 rounded-2xl p-4 mb-6 border border-slate-600/50",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:(0,l.jsx)(b.A,{className:"w-5 h-5 text-violet-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-white font-bold",children:ef.title}),(0,l.jsxs)("p",{className:"text-slate-400 text-sm",children:[null==(J=ei[ef.priority])?void 0:J.label," - ",ef.due_date]})]})]})}),(0,l.jsxs)("div",{className:"bg-slate-700/30 rounded-2xl p-5 border border-slate-600/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:(0,l.jsx)(D.A,{className:"w-5 h-5 text-blue-400"})}),(0,l.jsx)("p",{className:"text-white font-bold",children:es("emailPlaceholder")})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("input",{type:"email",placeholder:es("emailPlaceholder"),value:ew,onChange:e=>eN(e.target.value),disabled:ey,className:"flex-1 bg-slate-800 border border-slate-600 rounded-xl py-3 px-4 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent",dir:"ltr"}),(0,l.jsx)("button",{onClick:eH,disabled:ey||!ew,className:"px-6 rounded-xl font-bold flex items-center gap-2 transition-all ".concat(ew&&!ey?"bg-gradient-to-r from-emerald-500 to-teal-600 hover:shadow-lg text-white":"bg-slate-700 text-slate-500 cursor-not-allowed"),children:ey?(0,l.jsx)(y.A,{className:"w-5 h-5 animate-spin"}):(0,l.jsx)(P.A,{className:"w-5 h-5"})})]})]}),ey&&(0,l.jsxs)("div",{className:"mt-6 bg-violet-500/10 border border-violet-500/30 rounded-xl p-4 flex items-center gap-3",children:[(0,l.jsx)(y.A,{className:"w-5 h-5 text-violet-400 animate-spin"}),(0,l.jsx)("p",{className:"text-violet-400 text-sm",children:es("sending")})]})]})})})]})})}function $(e){let{label:t,value:s,icon:a,gradient:r,onClick:n,active:o}=e;return(0,l.jsxs)(i.P.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:n,className:"relative p-5 rounded-2xl border transition-all overflow-hidden ".concat(o?"bg-slate-700/80 border-violet-500/50 shadow-lg shadow-violet-500/20":"bg-slate-800/50 border-white/10 hover:border-white/20"),children:[(0,l.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r ".concat(r)}),(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-br ".concat(r," shadow-lg"),children:(0,l.jsx)(a,{className:"w-5 h-5 text-white"})}),o&&(0,l.jsx)(T.A,{className:"w-4 h-4 text-violet-400 fill-violet-400"})]}),(0,l.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:t}),(0,l.jsx)("p",{className:"text-2xl font-black text-white",children:s})]})}function I(e){let{task:t,onStatusChange:s,onDelete:a,onEmail:r,onPrint:n,onPreview:o,statusConfig:c,priorityConfig:d,t:x}=e,m=d[t.priority]||d.medium,h=c[t.status]||c.pending,p=new Date(t.due_date)<new Date&&"completed"!==t.status&&"cancelled"!==t.status;return(0,l.jsxs)(i.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"group bg-slate-800/50 backdrop-blur-xl rounded-3xl border overflow-hidden transition-all duration-300 hover:shadow-xl hover:shadow-violet-500/10 ".concat(p?"border-red-500/30":"border-white/10 hover:border-violet-500/30"),children:[(0,l.jsx)("div",{className:"h-1.5 bg-gradient-to-r ".concat(m.color)}),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-xl ".concat(m.bg),children:[(0,l.jsx)(m.icon,{className:"w-4 h-4 ".concat(m.text)}),(0,l.jsx)("span",{className:"text-xs font-black ".concat(m.text),children:m.label})]}),p&&(0,l.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-red-500/10",children:[(0,l.jsx)(f.A,{className:"w-4 h-4 text-red-500"}),(0,l.jsx)("span",{className:"text-xs font-black text-red-500",children:x("overdue")})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-black text-white mb-2 line-clamp-1",children:t.title}),t.description&&(0,l.jsx)("p",{className:"text-sm text-slate-400 leading-relaxed line-clamp-2",children:t.description})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-4 text-xs font-bold text-slate-500",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(S.A,{size:14}),(0,l.jsx)("span",{children:t.employee_name||x("unassigned")})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(_.A,{size:14}),(0,l.jsx)("span",{className:p?"text-red-400":"",children:t.due_date})]})]}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("select",{value:t.status,onChange:e=>s(t.id,e.target.value),className:"w-full h-11 px-4 rounded-xl text-xs font-black uppercase tracking-wider outline-none border transition-all cursor-pointer ".concat(h.bg," ").concat(h.text," border-transparent hover:border-current"),children:[(0,l.jsx)("option",{value:"pending",children:c.pending.label}),(0,l.jsx)("option",{value:"in_progress",children:c.in_progress.label}),(0,l.jsx)("option",{value:"completed",children:c.completed.label}),(0,l.jsx)("option",{value:"cancelled",children:c.cancelled.label})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-white/5",children:[(0,l.jsx)("button",{onClick:o,className:"flex-1 flex items-center justify-center gap-2 p-2.5 bg-slate-700/50 text-slate-300 rounded-xl hover:bg-violet-500/20 hover:text-violet-400 transition-all",title:x("preview"),children:(0,l.jsx)(C.A,{size:16})}),(0,l.jsx)("button",{onClick:()=>r(t),className:"flex-1 flex items-center justify-center gap-2 p-2.5 bg-slate-700/50 text-slate-300 rounded-xl hover:bg-emerald-500/20 hover:text-emerald-400 transition-all",title:x("sendEmail"),children:(0,l.jsx)(P.A,{size:16})}),(0,l.jsx)("button",{onClick:()=>n(t),className:"flex-1 flex items-center justify-center gap-2 p-2.5 bg-slate-700/50 text-slate-300 rounded-xl hover:bg-blue-500/20 hover:text-blue-400 transition-all",title:x("print"),children:(0,l.jsx)(z.A,{size:16})}),(0,l.jsx)("button",{onClick:()=>a(t.id),className:"flex-1 flex items-center justify-center gap-2 p-2.5 bg-slate-700/50 text-slate-300 rounded-xl hover:bg-red-500/20 hover:text-red-400 transition-all",title:x("delete"),children:(0,l.jsx)(R.A,{size:16})})]})]})]})}function K(e){let{icon:t,label:s,value:a,color:i}=e;return(0,l.jsxs)("div",{className:"bg-slate-700/30 rounded-xl p-4 border border-slate-600/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(t,{className:"w-4 h-4 text-slate-400"}),(0,l.jsx)("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:s})]}),(0,l.jsx)("p",{className:"font-bold ".concat(i||"text-white"),children:a})]})}}},e=>{e.O(0,[977,2619,8720,6550,2143,3884,8441,1255,7358],()=>e(e.s=17856)),_N_E=e.O()}]);