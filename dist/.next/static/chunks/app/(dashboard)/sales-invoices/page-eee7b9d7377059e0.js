(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7224],{16961:(e,t,s)=>{"use strict";s.d(t,{InvoicesListClient:()=>_});var a=s(95155),l=s(12115),r=s(26497),i=s(8751),n=s(42529),c=s(97079),d=s(26983),o=s(6132),x=s(95740),p=s(6191),m=s(89559),h=s(53409),b=s(86651),u=s(24722),g=s(89715),f=s(19408),w=s(16485),j=s(57828),N=s(35299),v=s(35597),y=s(71360),k=s(52619),A=s.n(k),S=s(20063),z=s(64269),C=s(83884);function _(e){let{invoices:t}=e,s=(0,C.c)("invoices"),k=(0,C.c)("common"),_=(0,S.useRouter)(),[P,E]=(0,l.useState)(""),[F,L]=(0,l.useState)("all"),[T,R]=(0,l.useState)(null),[D,O]=(0,l.useState)({show:!1,type:"success",message:""}),I=(0,l.useMemo)(()=>{let e=0,s=0,a=0,l=0,r=0,i=0,n=0;return t.forEach(t=>{let c=parseFloat(String(t.subtotal))||0,d=parseFloat(String(t.tax_amount))||0,o=parseFloat(String(t.total_amount))||0,x=t.invoice_status||t.status||"due";e+=c,"paid"===x?(s+=d,r++):"draft"===x?(l+=o,n++):(a+=d,i++)}),{totalSubtotal:e,totalPaidTax:s,totalDueTax:a,totalDraft:l,paidCount:r,dueCount:i,draftCount:n,totalCount:t.length}},[t]),M=(0,l.useMemo)(()=>t.filter(e=>{var t,s;let a=e.invoice_status||e.status||"due",l=(null==(t=e.invoice_number)?void 0:t.toLowerCase().includes(P.toLowerCase()))||(null==(s=e.client_name)?void 0:s.toLowerCase().includes(P.toLowerCase())),r="all"===F||a===F;return l&&r}),[t,P,F]),B=async(e,t)=>{R(e);try{let t=await fetch("/api/sales-invoices/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"toggle_payment"})}),s=await t.json();s.success?(O({show:!0,type:"success",message:s.message}),_.refresh()):O({show:!0,type:"error",message:s.error||k("error")})}catch(e){O({show:!0,type:"error",message:s("errorFetching")||k("networkError")})}finally{R(null),setTimeout(()=>O({show:!1,type:"success",message:""}),3e3)}},J=async(e,t)=>{if("draft"!==t){O({show:!0,type:"error",message:s("deleteDraftOnly")}),setTimeout(()=>O({show:!1,type:"success",message:""}),3e3);return}if(confirm(s("confirmDelete"))){R(e);try{let t=await fetch("/api/sales-invoices/".concat(e),{method:"DELETE"}),s=await t.json();s.success?(O({show:!0,type:"success",message:s.message}),_.refresh()):O({show:!0,type:"error",message:s.error||k("error")})}catch(e){O({show:!0,type:"error",message:s("errorFetching")||k("networkError")})}finally{R(null),setTimeout(()=>O({show:!1,type:"success",message:""}),3e3)}}};return(0,a.jsxs)("div",{className:"max-w-[95%] mx-auto p-4 md:p-8 space-y-8",children:[(0,a.jsx)(r.N,{children:D.show&&(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:-50,x:"-50%"},animate:{opacity:1,y:0,x:"-50%"},exit:{opacity:0,y:-50,x:"-50%"},className:(0,z.cn)("fixed top-6 left-1/2 z-[100] px-8 py-4 rounded-2xl shadow-2xl font-black flex items-center gap-3 border backdrop-blur-md","success"===D.type?"bg-emerald-600/90 border-emerald-500 text-white":"bg-rose-600/90 border-rose-500 text-white"),children:["success"===D.type?(0,a.jsx)(n.A,{size:20}):(0,a.jsx)(o.A,{size:20}),(0,a.jsx)("span",{children:D.message})]})}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-br from-[#1e293b] via-[#334155] to-[#1e293b] p-10 text-white shadow-2xl border border-white/10",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 via-teal-500 via-blue-500 via-indigo-500 to-emerald-500 animate-gradient-x"}),(0,a.jsxs)("div",{className:"relative z-10 space-y-10",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-10",children:[(0,a.jsxs)("div",{className:"text-center lg:text-right space-y-4",children:[(0,a.jsxs)(i.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-2xl border border-white/10 mb-2",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-yellow-400 animate-pulse"}),(0,a.jsx)("span",{className:"text-emerald-200 font-black text-[10px] uppercase tracking-widest",children:s("manageTitle")})]}),(0,a.jsx)("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tight bg-gradient-to-r from-white via-emerald-100 to-white bg-clip-text text-transparent",children:s("title")}),(0,a.jsx)("p",{className:"text-lg text-slate-300 max-w-2xl font-medium leading-relaxed",children:s("subtitle")}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center lg:justify-start gap-4 mt-8",children:[(0,a.jsx)(A(),{href:"/sales-invoices/new",children:(0,a.jsxs)("button",{className:"flex items-center gap-3 px-6 py-3 bg-emerald-500 text-white font-black text-sm rounded-2xl hover:bg-emerald-600 transition-all shadow-xl active:scale-95",children:[(0,a.jsx)(p.A,{size:18}),s("newInvoice")]})}),(0,a.jsxs)("button",{onClick:()=>_.refresh(),className:"flex items-center gap-3 px-6 py-3 bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 text-white font-black text-sm hover:bg-white/20 transition-all shadow-xl active:scale-95",children:[(0,a.jsx)(m.A,{size:18,className:"text-emerald-400"}),k("update")]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full lg:w-auto",children:[(0,a.jsxs)(i.P.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white/10 backdrop-blur-xl rounded-[2rem] p-6 border border-white/10 shadow-2xl min-w-[160px] group hover:bg-white/20 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400 group-hover:scale-110 transition-transform",children:(0,a.jsx)(h.A,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-emerald-300 font-black text-[10px] uppercase tracking-wider",children:k("total")})]}),(0,a.jsx)("p",{className:"text-2xl font-black text-white tracking-tight",children:I.totalSubtotal.toLocaleString()}),(0,a.jsx)("p",{className:"text-emerald-400/60 text-[10px] font-black mt-1",children:s("beforeTax")})]}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white/10 backdrop-blur-xl rounded-[2rem] p-6 border border-white/10 shadow-2xl min-w-[160px] group hover:bg-white/20 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg text-blue-400 group-hover:scale-110 transition-transform",children:(0,a.jsx)(n.A,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-blue-300 font-black text-[10px] uppercase tracking-wider",children:s("paid")})]}),(0,a.jsx)("p",{className:"text-2xl font-black text-white tracking-tight",children:I.paidCount}),(0,a.jsx)("p",{className:"text-blue-400/60 text-[10px] font-black mt-1",children:s("paidStatus")})]}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white/10 backdrop-blur-xl rounded-[2rem] p-6 border border-white/10 shadow-2xl min-w-[160px] group hover:bg-white/20 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-amber-500/20 rounded-lg text-amber-400 group-hover:scale-110 transition-transform",children:(0,a.jsx)(d.A,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-amber-300 font-black text-[10px] uppercase tracking-wider",children:s("dueStatus")})]}),(0,a.jsx)("p",{className:"text-2xl font-black text-white tracking-tight",children:I.dueCount}),(0,a.jsx)("p",{className:"text-amber-400/60 text-[10px] font-black mt-1",children:s("dueStatus")})]}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{delay:.6},className:"bg-white/10 backdrop-blur-xl rounded-[2rem] p-6 border border-white/10 shadow-2xl min-w-[160px] group hover:bg-white/20 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-500/20 rounded-lg text-purple-400 group-hover:scale-110 transition-transform",children:(0,a.jsx)(c.A,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-purple-300 font-black text-[10px] uppercase tracking-wider",children:s("drafts")})]}),(0,a.jsx)("p",{className:"text-2xl font-black text-white tracking-tight",children:I.draftCount}),(0,a.jsx)("p",{className:"text-purple-400/60 text-[10px] font-black mt-1",children:s("draftStatus")})]})]})]}),(0,a.jsx)("div",{className:"border-t border-white/10"}),(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-xl rounded-3xl p-6 border border-white/10 flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,a.jsxs)("div",{className:"relative w-full md:w-96",children:[(0,a.jsx)(b.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),(0,a.jsx)("input",{type:"text",placeholder:s("searchPlaceholder"),value:P,onChange:e=>E(e.target.value),className:"w-full pr-12 pl-4 py-3 bg-white/10 border border-white/10 rounded-2xl text-white font-medium focus:bg-white/20 focus:border-emerald-500/50 outline-none transition-all placeholder:text-slate-500"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white/5 p-1.5 rounded-2xl border border-white/10",children:[(0,a.jsx)("button",{onClick:()=>L("all"),className:(0,z.cn)("px-4 py-2 rounded-xl text-[10px] font-black transition-all","all"===F?"bg-emerald-500 text-white shadow-lg":"text-slate-400 hover:bg-white/10"),children:k("all")}),(0,a.jsx)("button",{onClick:()=>L("paid"),className:(0,z.cn)("px-4 py-2 rounded-xl text-[10px] font-black transition-all","paid"===F?"bg-emerald-500 text-white shadow-lg":"text-slate-400 hover:bg-white/10"),children:s("paidStatus")}),(0,a.jsx)("button",{onClick:()=>L("due"),className:(0,z.cn)("px-4 py-2 rounded-xl text-[10px] font-black transition-all","due"===F?"bg-amber-500 text-white shadow-lg":"text-slate-400 hover:bg-white/10"),children:s("dueStatus")}),(0,a.jsx)("button",{onClick:()=>L("draft"),className:(0,z.cn)("px-4 py-2 rounded-xl text-[10px] font-black transition-all","draft"===F?"bg-purple-500 text-white shadow-lg":"text-slate-400 hover:bg-white/10"),children:s("draftStatus")})]}),(0,a.jsx)("div",{className:"flex gap-3 w-full md:w-auto",children:(0,a.jsxs)("button",{className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-6 py-3 bg-blue-500/20 text-blue-300 font-bold rounded-2xl border border-blue-500/30 hover:bg-blue-500/30 transition-all",children:[(0,a.jsx)(u.A,{size:18}),k("export")]})})]}),(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-xl rounded-[2rem] border border-white/10 overflow-hidden shadow-2xl",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-white/10 flex items-center justify-between bg-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-emerald-500/20 rounded-xl",children:(0,a.jsx)(g.A,{className:"w-5 h-5 text-emerald-400"})}),(0,a.jsx)("h3",{className:"font-black text-lg",children:s("recordTitle")})]}),(0,a.jsx)("span",{className:"px-4 py-1.5 bg-white/10 rounded-full text-[10px] font-black uppercase tracking-widest text-slate-400",children:s("invoicesFound",{count:M.length})})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-right",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-white/5 border-b border-white/5",children:[(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s("invoiceNumber")}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s("customer")}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:k("date")}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:k("amount")}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:k("tax")}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:k("status")}),(0,a.jsx)("th",{className:"px-6 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:k("actions")})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-white/5",children:M.length>0?M.map((e,t)=>{let l=e.invoice_status||e.status||"due";return(0,a.jsxs)(i.P.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.03*t},className:"hover:bg-white/5 transition-colors group",children:[(0,a.jsx)("td",{className:"px-6 py-5",children:(0,a.jsx)("span",{className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg text-xs font-black border border-emerald-500/20",children:e.invoice_number})}),(0,a.jsx)("td",{className:"px-6 py-5",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-9 w-9 rounded-xl bg-white/5 flex items-center justify-center text-slate-400 group-hover:bg-emerald-500/20 group-hover:text-emerald-400 transition-all",children:(0,a.jsx)(f.A,{size:16})}),(0,a.jsx)("span",{className:"font-bold text-sm text-slate-200 truncate max-w-[150px]",children:e.client_name||k("notSpecified")})]})}),(0,a.jsx)("td",{className:"px-6 py-5",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-400 font-bold",children:[(0,a.jsx)(w.A,{size:14,className:"text-slate-500"}),e.issue_date]})}),(0,a.jsx)("td",{className:"px-6 py-5",children:(0,a.jsxs)("div",{className:"flex items-baseline gap-1 text-white",children:[(0,a.jsx)("span",{className:"text-lg font-black",children:parseFloat(String(e.total_amount)).toLocaleString()}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:k("sar")})]})}),(0,a.jsx)("td",{className:"px-6 py-5",children:(0,a.jsx)("span",{className:"text-sm font-bold text-emerald-400",children:parseFloat(String(e.tax_amount)).toLocaleString()})}),(0,a.jsx)("td",{className:"px-6 py-5 text-center",children:"paid"===l?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-emerald-500/10 text-emerald-400 text-[10px] font-black rounded-full border border-emerald-500/20",children:[(0,a.jsx)(n.A,{size:12}),s("paidStatus")]}):"draft"===l?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-white/10 text-slate-400 text-[10px] font-black rounded-full border border-white/10",children:[(0,a.jsx)(c.A,{size:12}),s("draftStatus")]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-amber-500/10 text-amber-400 text-[10px] font-black rounded-full border border-amber-500/20",children:[(0,a.jsx)(d.A,{size:12}),s("dueStatus")]})}),(0,a.jsx)("td",{className:"px-6 py-5",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(A(),{href:"/sales-invoices/".concat(e.id),children:(0,a.jsx)("button",{className:"h-9 w-9 rounded-xl bg-blue-500/10 text-blue-400 flex items-center justify-center hover:bg-blue-500 hover:text-white transition-all shadow-lg active:scale-95",title:k("view"),children:(0,a.jsx)(j.A,{size:16})})}),"due"===l&&(0,a.jsxs)("button",{onClick:()=>B(e.id,l),disabled:T===e.id,className:"h-9 px-4 rounded-xl bg-emerald-500/10 text-emerald-400 font-black text-xs flex items-center gap-2 hover:bg-emerald-500 hover:text-white transition-all active:scale-95 disabled:opacity-50",children:[T===e.id?(0,a.jsx)(N.A,{size:14,className:"animate-spin"}):(0,a.jsx)(v.A,{size:14}),s("pay")]}),"paid"===l&&(0,a.jsxs)("button",{onClick:()=>B(e.id,l),disabled:T===e.id,className:"h-9 px-4 rounded-xl bg-amber-500/10 text-amber-400 font-black text-xs flex items-center gap-2 hover:bg-amber-500 hover:text-white transition-all active:scale-95 disabled:opacity-50",children:[T===e.id?(0,a.jsx)(N.A,{size:14,className:"animate-spin"}):(0,a.jsx)(d.A,{size:14}),s("return")]}),(0,a.jsx)("button",{onClick:()=>J(e.id,l),disabled:T===e.id,className:"h-9 w-9 rounded-xl bg-rose-500/10 text-rose-400 flex items-center justify-center hover:bg-rose-500 hover:text-white transition-all shadow-lg active:scale-95 disabled:opacity-50",title:k("delete"),children:T===e.id?(0,a.jsx)(N.A,{size:16,className:"animate-spin"}):(0,a.jsx)(y.A,{size:16})})]})})]},e.id)}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-20 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 opacity-40",children:[(0,a.jsx)(g.A,{size:64,className:"text-slate-400"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xl font-black text-slate-300",children:s("noInvoices")}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:s("startByCreating")})]})]})})})})]})})]})]}),(0,a.jsx)("div",{className:"absolute -bottom-24 -right-24 w-96 h-96 bg-emerald-500/10 rounded-full blur-[100px] pointer-events-none"}),(0,a.jsx)("div",{className:"absolute -top-24 -left-24 w-96 h-96 bg-blue-500/10 rounded-full blur-[100px] pointer-events-none"})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-[10px] font-black text-slate-500 uppercase tracking-widest pt-4 opacity-60",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{size:10,className:"text-emerald-500"}),(0,a.jsx)("span",{children:s("zatcaCompliant")})]}),(0,a.jsxs)("span",{children:[k("allRightsReserved")||"All Rights Reserved"," \xa9 ",new Date().getFullYear()]})]})]})}},26589:(e,t,s)=>{Promise.resolve().then(s.bind(s,16961))},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2821),l=s(75889);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}}},e=>{e.O(0,[977,4909,2619,7427,3884,8441,1255,7358],()=>e(e.s=26589)),_N_E=e.O()}]);