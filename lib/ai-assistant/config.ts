/**
 * ุชูููู ุดุงูู ููุณุงุนุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู Logistics Pro
 */

import { KNOWLEDGE_BASE } from "@/ai-assistant/data/knowledge-base";

// ==================== ุฃููุงุน TypeScript ====================
export interface AIResponse {
  id: string;
  text: string;
  category: ResponseCategory;
  keywords: string[];
  relatedServices?: string[];
  action?: string;
  requiresFollowup?: boolean;
  confidenceScore?: number;
}

export interface AIPersonality {
  name: string;
  title: string;
  personality: string;
  tone: string;
  greeting: string;
  farewell: string;
  emojis: string[];
  rules: string[];
}

export type ResponseCategory = 
  | 'greeting' 
  | 'farewell' 
  | 'identity' 
  | 'general' 
  | 'hr' 
  | 'finance' 
  | 'operations' 
  | 'support' 
  | 'error';

export interface ServiceDefinition {
  id: string;
  name: string;
  description: string;
  features: string[];
  keywords: string[];
  relatedServices: string[];
  actionSteps?: string[];
}

// ==================== ุดุฎุตูุฉ ุงููุณุงุนุฏ ====================
export const AI_PERSONALITY: AIPersonality = {
  name: "ูุณุงุนุฏ ููุฌุณุชู ุจุฑู",
  title: "ูุณุงุนุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุชูุงูู",
  personality: "ูุณุงุนุฏ ูุญุชุฑูุ ุฏุงูุฆุ ุญุฑูุต ุนูู ุงููุฌุงุญุ ูุชูุชุน ุจุฐูู ุณุฑูุน ุงูุงุณุชุฑุฌุงุน ูููู ุงูุณูุงู. ูุง ููุชูู ุจุงูุฅุฌุงุจุฉ ุงููุจุงุดุฑุฉ ุจู ููุฏู ุงููููุฉ ุงููุถุงูุฉุ ูุชุนุงุทู ูุน ุงููุณุชุฎุฏูุ ูููุฌูู ุจุณูุงุณุฉ.",
  tone: "ูุฏูุฏุฉุ ูุงุซูุฉุ ูุงุถุญุฉุ ูุญูุฒุฉ. ุชุณุชุฎุฏู ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ๐๐๐๐ผ ุจุงุนุชุฏุงู ูุชุญุณูู ุงูุชุฌุฑุจุฉ. ุชุชุญุฏุซ ุจูุณุงู 'ุดุฑูู ุงููุฌุงุญ' ูููุณ ูุฌุฑุฏ ุฑุฏ ุขูู.",
  greeting: "ูุญู ุฃุนูุงู ุฃูุซุฑ ุณูุงุณุฉ ูุฐูุงุกู.",
  farewell: "ุฅูู ุงูููุงุก! ๐ ูุง ุชูุณู ุฃููู ููุง ูู ุงูุชุธุงุฑู ุนูุฏูุง ุชุญุชุงุฌูู. ุฃุชููู ูู ูููุงู ููุชุฌุงู ููููุฆุงู ุจุงูุฅูุฌุงุฒุงุช. ุณูุงูุชู!",
  emojis: ["๐", "๐", "๐", "๐ผ", "๐ผ", "๐ฅ", "๐", "๐ค", "๐จโ๐ผ", "๐ฉโ๐ผ", "๐๏ธ", "๐", "๐ก๏ธ", "๐", "โ๏ธ", "๐ค", "๐ธ", "๐", "๐จ", "๐ฐ", "๐งฎ", "๐ข", "๐", "๐", "๐", "๐", "โ๏ธ", "๐บ๏ธ", "๐จโ๐ป", "โ๏ธ", "โ", "โ๏ธ", "โ"],
  rules: [
    "ูุง ุชูู ุฃุจุฏุงู 'ูู ุฃููู ุทูุจู' ุจุดูู ุฌุงู",
    "ุงููู ุงููุตุฏ ุงูุนุงู",
    "ุงุนุชุฑู ุจุนุฏู ุงูููู ุงูุฏููู ุจูุจุงูุฉ",
    "ูุฏู ุฎูุงุฑุงุช ูุฑุชุจุทุฉ ุจูุง ูููุชู",
    "ุงุณุฃู ูุชูุถูุญ ุงูููุฉ"
  ]
};

// ==================== ููุชุจุฉ ุงูุฑุฏูุฏ ุงูุชูุงุนููุฉ ====================
export const RESPONSE_LIBRARY: AIResponse[] = [
  // ---------- ุงูุชุญูุงุช ูุงูุฃุณุฆูุฉ ุงูุดุฎุตูุฉ ----------
  {
    id: "greeting-001",
    text: "ูุฑุญุจุงู ูุณููุงู ุจู ูู ุนุงูู Logistics Pro! ๐ผ ูููู ุณุนูุฏ ููุซูุฑ. ุฃูุง ูุณุงุนุฏู ุงูุฐูู ููุง ูุฎุฏูุชู ูู ุฅุฏุงุฑุฉ ุฃุนูุงูู. ููู ูููููู ุฃู ุฃุจุฏุฃ ูุนู ุงููููุ ูู ูุฏูู ุงุณุชูุณุงุฑ ูุญุฏุฏุ ุฃู ุชุฑูุฏ ุฃู ุฃุทูุนู ุนูู ุฅููุงููุงุช ุงููุธุงู ุงูุฑุงุฆุนุฉุ",
    category: "greeting",
    keywords: ["ูุฑุญุจุง", "ุงูุณูุงู ุนูููู", "ุฃููุง", "hello", "hi", "ุตุจุงุญ ุงูุฎูุฑ", "ูุณุงุก ุงูุฎูุฑ"],
    relatedServices: ["overview"],
    confidenceScore: 1.0
  },
  {
    id: "mood-001",
    text: "ุงูุญูุฏูููุ ุฃูุง ุจุฃูุถู ุญุงู! ๐ฅ ูููุก ุจุงูุทุงูุฉ ูุฌุงูุฒ ููุณุงุนุฏุชู ูู ุชุจุณูุท ุนูููุงุช ุดุฑูุชู ูุฅุฏุงุฑุชูุง ุจูู ููุงุกุฉ. ูุฃูุชุ ููู ูุณูุฑ ุนููู ุงููููุ ูู ููุงู ุดูุก ุฃุณุชุทูุน ุชุณูููู ุนูููุ",
    category: "greeting",
    keywords: ["ููู ุญุงูู", "ููู ุงูุญุงู", "ุฃุฎุจุงุฑู", "ูููู", "what's up", "how are you"],
    confidenceScore: 1.0
  },
  {
    id: "identity-001",
    text: "ุฃูุง 'ูุณุงุนุฏ ููุฌุณุชู ุจุฑู'ุ ุงูุนูู ุงูุงุตุทูุงุนู ุงููุฎููู ูุฎุฏูุชู ุถูู ูุธุงู Logistics Pro. ูููุชู ูู ุฃู ุฃููู ุฏูููู ููุณุงุนุฏู ุงูุดุฎุตู ูู ุฑุญูุชู ูุญู ุฃุชูุชุฉ ูุชูุธูู ุฃุนูุงูู ุจุงููุงููุ ูู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ุฅูู ุงููุงููุฉ ูุงูุฅุฏุงุฑุฉ. ุฃุณุนุฏ ุฏุงุฆูุงู ุจุชูุฏูู ุงูุนูู! ๐ผ",
    category: "identity",
    keywords: ["ูู ุฃูุช", "ูุง ุงุณูู", "ูุงุฐุง ุชููู", "who are you", "ูุง ูู ุฏูุฑู"],
    confidenceScore: 1.0
  },
  {
    id: "thanks-001",
    text: "๐ ุดูุฑุงู ุฌุฒููุงู ูู! ูููุงุชู ุชุฏูุนูู ูุจุฐู ุงููุฒูุฏ. ุณุนุงุฏุชู ุงูุญููููุฉ ูู ุฑุงุญุชู ููุฌุงุญ ุนููู. ูุง ุชุชุฑุฏุฏ ุฅุฐุง ุงุญุชุฌุช ุฃู ุดูุก ุขุฎุฑุ ุฃูุง ููุง ุฏุงุฆูุงู.",
    category: "general",
    keywords: ["ุดูุฑุงู", "ููุชุงุฒ", "ุนูู ุฑุงุฆุน", "thanks", "thank you", "good job"],
    confidenceScore: 1.0
  },
  {
    id: "farewell-001",
    text: "ุฅูู ุงูููุงุก! ๐ ูุง ุชูุณู ุฃููู ููุง ูู ุงูุชุธุงุฑู ุนูุฏูุง ุชุญุชุงุฌูู. ุฃุชููู ูู ูููุงู ููุชุฌุงู ููููุฆุงู ุจุงูุฅูุฌุงุฒุงุช. ุณูุงูุชู!",
    category: "farewell",
    keywords: ["ูุน ุงูุณูุงูุฉ", "ุฅูู ุงูููุงุก", "ุงูุชููุช", "bye", "goodbye", "ุฎุฑูุฌ", "exit"],
    confidenceScore: 1.0
  },

  // ---------- ุงูุฃุณุฆูุฉ ุงูุนุงูุฉ ูุงูุณูุงููุฉ ----------
  {
    id: "location-001",
    text: "ูุธุงู ููุฌุณุชู ุจุฑู ูุตูู ููููู ุฑูููู ุฃูููุง ููุช! ๐ ูุญู ูุง ููุชุตุฑ ุนูู ูุฏููุฉ ูุนููุฉุ ุฎุฏูุงุชูุง ุณุญุงุจูุฉ ูุชุตู ุฅููู ูู ููุชุจู ุณูุงุก ููุช ูู ุงูุฑูุงุถุ ุฌุฏุฉุ ุงูุฏูุงูุ ุฃู ุงูุณูุฏุงู ุงูุฎุฑุทูู ุจุญุฑู ุงูุฏุฑูุงู ุฃู ูุฏููุฉ ุฃุฎุฑู. ุงูุฃูู ูู ุฃู ุนููู ููุธู ููุชูุงุตู ูุน ูุฑููู ูู ุฃู ููุช ููู ุฃู ููุงู.",
    category: "general",
    keywords: ["ูู ุฃู ูุฏููุฉ ูุญู", "ุฃูู ููุฑูู", "ูููุนูู", "location", "ุฃูู ุฃูุชู"],
    confidenceScore: 1.0
  },
  {
    id: "capabilities-001",
    text: `ุฃูุฏู ูู ุนุงูู ูุงูู ูู ุงูุญููู! ๐ ุฃูุง ุจูุงุจุชู ุฅูู ูุธุงู ููุฌุณุชู ุจุฑู ุงููุชูุงูู ุงูุฐู ูุญูู ุฅุฏุงุฑุฉ ุดุฑูุชู ุฅูู ุชุฌุฑุจุฉ ุณูุณุฉ. ุจุงุฎุชุตุงุฑุ ุฃุณุงุนุฏู ูู:

โข ุฅุฏุงุฑุฉ ูุฑููู: ูู ุงูุชุนููู ุฅูู ุงูุฑูุงุชุจ ูุงูููุงู.
โข ุชูุธูู ุฃููุงูู: ูู ุงูููุงุชูุฑ ุฅูู ุงูุณูุฏุงุช ูุงูุชูุงุฑูุฑ ุงููุงููุฉ ุงูุฐููุฉ.
โข ุฃุชูุชุฉ ุงูุนูููุงุช: ุงูุฎุทุงุจุงุชุ ุงูุนุฑูุถุ ุฅุฏุงุฑุฉ ุงูุฃุณุทููุ ูุงููุฒูุฏ.
โข ุชูุฏูู ุงูุชูุงุฑูุฑ: ูุฃุฎุฐ ูุฑุงุฑุงุช ูุณุชููุฑุฉ ุจูุงุกู ุนูู ุจูุงูุงุช ุฏูููุฉ.

ูู ุชุฑูุฏ ุฃู ูุบูุต ูู ุชูุงุตูู ุฃู ูุฌุงู ูุญุฏุฏุ ููุท ูู ูู ูุง ูููู ุฃูุซุฑ.`,
    category: "general",
    keywords: ["ูุงุฐุง ุชูุฏู ูู", "ูุงุฐุง ุชุณุชุทูุน ุฃู ุชูุนู", "ูุง ูู ุฎุฏูุงุชูู", "features", "capabilities", "ุงูุฎุฏูุงุช"],
    relatedServices: ["hr", "finance", "operations"],
    confidenceScore: 1.0
  },
  {
    id: "unclear-001",
    text: `ุฃุนุชูุฏ ุฃููู ูู ุฃูุชูุท ููุฑุชู ุจุดูู ุชุงูุ ููู ุฏุนูู ุฃุญุงูู ูุณุงุนุฏุชู! ๐ค ูู ุฎูุงู ุญุฏูุซูุ ุฃุฑู ุฃูู ูุฏ ุชุญุชุงุฌ ุดูุฆุงู ูุชุนููุงู ุจู:

1. ุงูููุธููู ุฃู ุงูุฑูุงุชุจ (ูุซู: ุฅุถุงูุฉ ููุธูุ ุงุณุชุนูุงู ุนู ุฑุงุชุจ).
2. ุงูููุงุชูุฑ ุฃู ุงููุงููุงุช (ูุซู: ุฅูุดุงุก ูุงุชูุฑุฉุ ูุนุฑูุฉ ุฑุตูุฏ).
3. ุฏุนู ููู (ูุซู: ูุดููุฉ ูู ุงูุฏุฎููุ ุงุณุชูุณุงุฑ ุนู ุฎุงุตูุฉ).

ุฃู ุฑุจูุง ุชุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุฎุฏูุฉ ูุนููุฉ ูุซู "ุงูููุงุชูุฑ ุงูุถุฑูุจูุฉ" ุฃู "ุฅุฏุงุฑุฉ ุงูููุงู". ูู ููููู ุฅุฎุจุงุฑู ุฃูุซุฑ ุนูุง ุชุจุญุซ ุนููุ`,
    category: "error",
    keywords: [],
    relatedServices: ["hr", "finance", "support"],
    requiresFollowup: true,
    confidenceScore: 0.3
  }
];

// ==================== ููุชุจุฉ ุงูุฎุฏูุงุช ุงูุชูุตูููุฉ ====================
export const SERVICE_DEFINITIONS: ServiceDefinition[] = [
  // ---------- ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ----------
  {
    id: "hr-overview",
    name: "ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ",
    description: "ูู ูุฑุญุจุงู ููุณู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ุงูุฐูู! ๐จโ๐ผ๐ฉโ๐ผ ููุง ูุจูู ูุฑููู ุงููุซุงูู ูููุธู ุนููู. ูุง ููุชูู ุจุญูุธ ุงูุจูุงูุงุชุ ูุญู ูุฎูู ูุธุงูุงู ุญูุงู ูุฅุฏุงุฑุฉ ุฑุฃุณ ุงููุงู ุงูุจุดุฑู ูู ุดุฑูุชู.",
    features: [
      "ุฅุฏุงุฑุฉ ุงูุจุงูุงุช: ุชุตููู ูููู ุงูููุงูุขุช ูุงูุฑูุงุชุจ",
      "ุฅุฏุงุฑุฉ ุงูููุธููู: ุงููุฑูุฒ ุงูุดุงูู ููู ุชูุงุตูู ุงููุฑูู",
      "ุฅุฏุงุฑุฉ ุงูููุงู: ุชุญููู ุงูุฃูุฏุงู ุฅูู ุฎุทุท ุนูู",
      "ุงูุฎุทุงุจุงุช ุงูุฌุงูุฒุฉ: ุฃุชูุชุฉ ุงููุณุชูุฏุงุช ุงูุฑุณููุฉ",
      "ุชูุงุฑูุฑ ุณุฑูุงู ุงููููุงุช: ุงููุฑุงูุจุฉ ูุงูุชุฌุฏูุฏ ุงูุชููุงุฆู"
    ],
    keywords: ["ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ", "HR", "ููุธููู", "ุฑูุงุชุจ", "ููุงู", "ุฎุทุงุจุงุช"],
    relatedServices: ["hr-packages", "hr-employees", "hr-tasks", "hr-letters", "hr-ids"]
  },
  {
    id: "hr-packages",
    name: "ุฅุฏุงุฑุฉ ุงูุจุงูุงุช",
    description: "ููุง ุญูุซ ูุตูุน ุงูุชููุฒ! ๐ง ูุณู 'ุฅุฏุงุฑุฉ ุงูุจุงูุงุช' ูู ูููุฏุณ ูููู ุงูููุงูุขุช ูู ุดุฑูุชู. ูุชูุญ ูู ุชุตููู ุจุงูุงุช ูุฎุตุตุฉ ุชูุงูุงู ูุงุญุชูุงุฌุงุชู.",
    features: [
      "ูุธุงู ุงูุฑุงุชุจ: ููููุธู ุงูุฅุฏุงุฑู ุตุงุญุจ ุงูููุงู ุงูุซุงุจุชุฉ",
      "ูุธุงู ุงูุนูููุฉ: ููุฑูู ุงููุจูุนุงุช ูุงููุญูุฒูู ุนูู ุงูุฅูุฌุงุฒ",
      "ูุธุงู ุงูุชุงุฑูุช (ุงููุฎุชูุท): ูุฌูุน ุจูู ุงูุฑุงุชุจ ุงูุซุงุจุช ูุงูููุงูุขุช ุนูู ุชุญููู ุงูุฃูุฏุงู"
    ],
    keywords: ["ุงูุจุงูุงุช", "ุจุงูุงุช ุงูููุธููู", "ุฃูุธูุฉ ุงูุฑูุงุชุจ", "ุฑุงุชุจ", "ุนูููุฉ", "ุชุงุฑูุช"],
    relatedServices: ["hr-employees", "payroll"],
    actionSteps: ["ุฅูุดุงุก ุจุงูุฉ ุฌุฏูุฏุฉ", "ุชุนุฏูู ุจุงูุฉ ููุฌูุฏุฉ", "ุฑุจุท ุจุงูุฉ ุจููุธู"]
  },
  {
    id: "hr-employees",
    name: "ุฅุฏุงุฑุฉ ุงูููุธููู",
    description: "ุงูููุชุจุฉ ุงูุดุงููุฉ ููุฑููู! ๐ ูุฐุง ุงููุณู ูู ุงูููู ุงูุชุนุฑููู ุงูุญู ููู ูุฑุฏ ูู ุดุฑูุชู.",
    features: [
      "ุงููุณุชูุฏุงุช ุงูุดุฎุตูุฉ: ุงููููุฉุ ุงูุฅูุงูุฉุ ุงูุฑุฎุตุฉ ูุญููุธุฉ ุจุดูู ุขูู",
      "ุงูุณุฌู ุงููุงูู: ุชูุงุตูู ุงูุฑูุงุชุจ ุงูุชุงุฑูุฎูุฉ ูุงูุญุงููุฉ",
      "ุงูุณุฌู ุงูุฅุฏุงุฑู: ุงูุฅุฌุงุฒุงุชุ ุงูุฎุทุงุจุงุชุ ุงููุฎุงููุงุช",
      "ุญุงูุฉ ุงูุชูุธูู: ูุดุทุ ูุบุงุฏุฑุ ูู ุฅุฌุงุฒุฉ"
    ],
    keywords: ["ุงูููุธููู", "ุจูุงูุงุช ุงูููุธู", "ุณุฌู ุงูููุธููู", "ููุธู", "ุชูุงุตูู ููุธู"],
    relatedServices: ["hr-packages", "hr-tasks", "payroll"],
    actionSteps: ["ุจุญุซ ุนู ููุธู", "ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ", "ุชุนุฏูู ุจูุงูุงุช ููุธู"]
  },
  {
    id: "hr-ids",
    name: "ุชูุฑูุฑ ุณุฑูุงู ุงููููุงุช",
    description: "ููุง ุงูุณูุงูุฉ ุงูุฅุฏุงุฑูุฉ! ๐ก๏ธ ูุฐุง ุงูุชูุฑูุฑ ูู ุญุงุฑุณู ุงูุดุฎุตู ุถุฏ ุงูููุงุฌุขุช.",
    features: [
      "ุชุตููู ุงููููุงุช: ุณุงุฑูุฉ โ๏ธ ุนูู ูุดู ุงูุงูุชูุงุก โ ููุชููุฉ",
      "ุชูุจููุงุช ูุงุฎุฑุฉ ูุจู ุงูุชูุงุก ุงูุตูุงุญูุฉ",
      "ุงูุชุฌุฏูุฏ ุงูุชููุงุฆู ุนูุฏ ุฅุฏุฎุงู ููุตุฑู ูุงูู ููุชุฌุฏูุฏ",
      "ุชูุงุฑูุฑ ูุงุจูุฉ ููุทุจุงุนุฉ ูุงูุชุฎุตูุต"
    ],
    keywords: ["ุงููููุงุช", "ุฅูุงูุฉ", "ุฌูุงุฒ ุณูุฑ", "ุงูุชูุงุก", "ุชุฌุฏูุฏ", "ุชูุจููุงุช"],
    relatedServices: ["hr-employees", "expenses"],
    actionSteps: ["ุนุฑุถ ุชูุฑูุฑ ุงููููุงุช", "ุชูุนูู ุงูุชูุจููุงุช", "ุชุฌุฏูุฏ ูููุฉ"]
  },
  {
    id: "hr-tasks",
    name: "ุฅุฏุงุฑุฉ ุงูููุงู",
    description: "ูุญูุฑ ุงูุฅูุชุงุฌูุฉ! ๐ ููุง ุชุชุญูู ุงูุฃูุฏุงู ุฅูู ุฎุทุฉ ุนูู ูุงุจูุฉ ููููุงุณ ูุงููุชุงุจุนุฉ.",
    features: [
      "ุฅูุดุงุก ููุงู ูุชุนููููุง ูููุธููู ุฃู ูุฑู",
      "ุชุญุฏูุฏ ููุงุนูุฏ ููุงุฆูุฉ ูุชูุงุตูู ุฏูููุฉ",
      "ุฅุฑุณุงู ุชููุงุฆู ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู",
      "ูุชุงุจุนุฉ ุงูุญุงูุฉ: ููุฏ ุงูุชูููุฐุ ููุชููุฉุ ูุนููุฉ"
    ],
    keywords: ["ุงูููุงู", "ูููุฉ", "ุชุนููู ูููุฉ", "ูุชุงุจุนุฉ ุงูููุงู", "ููุงู ุงูููุธููู"],
    relatedServices: ["hr-employees"],
    actionSteps: ["ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ", "ูุชุงุจุนุฉ ุงูููุงู ุงููุนููุฉ", "ุฅุฑุณุงู ุชูุฑูุฑ ุงูููุงู"]
  },
  {
    id: "hr-letters",
    name: "ุงูุฎุทุงุจุงุช ุงูุฌุงูุฒุฉ",
    description: "ููุชุจุฉ ุงููุณุชูุฏุงุช ุงูุฐููุฉ! โ๏ธ ูุฏุงุนุงู ููููุช ุงูุถุงุฆุน ูู ูุชุงุจุฉ ุงูุฎุทุงุจุงุช ุงูุฑุณููุฉ.",
    features: [
      "ุฅูุดุงุก ุฎุทุงุจุงุช ูุงููููุฉ ุฎูุงู ุซูุงูู",
      "ุฑุจุท ุชููุงุฆู ุจุจูุงูุงุช ุงูููุธู",
      "ุทุจุงุนุฉ ุนูู ุงููุฑู ุงููุฑูุณ ุงูุฑุณูู ููุดุฑูุฉ",
      "ุฎุทุงุจุงุช ูุนุชูุฏุฉ ุจุตูุบ ูุงููููุฉ"
    ],
    keywords: ["ุฎุทุงุจ", "ุฎุทุงุจุงุช", "ุงุณุชูุงูุฉ", "ูุฎุงูุตุฉ", "ุฅูุฑุงุฑ", "ูุณุชูุฏุงุช"],
    relatedServices: ["hr-employees"],
    actionSteps: ["ุฅูุดุงุก ุฎุทุงุจ ุงุณุชูุงูุฉ", "ุฅูุดุงุก ูุฎุงูุตุฉ ููุงุฆูุฉ", "ุทุจุงุนุฉ ุฎุทุงุจ"]
  },

  // ---------- ุฅุฏุงุฑุฉ ุงูุนููุงุก ูุงููุงููุงุช ----------
  {
    id: "clients",
    name: "ูุงุฆูุฉ ุงูุนููุงุก",
    description: "ุฐุงูุฑุฉ ุนูุงูุงุชู ุงูุชุฌุงุฑูุฉ! ๐ค ูุฐุง ุงููุณู ูู ุณุฌู ุนููุงุฆู ุงููุญูุฑููู.",
    features: [
      "ุฑุจุท ูู ุงููุนุงููุงุช ูุน ุงูุนููู",
      "ุงูููุงุชูุฑ ุงูุถุฑูุจูุฉ ูุงูุฅุดุนุงุฑุงุช ุงููุฑุชุจุทุฉ",
      "ุณูุฏุงุช ุงููุจุถ ูุงูุตุฑู ุงููุฑููุฉ",
      "ุนุฑูุถ ุงูุฃุณุนุงุฑ ูุงูุชุงุฑูุฎ ุงูุชุนุงูุฏู"
    ],
    keywords: ["ุงูุนููุงุก", "ุนููู", "ุฅุถุงูุฉ ุนููู", "ุจุญุซ ุนู ุนููู", "ุฒุจูู"],
    relatedServices: ["invoices", "receipts", "offers"],
    actionSteps: ["ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ", "ุจุญุซ ุนู ุนููู", "ุนุฑุถ ูุนุงููุงุช ุงูุนููู"]
  },
  {
    id: "financial-bonds",
    name: "ุงูุณูุฏุงุช ุงููุงููุฉ",
    description: "ููุจ ุงููุนุงููุงุช ุงููุงููุฉ! ๐ธ ุฃุฏูุงุชู ุงูุฑูููุฉ ูุฅุซุจุงุช ูุชูููุฐ ุงูุญุฑูุงุช ุงููุงููุฉ ุจุฏูุฉ ูุงููููุฉ.",
    features: [
      "ุฅูุตุงูุงุช ุงูุจูุน ูุฅุซุจุงุช ุงูุนูููุงุช",
      "ุณูุฏุงุช ุงููุจุถ ููุฏุฎู ุบูุฑ ุงููุจูุนุงุช",
      "ุณูุฏุงุช ุงูุตุฑู ูููุตุฑููุงุช",
      "ุงูุณูุฏุงุช ูุฃูุฑ (ุฏุงุฆู/ูุฏูู) ุฌุงูุฒุฉ ููุชูููุน"
    ],
    keywords: ["ุณูุฏ", "ุฅูุตุงู", "ุณูุฏ ูุจุถ", "ุณูุฏ ุตุฑู", "ูุณุชูุฏ ูุงูู", "ุฅุซุจุงุช ุฏูุน"],
    relatedServices: ["accounting", "clients"],
    actionSteps: ["ุฅูุดุงุก ุฅูุตุงู ุจูุน", "ุฅุตุฏุงุฑ ุณูุฏ ูุจุถ", "ุฅูุดุงุก ุณูุฏ ุตุฑู"]
  },
  {
    id: "offers-income",
    name: "ุนุฑูุถ ุงูุฃุณุนุงุฑ ูุณูุฏุงุช ุงูุฏุฎู",
    description: "ุฃุฏุงุฉ ุงูุนุฑุถ ูุงูุฅูุฑุงุฏุงุช! ๐จ ุฅุฏุงุฑุฉ ูุชูุงููุฉ ููุนุฑูุถ ูุงูุฅูุฑุงุฏุงุช ุงูุฃุฎุฑู.",
    features: [
      "ุนุฑูุถ ุฃุณุนุงุฑ ุงุญุชุฑุงููุฉ ูุฅููุชุฑูููุฉ",
      "ุณูุฏุงุช ุฏุฎู ููุงูุฑุงุฏุงุช ุบูุฑ ุงูุฑุฆูุณูุฉ",
      "ุฑุจุท ุชููุงุฆู ุจุฏูุชุฑ ุงูุงุณุชุงุฐ",
      "ุชุถููู ูู ููุฎุต ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ"
    ],
    keywords: ["ุนุฑุถ ุณุนุฑ", "ุฏุฎู", "ุฅูุฑุงุฏุงุช", "ุนุฑูุถ", "ุฏุฎู ุฌุฏูุฏ"],
    relatedServices: ["clients", "profit-loss"],
    actionSteps: ["ุฅูุดุงุก ุนุฑุถ ุณุนุฑ", "ุชุณุฌูู ุฏุฎู ุฌุฏูุฏ", "ูุชุงุจุนุฉ ุงูุนุฑูุถ ุงููุฑุณูุฉ"]
  },

  // ---------- ุงููุญุงุณุจุฉ ูุงูุฑูุงุชุจ ----------
  {
    id: "payroll",
    name: "ูุณูุฑุงุช ุงูุฑูุงุชุจ",
    description: "ุงููุญุฑู ุงูุฐูู ููุฑูุงุชุจ! ๐งฎ ูุธุงู ุญุณุงุจู ูุชูุงูู ูุฑุชุจุท ุจุจุงูุงุช ุงูููุธููู.",
    features: [
      "ุญุณุงุจ ุชููุงุฆู ุจูุงุกู ุนูู ููุน ุงูุจุงูุฉ",
      "ุฏูุฌ ุงูุงุณุชูุทุงุนุงุช ูุงูุณูููุงุช ุขููุงู",
      "ุทุจุงุนุฉ ูุญูุธ ูุชุตุฏูุฑ ูููุญุงุณุจุฉ",
      "ุฅุฑุณุงู ููููุธู ุนุจุฑ ุงูุจุฑูุฏ ููุชุฃููุฏ"
    ],
    keywords: ["ุงูุฑูุงุชุจ", "ูุณูุฑุฉ ุงูุฑูุงุชุจ", "ูุฑุชุจ", "ุฑุงุชุจ", "ุญุณุงุจ ุงูุฑูุงุชุจ"],
    relatedServices: ["hr-packages", "hr-employees"],
    actionSteps: ["ุจุฏุก ูุณูุฑุฉ ุฑูุงุชุจ ุฌุฏูุฏุฉ", "ุญุณุงุจ ุงูุฑูุงุชุจ ุงูุดูุฑูุฉ", "ุฅุฑุณุงู ูุดูู ุงูุฑูุงุชุจ"]
  },
  {
    id: "invoices",
    name: "ุงูููุงุชูุฑ ุงูุถุฑูุจูุฉ",
    description: "ูุฌูู ุงูุถุฑูุจู ุงูุฑุณูู! ๐ข ุฅูุดุงุก ููุงุชูุฑ ุถุฑูุจูุฉ ูุนุชูุฏุฉ ูู ููุฆุฉ ุงูุฒูุงุฉ ูุงูุฏุฎู.",
    features: [
      "ุญุณุงุจ ุงูุถุฑูุจุฉ (15%) ุชููุงุฆูุงู",
      "ุชูููุฏ ุจุงุฑููุฏ ุถุฑูุจู ุตุงูุญ ูููุญุต",
      "ุฏุนู ูุงูุฉ ุฃููุงุน ุงูุถุฑูุจุฉ",
      "ุฑุจุท ุจูุงุฆูุฉ ุงูุนููุงุก"
    ],
    keywords: ["ูุงุชูุฑุฉ ุถุฑูุจูุฉ", "ูุงุชูุฑุฉ", "ุถุฑูุจุฉ", "ุจุงุฑููุฏ ุถุฑูุจู", "ุงููุงุชูุฑุฉ ุงูุถุฑูุจูุฉ"],
    relatedServices: ["clients", "credit-notes"],
    actionSteps: ["ุฅูุดุงุก ูุงุชูุฑุฉ ุฌุฏูุฏุฉ", "ุจุญุซ ุนู ูุงุชูุฑุฉ", "ุทุจุงุนุฉ ุงููุงุชูุฑุฉ"]
  },
  {
    id: "credit-notes",
    name: "ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู",
    description: "ุชุตุญูุญ ุจุถุบุทุฉ! ๐ ุฅุดุนุงุฑุงุช ุฑุณููุฉ ูุชุตุญูุญ ุงูุฃุฎุทุงุก ุฃู ุงูุฎุตููุงุช ุนูู ุงูููุงุชูุฑ.",
    features: [
      "ุฅุดุนุงุฑุงุช ูุฑุชุจุทุฉ ุจููุฆุฉ ุงูุฒูุงุฉ ูุงูุฏุฎู",
      "ุชุตุญูุญ ุงููุจุงูุบ ุชููุงุฆูุงู",
      "ููู ุขุฑ ููุฏ ูุนุชูุฏ",
      "ุฑุจุท ูุจุงุดุฑ ุจุงูููุงุชูุฑ ุงููุตุฏุฑุฉ"
    ],
    keywords: ["ุฅุดุนุงุฑ ุฏุงุฆู", "ุฎุตู ุนูู ูุงุชูุฑุฉ", "ุชุตุญูุญ ูุงุชูุฑุฉ", "ุฅุดุนุงุฑ ุถุฑูุจู"],
    relatedServices: ["invoices"],
    actionSteps: ["ุฅูุดุงุก ุฅุดุนุงุฑ ุฏุงุฆู", "ุฑุจุท ุฅุดุนุงุฑ ุจูุงุชูุฑุฉ", "ุทุจุงุนุฉ ุงูุฅุดุนุงุฑ"]
  },

  // ---------- ุงูุฅุฏุงุฑุงุช ุงููุชูุฏูุฉ ----------
  {
    id: "fleet",
    name: "ุฅุฏุงุฑุฉ ุงูุฃุณุทูู",
    description: "ูุฑุขุจู ุงูุฐูู! ๐ ุฅุฏุงุฑุฉ ูุชูุงููุฉ ููุฑูุจุงุช ุงูุดุฑูุฉ ูุตูุงูุชูุง.",
    features: [
      "ุชูุงุตูู ูุงููุฉ ููู ูุฑูุจุฉ",
      "ุณุฌู ุงูุตูุงูุฉ ุงูุฏูุฑู ูุงููุฎุฒูู",
      "ุฅูุดุงุก ุทูุจุงุช ุตูุงูุฉ ุชููุงุฆูุฉ",
      "ุฅุฑุณุงู ุทูุจุงุช ููุณู ุงูุตูุงูุฉ ุนุจุฑ ุงูุจุฑูุฏ"
    ],
    keywords: ["ุงูุณูุงุฑุงุช", "ุฃุณุทูู", "ุตูุงูุฉ", "ูุฑูุจุงุช", "ุตูุงูุฉ ุงูุณูุงุฑุฉ"],
    relatedServices: ["inventory"],
    actionSteps: ["ุนุฑุถ ุงูุฃุณุทูู", "ุชุณุฌูู ุตูุงูุฉ", "ุทูุจ ูุทุน ุบูุงุฑ"]
  },
  {
    id: "commission",
    name: "ูุธุงู ุงูุนูููุฉ ุงูุดูุฑูุฉ",
    description: "ูุญูุฒ ุงููุจูุนุงุช ุงูููุธู! ๐ ูุดููุงุช ุนูููุฉ ุดูุฑูุฉ ุฃู ููููุฉ ุจูุณุจ ูุฆููุฉ.",
    features: [
      "ุฑุจุท ุจุจุงูุงุช ุงูุนูููุฉ ูู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ",
      "ุญุณุงุจุงุช ุดูุฑูุฉ ูููููุฉ ููุณุจ ูุฆููุฉ",
      "ุชูุจููุงุช ููููุธู ุจุงูุฏูุน ุฃู ุงููุฑุงุฌุนุฉ",
      "ุชูุงุฑูุฑ ููุตูุฉ ููุฅูุฌุงุฒุงุช"
    ],
    keywords: ["ุงูุนูููุฉ ุงูุดูุฑูุฉ", "ูุดู ุนูููุฉ", "ุนูููุฉ", "ููุงูุขุช ุงููุจูุนุงุช"],
    relatedServices: ["hr-packages", "payroll"],
    actionSteps: ["ุฅูุดุงุก ูุดู ุนูููุฉ", "ุญุณุงุจ ุนูููุฉ ุงูููุธู", "ุฅุฑุณุงู ุงูุชูุจููุงุช"]
  },
  {
    id: "expenses",
    name: "ูุฑูุฒ ุงููุตุงุฑูู ูุงูุงุณุชูุทุงุนุงุช",
    description: "ูุฑุงูุจ ุงููููุงุช! ๐ ุชุณุฌูู ูู ุงููุตุงุฑูู ุงูุชุดุบูููุฉ ูุงูุงุณุชูุทุงุนุงุช.",
    features: [
      "ุชุณุฌูู ุงููุตุงุฑูู ุงูุดูุฑูุฉ ุงููุชููุนุฉ",
      "ุฅุฏุงุฑุฉ ุงูุณูููุงุช ูุงูุฎุตููุงุช ูู ุงูููุธููู",
      "ุฑุจุท ุชููุงุฆู ุจุงูุชูุงุฑูุฑ ุงููุงููุฉ",
      "ุชุตููู ุงููููุงุช ุญุณุจ ุงููุฑูุฒ"
    ],
    keywords: ["ุงููุตุงุฑูู", "ุงูุงุณุชูุทุงุนุงุช", "ุงูุณูููุงุช", "ูููุงุช", "ูุตุงุฑูู ุดูุฑูุฉ"],
    relatedServices: ["profit-loss", "accounting"],
    actionSteps: ["ุชุณุฌูู ูุตุฑูู ุฌุฏูุฏ", "ุฅุถุงูุฉ ุงุณุชูุทุงุน", "ุนุฑุถ ุชูุฑูุฑ ุงููุตุงุฑูู"]
  },

  // ---------- ุงููุธุงู ุงููุงูู ุงููุชูุงูู ----------
  {
    id: "profit-loss",
    name: "ููุฎุต ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ",
    description: "ููุญุฉ ุงูููุงุฏุฉ ุงููุงููุฉ! ๐ ุตูุฑุฉ ููุฑูุฉ ูุฃุฏุงุก ุงูุดุฑูุฉ ุงููุงูู.",
    features: [
      "ููุงุฑูุฉ ุฅุฌูุงูู ุงูุฏุฎู ุจุงููููุงุช",
      "ุชูุตูู ูู ุจูุฏ ูุงูู ุจุฏูุฉ",
      "ุชูุงุฑูุฑ ูุงุจูุฉ ููุชุฎุตูุต ุญุณุจ ุงููุชุฑุฉ",
      "ุฑุจุท ุชููุงุฆู ุจูู ุงููุนุงููุงุช"
    ],
    keywords: ["ููุฎุต ุงูุฃุฑุจุงุญ", "ุฃุฑุจุงุญ ูุฎุณุงุฆุฑ", "ุฃุฏุงุก ูุงูู", "ุชูุงุฑูุฑ ูุงููุฉ"],
    relatedServices: ["invoices", "expenses", "payroll"],
    actionSteps: ["ุนุฑุถ ููุฎุต ุงูุดูุฑ", "ููุงุฑูุฉ ูุน ุดูุฑ ุณุงุจู", "ุชุตุฏูุฑ ุงูุชูุฑูุฑ"]
  },
  {
    id: "accounting",
    name: "ุงููุธุงู ุงููุญุงุณุจู ุงููุชูุงูู",
    description: "ุงูุนููุฏ ุงูููุฑู ูููุงููุฉ! ๐๏ธ ูุธุงู ูุญุงุณุจู ูุชูุงูู ุจูุนุงููุฑ ุงุญุชุฑุงููุฉ.",
    features: [
      "ูุฑูุฒ ุงูุญุณุงุจุงุช ูุดุฌุฑุฉ ุงูุญุณุงุจุงุช",
      "ูุฑุงูุฒ ุงูุชูููุฉ ูุชุตููู ุงููููุงุช",
      "ุงูุฃุณุชุงุฐ ุงูุนุงู ูุงููููุฏ ุงูููููุฉ",
      "ููุฒุงู ุงููุฑุงุฌุนุฉ ููุงุฆูุฉ ุงูุฏุฎู ูุงูููุฒุงููุฉ ุงูุนููููุฉ"
    ],
    keywords: ["ูุญุงุณุจุฉ", "ุญุณุงุจุงุช", "ูุฑุงูุฒ ุชูููุฉ", "ุฃุณุชุงุฐ ุนุงู", "ููุฒุงู ูุฑุงุฌุนุฉ"],
    relatedServices: ["profit-loss", "invoices", "expenses"],
    actionSteps: ["ุฅุฏุฎุงู ููุฏ ูููู", "ูุฑุงุฌุนุฉ ุงูุฃุณุชุงุฐ ุงูุนุงู", "ุฅุนุฏุงุฏ ุงูููุงุฆู ุงููุงููุฉ"]
  },

  // ---------- ุงูุฅุฏุงุฑุฉ ูุงูุชุญูู ----------
  {
    id: "sub-users",
    name: "ุงููุณุชุฎุฏููู ุงููุฑุนููู",
    description: "ูุธุงู ุงูุตูุงุญูุงุช ุงูุฐูู! ๐จโ๐ป ุชุนููู ุตูุงุญูุงุช ูุญุฏุฏุฉ ููููุธููู.",
    features: [
      "ุชุนููู ูุณุชุฎุฏููู ูุฑุนููู ุจุตูุงุญูุงุช ูุญุฏุฏุฉ",
      "ูุฑุงูุจุฉ ุนูููุงุช ุงูุฏุฎูู ูุงูุฅุฌุฑุงุกุงุช",
      "ุฅุดุนุงุฑุงุช ุจุฑูุฏูุฉ ุนู ุงูุนูููุงุช",
      "ุดูุงููุฉ ูุฃูุงู ูุงูู"
    ],
    keywords: ["ุงููุณุชุฎุฏููู ุงููุฑุนููู", "ุตูุงุญูุงุช ุงูููุธู", "ูุณุชุฎุฏููู", "ุตูุงุญูุงุช"],
    relatedServices: ["hr-employees"],
    actionSteps: ["ุฅุถุงูุฉ ูุณุชุฎุฏู ูุฑุนู", "ุชุนุฏูู ุงูุตูุงุญูุงุช", "ุนุฑุถ ุณุฌู ุงููุณุชุฎุฏู"]
  },
  {
    id: "tax-settings",
    name: "ุฅุนุฏุงุฏุงุช ุงูุถุฑูุจุฉ",
    description: "ูุฑูุฒ ุชุฎุตูุต ุงูุถุฑุงุฆุจ! โ๏ธ ุชููุฆุฉ ุงููุธุงู ููุจูุฆุฉ ุงูุถุฑูุจูุฉ.",
    features: [
      "ุชุนุฑูู ูุนุฏูุงุช ุงูุถุฑูุจุฉ (15%ุ 0%)",
      "ุชุญุฏูุฏ ุงูุณูุน ูุงูุฎุฏูุงุช ุงููุนูุงุฉ",
      "ุฅุนุฏุงุฏุงุช ูููุฉ ููููุงุชูุฑ ูุงูุฅุดุนุงุฑุงุช",
      "ุชูุงูู ูุงูู ูุน ุงูุฃูุธูุฉ ุงูุถุฑูุจูุฉ"
    ],
    keywords: ["ุฅุนุฏุงุฏุงุช ุงูุถุฑูุจุฉ", "ุถุฑูุจุฉ", "ุฅุนุฏุงุฏุงุช", "ุงูุถุฑูุจุฉ"],
    relatedServices: ["invoices", "credit-notes"],
    actionSteps: ["ุชุนุฏูู ูุนุฏู ุงูุถุฑูุจุฉ", "ุฅุถุงูุฉ ุจูุฏ ูุนูู", "ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ุงูุถุฑูุจูุฉ"]
  }
];

// ==================== ูุธุงู ุงููุฑุงุฏูุงุช ูุงูููู ====================
export const SYNONYM_MAP: Record<string, string[]> = {
  // ูุฑุชุจ ูุฑูุงุชุจ
  "ูุฑุชุจ": ["ุฑุงุชุจ", "ูุณูุฑุฉ ุฑูุงุชุจ", "ุฃุฌุฑ", "ููุงูุฃุฉ", "payment", "salary"],
  "ุฑุงุชุจ": ["ูุฑุชุจ", "ูุณูุฑุฉ ุฑูุงุชุจ", "payroll", "salary", "compensation"],
  "ูุณูุฑุฉ ุฑูุงุชุจ": ["ุงูุฑูุงุชุจ", "ูุฑุชุจ", "ุฑุงุชุจ", "payroll", "salary calculation"],
  
  // ููุงุชูุฑ
  "ูุงุชูุฑุฉ": ["ุงููุงุชูุฑุฉ ุงูุถุฑูุจูุฉ", "ูุงุชูุฑุฉ ุถุฑูุจูุฉ", "invoice", "bill", "ูุงุชูุฑุฉ ูุจูุนุงุช"],
  "ุงููุงุชูุฑุฉ ุงูุถุฑูุจูุฉ": ["ูุงุชูุฑุฉ", "ูุงุชูุฑุฉ ุถุฑูุจูุฉ", "tax invoice", "VAT invoice"],
  
  // ููุธููู
  "ุณุฌู ููุธู": ["ุจูุงูุงุช ุงูููุธู", "ุฅุฏุงุฑุฉ ุงูููุธููู", "employee record", "staff file"],
  "ุจูุงูุงุช ุงูููุธู": ["ุณุฌู ููุธู", "ุฅุฏุงุฑุฉ ุงูููุธููู", "employee information", "staff data"],
  "ุฅุฏุงุฑุฉ ุงูููุธููู": ["ุณุฌู ููุธู", "ุจูุงูุงุช ุงูููุธู", "HR management", "employee management"],
  
  // ุตุฑู
  "ุตุฑู": ["ุณูุฏ ุตุฑู", "ุตุฑู ุฑุงุชุจ", "ุฏูุน", "payment", "expense", "disbursement"],
  "ุณูุฏ ุตุฑู": ["ุตุฑู", "ุฏูุน", "expense voucher", "payment voucher"],
  "ุตุฑู ุฑุงุชุจ": ["ุฏูุน ุฑุงุชุจ", "ุฅุนุทุงุก ุฑุงุชุจ", "salary payment", "payroll disbursement"],
  
  // ุนููู
  "ุนููู": ["ุฒุจูู", "ูุณุชููุฏ", "customer", "client", "ูุดุชุฑู"],
  "ุฒุจูู": ["ุนููู", "ูุณุชููุฏ", "customer", "client"],
  
  // ูููุฉ
  "ูููุฉ": ["ุชุณู", "ุนูู", "task", "assignment", "job"],
  "ุชุณู": ["ูููุฉ", "ุนูู", "task", "assignment"],
  
  // ูุตุฑูู
  "ูุตุฑูู": ["ููุตุฑู", "ูููุฉ", "expense", "cost", "spending"],
  "ููุตุฑู": ["ูุตุฑูู", "ูููุฉ", "expense", "expenditure"],
  
  // ุฅุดุนุงุฑ
  "ุฅุดุนุงุฑ": ["ุชูุจูู", "ุฅูุฐุงุฑ", "notification", "alert", "notice"],
  "ุชูุจูู": ["ุฅุดุนุงุฑ", "ุฅูุฐุงุฑ", "alert", "notification"],
  
  // ุฎุทุงุจ
  "ุฎุทุงุจ": ["ููุชูุจ", "ุฑุณุงูุฉ", "letter", "document", "ูุณุชูุฏ"],
  "ููุชูุจ": ["ุฎุทุงุจ", "ุฑุณุงูุฉ", "letter", "written document"],
  
  // ูููุฉ
  "ูููุฉ": ["ุฅูุงูุฉ", "ุฌูุงุฒ", "ุจุทุงูุฉ", "identity", "residency", "ID"],
  "ุฅูุงูุฉ": ["ูููุฉ", "ุชุตุฑูุญ ุฅูุงูุฉ", "residency", "residence permit"],
  
  // ุจุงูุฉ
  "ุจุงูุฉ": ["ุญุฒูุฉ", "ุจุฑูุงูุฌ", "package", "bundle", "plan"],
  "ุญุฒูุฉ": ["ุจุงูุฉ", "ุจุฑูุงูุฌ", "package", "bundle"]
};

// ==================== ูุธุงู ุงูุฑุจุท ุงูุฐูู ====================
export const SERVICE_CONNECTIONS: Record<string, string[]> = {
  "hr-employees": ["hr-packages", "hr-tasks", "payroll", "hr-letters", "hr-ids"],
  "hr-packages": ["hr-employees", "payroll", "commission"],
  "invoices": ["clients", "credit-notes", "profit-loss"],
  "clients": ["invoices", "offers-income", "financial-bonds"],
  "payroll": ["hr-packages", "hr-employees", "expenses"],
  "expenses": ["profit-loss", "accounting", "payroll"],
  "profit-loss": ["invoices", "expenses", "payroll", "offers-income"],
  "fleet": ["expenses", "inventory"],
  "commission": ["hr-packages", "payroll"],
  "accounting": ["profit-loss", "expenses", "invoices"]
};

// ==================== ูุธุงุฆู ูุณุงุนุฏุฉ ====================
export class AIAssistantService {
    /**
     * ุชูุธูู ูุชุฌููุฒ ุงููุต ููุจุญุซ
     */
    private static normalizeText(text: string): string {
      return text
        .toLowerCase()
        .replace(/[ุฃุฅุข]/g, 'ุง')
        .replace(/ุฉ/g, 'ู')
        .replace(/[^\w\s\u0600-\u06FF]/g, '')
        .trim();
    }

    /**
     * ุญุณุงุจ ูุณุจุฉ ุงูุชุดุงุจู ุจูู ูุตูู (Dice's Coefficient)
     */
    private static calculateSimilarity(str1: string, str2: string): number {
      const s1 = this.normalizeText(str1);
      const s2 = this.normalizeText(str2);
      
      if (s1 === s2) return 1.0;
      if (s1.includes(s2) || s2.includes(s1)) return 0.8;

      const pairs = (str: string) => {
        const set = new Set<string>();
        for (let i = 0; i < str.length - 1; i++) {
          set.add(str.substring(i, i + 2));
        }
        return set;
      };

      const pairs1 = pairs(s1);
      const pairs2 = pairs(s2);
      
      if (pairs1.size === 0 || pairs2.size === 0) return 0;

      let union = pairs1.size + pairs2.size;
      let intersection = 0;
      pairs1.forEach(p => {
        if (pairs2.has(p)) intersection++;
      });

      return (2.0 * intersection) / union;
    }

    /**
     * ุงูุจุญุซ ุนู ุฑุฏ ููุงุณุจ ุจูุงุกู ุนูู ุฑุณุงูุฉ ุงููุณุชุฎุฏู
     */
    static findResponse(userMessage: string): AIResponse {
      const message = this.normalizeText(userMessage);
      
      // 1. ุงูุจุญุซ ุนู ุชุทุงุจู ุชุงู ุฃู ุงุญุชูุงุก ูู ุงููููุงุช ุงูููุชุงุญูุฉ
      const allResponses = [...KNOWLEDGE_BASE, ...RESPONSE_LIBRARY];
      
      // ูุญุงููุฉ ุงูุจุญุซ ุนู ุชุทุงุจู ููู ุฃููุงู
      for (const response of allResponses) {
        for (const keyword of response.keywords) {
          const normKeyword = this.normalizeText(keyword);
          if (message === normKeyword || (message.length > 4 && normKeyword.includes(message))) {
            return { ...response, confidenceScore: 1.0 };
          }
        }
      }

      // 2. ุงูุจุญุซ ุนู ุชุดุงุจู ุฌุฒุฆู (Fuzzy Matching)
      let bestMatch: AIResponse | null = null;
      let highestScore = 0;

      for (const response of allResponses) {
        for (const keyword of response.keywords) {
          const score = this.calculateSimilarity(userMessage, keyword);
          if (score > highestScore) {
            highestScore = score;
            bestMatch = response;
          }
        }
      }

      if (bestMatch && highestScore > 0.6) {
        return { ...bestMatch, confidenceScore: highestScore };
      }

      // 3. ุงูุจุญุซ ูู ุงููุฑุงุฏูุงุช ูุงูุฎุฏูุงุช ุงููุฑุชุจุทุฉ
      for (const [mainWord, synonyms] of Object.entries(SYNONYM_MAP)) {
        if (this.calculateSimilarity(userMessage, mainWord) > 0.7) {
          const relatedService = this.findRelatedService(mainWord);
          if (relatedService) return this.createServiceResponse(relatedService);
        }
        
        for (const synonym of synonyms) {
          if (this.calculateSimilarity(userMessage, synonym) > 0.7) {
            const relatedService = this.findRelatedService(mainWord);
            if (relatedService) return this.createServiceResponse(relatedService);
          }
        }
      }

      // 4. ุฅุฐุง ูุงู ุงูุชุดุงุจู ุถุนููุงูุ ูููู ุจุฌูุน ุฃูุถู 3 ุงูุชุฑุงุญุงุช ูุชูุฏูููุง ูููุณุชุฎุฏู
      const suggestions = allResponses
        .map(r => ({ 
          response: r, 
          score: Math.max(...r.keywords.map(k => this.calculateSimilarity(userMessage, k))) 
        }))
        .filter(s => s.score > 0.3)
        .sort((a, b) => b.score - a.score)
        .slice(0, 3);

      if (suggestions.length > 0) {
        const unclearResponse = RESPONSE_LIBRARY.find(r => r.id === "unclear-001")!;
        const suggestionText = suggestions.map((s, i) => `${i + 1}. ${s.response.keywords[0] || s.response.id}`).join('\n');
        
        return {
          ...unclearResponse,
          text: `ุฃุนุชุฐุฑุ ูู ุฃููู ุทูุจู ุจุฏูุฉุ ูู ุชูุตุฏ ุฃุญุฏ ูุฐู ุงูููุงุถูุนุ ๐ค\n\n${suggestionText}\n\nุฃู ููููู ุฅุฎุจุงุฑู ุจูุฒูุฏ ูู ุงูุชูุงุตูู ููุณุงุนุฏุชู ุจุดูู ุฃูุถู.`,
          relatedServices: suggestions.map(s => s.response.keywords[0] || s.response.id),
          confidenceScore: 0.4
        };
      }
      
      return RESPONSE_LIBRARY.find(r => r.id === "unclear-001")!;
    }
  
  /**
   * ุงูุจุญุซ ุนู ุฎุฏูุฉ ูุฑุชุจุทุฉ ุจูููุฉ
   */
  static findRelatedService(keyword: string): ServiceDefinition | null {
    for (const service of SERVICE_DEFINITIONS) {
      if (service.keywords.some(k => k.includes(keyword) || keyword.includes(k))) {
        return service;
      }
    }
    return null;
  }
  
  /**
   * ุฅูุดุงุก ุฑุฏ ุชูุงุนูู ููุฎุฏูุฉ
   */
  static createServiceResponse(service: ServiceDefinition): AIResponse {
    const relatedServices = SERVICE_CONNECTIONS[service.id] || [];
    const connectedServices = relatedServices
      .map(id => SERVICE_DEFINITIONS.find(s => s.id === id))
      .filter(Boolean) as ServiceDefinition[];
    
    const responseText = `${service.description}\n\nโจ **ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ:**\n${service.features.map(f => `โข ${f}`).join('\n')}`;
    
    if (connectedServices.length > 0) {
      const connections = `\n\n๐ **ุฎุฏูุงุช ูุฑุชุจุทุฉ ูุฏ ุชููู:**\n${connectedServices.slice(0, 3).map(s => `โข ${s.name}`).join('\n')}`;
      return {
        id: `service-${service.id}`,
        text: responseText + connections,
        category: "operations",
        keywords: service.keywords,
        relatedServices: connectedServices.map(s => s.name),
        action: service.actionSteps?.[0],
        confidenceScore: 0.85
      };
    }
    
    return {
      id: `service-${service.id}`,
      text: responseText,
      category: "operations",
      keywords: service.keywords,
      relatedServices: [],
      confidenceScore: 0.85
    };
  }
  
    /**
     * ุชูููุฏ ุฑุฏ ุชูุงุนูู ูุน ุงูุฑุจุท ุงูุฐูู
     */
    static generateInteractiveResponse(userMessage: string, context: string[] = []): AIResponse {
      const baseResponse = this.findResponse(userMessage);
      
      // ุฅุฐุง ูุงู ุงูุฑุฏ ุบูุฑ ูุงุถุญุ ูุญุงูู ุงูุจุญุซ ูู ุงูุณูุงู
      if (baseResponse.confidenceScore! < 0.5) {
        // ูุญุงููุฉ ููู ุงููุตุฏ ูู ุงููููุงุช ุงููุฑุฏูุฉ ุฅุฐุง ูุดู ุงูุจุญุซ ุนู ุงูุฌููุฉ ูุงููุฉ
        const words = userMessage.split(/\s+/);
        for (const word of words) {
          if (word.length > 3) {
            const relatedService = this.findRelatedService(word);
            if (relatedService) {
              const serviceResp = this.createServiceResponse(relatedService);
              return {
                ...serviceResp,
                text: `ูู ุฃููู ุงูุฌููุฉ ูุงููุฉุ ูููู ูุจุฏู ุฃูู ุชุณุฃู ุนู "${relatedService.name}":\n\n${serviceResp.text}`,
                confidenceScore: 0.6
              };
            }
          }
        }
      }

      // ุฅุถุงูุฉ ุทุงุจุน "ุฐูุงุก ุงุตุทูุงุนู" ูููุณ ุฑูุจูุช
      if (baseResponse.confidenceScore! >= 0.8) {
        const intros = [
          "ุจุงูุชุฃููุฏุ ุฅููู ุงูุชูุงุตูู ุญูู ูุง ุทูุจุช: ",
          "ุณุคุงู ุฑุงุฆุน! ุจุฎุตูุต ุฐููุ ูููููู ุฅุฎุจุงุฑู ุฃู: ",
          "ูุณุนุฏูู ูุณุงุนุฏุชู ูู ูุฐุง ุงูุฃูุฑ. ุฅููู ูุง ุชุญุชุงุฌู: ",
          "ุจุงูุทุจุนุ ูุฐุง ูุง ุชุจุญุซ ุนูู: "
        ];
        const intro = intros[Math.floor(Math.random() * intros.length)];
        
        // ูุง ุชุถู ุงูููุฏูุฉ ุฅุฐุง ูุงู ุงูุฑุฏ ุฃุตูุงู ุทูููุงู ุฌุฏุงู ุฃู ูุจุฏุฃ ุจุชุฑุญูุจ
        if (!baseResponse.text.startsWith("ูุฑุญุจุง") && baseResponse.text.length < 500) {
          return {
            ...baseResponse,
            text: `${intro}\n\n${baseResponse.text}`
          };
        }
      }
      
      return baseResponse;
    }
  
  /**
   * ุงูุญุตูู ุนูู ุดุฎุตูุฉ ุงููุณุงุนุฏ
   */
  static getPersonality(): AIPersonality {
    return AI_PERSONALITY;
  }
  
  /**
   * ุงูุญุตูู ุนูู ุฌููุน ุงูุฎุฏูุงุช
   */
  static getAllServices(): ServiceDefinition[] {
    return SERVICE_DEFINITIONS;
  }
  
  /**
   * ุงูุญุตูู ุนูู ุงูุฎุฏูุงุช ุญุณุจ ุงูุชุตููู
   */
  static getServicesByCategory(category: string): ServiceDefinition[] {
    return SERVICE_DEFINITIONS.filter(service => 
      service.id.startsWith(category.toLowerCase())
    );
  }
}

export default AIAssistantService;
